{
  "name": "4. Agente Financeiro IA - BPO",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1,
      "position": [240, 360],
      "id": "trigger-workflow",
      "name": "Receber Mensagem"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "01",
              "name": "input_text",
              "value": "={{ $json.mensagem }}",
              "type": "string"
            },
            {
              "id": "02",
              "name": "telefone",
              "value": "={{ $json.telefone }}",
              "type": "string"
            },
            {
              "id": "03",
              "name": "session_id",
              "value": "={{ 'bpo_financeiro_' + $json.telefone.replace(/[^0-9]/g, '') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [460, 360],
      "id": "prepare-input",
      "name": "Preparar Entrada"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list"
        },
        "options": {
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [900, 60],
      "id": "openai-model",
      "name": "OpenAI GPT-4o",
      "credentials": {
        "openAiApi": {
          "id": "openai-bpo",
          "name": "OpenAI - BPO Financeiro"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Preparar Entrada').item.json.session_id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryZep",
      "typeVersion": 1.1,
      "position": [900, 760],
      "id": "zep-memory",
      "name": "Zep Memory",
      "credentials": {
        "zepApi": {
          "id": "zep-bpo",
          "name": "Zep - BPO Financeiro"
        }
      }
    },
    {
      "parameters": {
        "name": "buscar_cliente_fornecedor",
        "description": "Use esta ferramenta para consultar dados de clientes ou fornecedores no banco de dados. Você pode buscar por nome, documento (CPF/CNPJ) ou telefone.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_BUSCAR_CLIENTE_ID || 'tool-buscar-cliente' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "nome": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nome', 'Nome parcial ou completo para buscar', 'string') }}",
            "documento": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('documento', 'CPF ou CNPJ para buscar', 'string') }}",
            "telefone": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('telefone', 'Telefone para buscar', 'string') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1020, 60],
      "id": "tool-buscar-cliente",
      "name": "Buscar Cliente/Fornecedor"
    },
    {
      "parameters": {
        "name": "listar_categorias",
        "description": "Lista todas as categorias financeiras disponíveis (receitas e despesas).",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_LISTAR_CATEGORIAS_ID || 'tool-listar-categorias' }}",
          "mode": "id"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1140, 60],
      "id": "tool-listar-categorias",
      "name": "Listar Categorias"
    },
    {
      "parameters": {
        "name": "buscar_movimentacoes",
        "description": "Busca movimentações financeiras existentes. Filtre por data, tipo, status de pagamento.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_BUSCAR_MOVIMENTACOES_ID || 'tool-buscar-movimentacoes' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "filtro_tipo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('filtro_tipo', 'receita ou despesa', 'string') }}",
            "filtro_quitado": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('filtro_quitado', 'true ou false', 'string') }}",
            "data_inicio": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_inicio', 'Data início YYYY-MM-DD', 'string') }}",
            "data_fim": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_fim', 'Data fim YYYY-MM-DD', 'string') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1260, 60],
      "id": "tool-buscar-movimentacoes",
      "name": "Buscar Movimentações"
    },
    {
      "parameters": {
        "name": "salvar_movimentacao",
        "description": "Salva nova movimentação financeira. IMPORTANTE: Use APENAS após confirmação do usuário.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_SALVAR_MOVIMENTACAO_ID || 'tool-salvar-movimentacao' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "tipo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('tipo', 'receita ou despesa', 'string') }}",
            "descricao": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('descricao', 'Descrição da movimentação', 'string') }}",
            "valor_previsto": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('valor_previsto', 'Valor em formato numérico', 'number') }}",
            "valor_realizado": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('valor_realizado', 'Valor realizado (opcional)', 'number') }}",
            "data_vencimento": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_vencimento', 'Data no formato YYYY-MM-DD', 'string') }}",
            "data_realizado": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_realizado', 'Data realizado YYYY-MM-DD (opcional)', 'string') }}",
            "quitado": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('quitado', 'true ou false', 'boolean') }}",
            "tipo_entidade": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('tipo_entidade', 'pf ou pj', 'string') }}",
            "categoria_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('categoria_id', 'UUID da categoria', 'string') }}",
            "cliente_fornecedor_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('cliente_fornecedor_id', 'UUID do cliente/fornecedor (opcional)', 'string') }}",
            "centro_custo_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('centro_custo_id', 'UUID do centro de custo (opcional)', 'string') }}",
            "observacao": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('observacao', 'Observações adicionais (opcional)', 'string') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1380, 60],
      "id": "tool-salvar-movimentacao",
      "name": "Salvar Movimentação"
    },
    {
      "parameters": {
        "name": "criar_cliente_fornecedor",
        "description": "Cria novo cliente ou fornecedor no banco de dados.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_CRIAR_CLIENTE_ID || 'tool-criar-cliente' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "nome": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nome', 'Nome completo', 'string') }}",
            "documento": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('documento', 'CPF ou CNPJ (opcional)', 'string') }}",
            "telefone": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('telefone', 'Telefone (opcional)', 'string') }}",
            "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('email', 'Email (opcional)', 'string') }}",
            "tipo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('tipo', 'pf ou pj (opcional)', 'string') }}",
            "endereco": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('endereco', 'Endereço completo (opcional)', 'string') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1500, 60],
      "id": "tool-criar-cliente",
      "name": "Criar Cliente/Fornecedor"
    },
    {
      "parameters": {
        "name": "fluxo_caixa_projetado",
        "description": "Consulta fluxo de caixa projetado dos próximos 30 dias. Mostra entradas, saídas e saldo acumulado.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_FLUXO_CAIXA_ID || 'tool-fluxo-caixa' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "dias": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('dias', 'Número de dias para projeção (padrão: 30)', 'number') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1020, 220],
      "id": "tool-fluxo-caixa",
      "name": "Fluxo de Caixa Projetado"
    },
    {
      "parameters": {
        "name": "criar_parcelamento",
        "description": "Cria parcelamento (compra/venda parcelada). Gera todas as parcelas automaticamente.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_CRIAR_PARCELAMENTO_ID || 'tool-criar-parcelamento' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "tipo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('tipo', 'receita ou despesa', 'string') }}",
            "descricao": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('descricao', 'Descrição do parcelamento', 'string') }}",
            "valor_total": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('valor_total', 'Valor total em reais', 'number') }}",
            "num_parcelas": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('num_parcelas', 'Número de parcelas (2-120)', 'number') }}",
            "data_primeira_parcela": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('data_primeira_parcela', 'Data da primeira parcela YYYY-MM-DD', 'string') }}",
            "tipo_entidade": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('tipo_entidade', 'pf ou pj (opcional)', 'string') }}",
            "categoria_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('categoria_id', 'UUID da categoria (opcional)', 'string') }}",
            "cliente_fornecedor_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('cliente_fornecedor_id', 'UUID do cliente/fornecedor (opcional)', 'string') }}",
            "observacao": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('observacao', 'Observações (opcional)', 'string') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1140, 220],
      "id": "tool-criar-parcelamento",
      "name": "Criar Parcelamento"
    },
    {
      "parameters": {
        "name": "criar_recorrencia",
        "description": "Cria recorrência mensal (aluguel, salário, assinatura). Gera movimentações automaticamente todo mês.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_CRIAR_RECORRENCIA_ID || 'tool-criar-recorrencia' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "tipo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('tipo', 'receita ou despesa', 'string') }}",
            "descricao": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('descricao', 'Descrição da recorrência', 'string') }}",
            "valor": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('valor', 'Valor mensal em reais', 'number') }}",
            "dia_vencimento": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('dia_vencimento', 'Dia do vencimento (1-31)', 'number') }}",
            "tipo_entidade": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('tipo_entidade', 'pf ou pj (opcional)', 'string') }}",
            "categoria_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('categoria_id', 'UUID da categoria (opcional)', 'string') }}",
            "cliente_fornecedor_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('cliente_fornecedor_id', 'UUID do cliente/fornecedor (opcional)', 'string') }}",
            "observacao": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('observacao', 'Observações (opcional)', 'string') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1260, 220],
      "id": "tool-criar-recorrencia",
      "name": "Criar Recorrência"
    },
    {
      "parameters": {
        "name": "relatorio_inadimplencia",
        "description": "Relatório detalhado de inadimplência. Mostra clientes em atraso, valores e nível de risco.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_INADIMPLENCIA_ID || 'tool-inadimplencia' }}",
          "mode": "id"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1380, 220],
      "id": "tool-inadimplencia",
      "name": "Relatório de Inadimplência"
    },
    {
      "parameters": {
        "name": "dashboard_kpis",
        "description": "Dashboard com indicadores financeiros: resultado do mês, contas a pagar/receber, inadimplência, projeções. Use quando pedirem resumo financeiro ou visão geral.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_DASHBOARD_ID || 'tool-dashboard-kpis' }}",
          "mode": "id"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1500, 220],
      "id": "tool-dashboard",
      "name": "Dashboard KPIs"
    },
    {
      "parameters": {
        "name": "centros_custo",
        "description": "Consulta centros de custo. Use acao='relatorio' para ver despesas por centro ou acao='listar' para ver centros disponíveis.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_CENTROS_CUSTO_ID || 'tool-centros-custo' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "acao": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('acao', 'relatorio ou listar', 'string') }}",
            "ano": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('ano', 'Ano (opcional)', 'number') }}",
            "mes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('mes', 'Mês 1-12 (opcional)', 'number') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1020, 380],
      "id": "tool-centros-custo",
      "name": "Centros de Custo"
    },
    {
      "parameters": {
        "name": "orcamento_realizado",
        "description": "Relatório de orçamento vs realizado. Compara o planejado com o executado por categoria.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_ORCAMENTO_ID || 'tool-orcamento-realizado' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "ano": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('ano', 'Ano (opcional)', 'number') }}",
            "mes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('mes', 'Mês 1-12 (opcional)', 'number') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1140, 380],
      "id": "tool-orcamento",
      "name": "Orçamento vs Realizado"
    },
    {
      "parameters": {
        "name": "dre_simplificado",
        "description": "DRE - Demonstrativo de Resultado do Exercício. Mostra receitas, despesas e resultado dos últimos meses.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_DRE_ID || 'tool-dre' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "meses": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('meses', 'Quantidade de meses (padrão: 6)', 'number') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1260, 380],
      "id": "tool-dre",
      "name": "DRE Simplificado"
    },
    {
      "parameters": {
        "name": "conciliacao_bancaria",
        "description": "Conciliação bancária. Use acao='pendentes' para ver itens não conciliados ou acao='conciliar' para conciliar um item específico.",
        "workflowId": {
          "__rl": true,
          "value": "={{ $env.TOOL_CONCILIACAO_ID || 'tool-conciliacao' }}",
          "mode": "id"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "acao": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('acao', 'pendentes ou conciliar', 'string') }}",
            "extrato_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('extrato_id', 'UUID do item do extrato (para conciliar)', 'string') }}",
            "movimentacao_id": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('movimentacao_id', 'UUID da movimentação correspondente', 'string') }}"
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.0,
      "position": [1380, 380],
      "id": "tool-conciliacao",
      "name": "Conciliação Bancária"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.input_text }}",
        "options": {
          "systemMessage": "# PAPEL\n\nVocê é a assistente financeira IA da Mottivme Sales, especializada em BPO Financeiro completo. Sua missão é auxiliar no processamento, registro e análise de movimentações financeiras via WhatsApp.\n\n# PERSONALIDADE\n\n* Profissional e confiável\n* Precisa e meticulosa com valores e datas\n* Eficiente e organizada\n* Clara e objetiva\n* Respostas curtas (máximo 300 caracteres quando possível)\n\n# CONTEXTO\n\n* Empresa: Mottivme Sales - Consultoria e Gestão Comercial\n* Sistema: Supabase PostgreSQL\n* Moeda: Real Brasileiro (BRL)\n* Tipos de Entidade: PF (Pessoa Física) ou PJ (Pessoa Jurídica)\n\n# FERRAMENTAS DISPONÍVEIS (14 tools)\n\n## Cadastros e Consultas\n1. **buscar_cliente_fornecedor** - Busca clientes/fornecedores\n2. **criar_cliente_fornecedor** - Cria novo cliente/fornecedor\n3. **listar_categorias** - Lista categorias financeiras\n\n## Movimentações\n4. **buscar_movimentacoes** - Consulta movimentações com filtros\n5. **salvar_movimentacao** - Salva nova movimentação (após confirmação)\n\n## Parcelamentos e Recorrências\n6. **criar_parcelamento** - Cria compra/venda parcelada\n7. **criar_recorrencia** - Cria despesa/receita mensal recorrente\n\n## Relatórios e Análises\n8. **fluxo_caixa_projetado** - Projeção de caixa 30 dias\n9. **relatorio_inadimplencia** - Clientes inadimplentes\n10. **dashboard_kpis** - Visão geral/resumo financeiro\n11. **dre_simplificado** - DRE dos últimos meses\n12. **orcamento_realizado** - Planejado vs executado\n13. **centros_custo** - Despesas por centro de custo\n14. **conciliacao_bancaria** - Conciliação bancária\n\n# QUANDO USAR CADA FERRAMENTA\n\n**\"Como estão as finanças?\" / \"Resumo financeiro\" / \"Visão geral\"**\n→ Use **dashboard_kpis**\n\n**\"Quanto gastamos este mês?\" / \"Despesas por área\"**\n→ Use **centros_custo** com acao='relatorio'\n\n**\"Estamos dentro do orçamento?\" / \"Meta vs realizado\"**\n→ Use **orcamento_realizado**\n\n**\"Como foi o resultado dos últimos meses?\" / \"Lucro/prejuízo\"**\n→ Use **dre_simplificado**\n\n**\"Tem algo para conciliar?\" / \"Extrato bancário\"**\n→ Use **conciliacao_bancaria** com acao='pendentes'\n\n**\"Quem está devendo?\" / \"Inadimplentes\"**\n→ Use **relatorio_inadimplencia**\n\n**\"Como vai ficar o caixa?\" / \"Projeção\"**\n→ Use **fluxo_caixa_projetado**\n\n# FLUXO DE PROCESSAMENTO\n\n## Para Entrada de Movimentação:\n1. Extraia: tipo, valor, descrição, data\n2. Use **listar_categorias** para identificar a categoria\n3. Use **buscar_cliente_fornecedor** se mencionado algum nome\n4. Pergunte o centro de custo para despesas\n5. Apresente resumo e peça confirmação\n6. APENAS após \"Sim\", use **salvar_movimentacao**\n\n## Para Parcelamento:\n1. Identifique: tipo, valor total, parcelas, data primeira\n2. Calcule e mostre valor de cada parcela\n3. Peça confirmação\n4. Use **criar_parcelamento** após \"Sim\"\n\n## Para Recorrência:\n1. Identifique: tipo, descrição, valor, dia do mês\n2. Apresente resumo\n3. Peça confirmação\n4. Use **criar_recorrencia** após \"Sim\"\n\n# VALIDAÇÕES\n\n* Valores: numéricos positivos, máximo 2 decimais\n* Datas: converter para YYYY-MM-DD\n* Parcelas: entre 2 e 120\n* Dia vencimento: entre 1 e 31\n* Tipo entidade: PJ é padrão se não informado\n\n# REGRAS IMPORTANTES\n\n1. SEMPRE confirme antes de salvar\n2. SEMPRE verifique duplicatas\n3. NUNCA assuma informações não fornecidas\n4. Em dúvida, PERGUNTE\n5. Para despesas, pergunte o centro de custo\n6. Use dashboard_kpis para visões gerais\n\n# MENSAGENS PADRÃO\n\n**Sucesso:** ✅ [Ação] realizada!\n**Erro:** ❌ Erro: [motivo]\n**Falta info:** ⚠️ Preciso de: [campos]\n\n# DATA ATUAL\n{{ $now.format('DD/MM/YYYY HH:mm') }}"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.0,
      "position": [680, 360],
      "id": "agente-financeiro-principal",
      "name": "Agente Financeiro IA"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "output-01",
              "name": "output",
              "value": "={{ $json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [900, 360],
      "id": "format-output",
      "name": "Formatar Saída"
    }
  ],
  "connections": {
    "Receber Mensagem": {
      "main": [
        [
          {
            "node": "Preparar Entrada",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Preparar Entrada": {
      "main": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agente Financeiro IA": {
      "main": [
        [
          {
            "node": "Formatar Saída",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI GPT-4o": {
      "ai_languageModel": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Zep Memory": {
      "ai_memory": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Buscar Cliente/Fornecedor": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Listar Categorias": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Buscar Movimentações": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Salvar Movimentação": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Criar Cliente/Fornecedor": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Fluxo de Caixa Projetado": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Criar Parcelamento": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Criar Recorrência": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Relatório de Inadimplência": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Dashboard KPIs": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Centros de Custo": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Orçamento vs Realizado": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "DRE Simplificado": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Conciliação Bancária": {
      "ai_tool": [
        [
          {
            "node": "Agente Financeiro IA",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "v3.0.0",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "n8n-bpo-financeiro"
  },
  "id": "agente-financeiro-ia-bpo",
  "tags": []
}
