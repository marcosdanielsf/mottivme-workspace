{
    "name": "MIS - Auto Resolve Confirmed Issues",
    "nodes": [
        {
            "parameters": {
                "httpMethod": "POST",
                "path": "grupo-bposs",
                "options": {}
            },
            "id": "5ace1f8e-f44f-421e-a5ae-50ad2a9118fa",
            "name": "Webhook",
            "type": "n8n-nodes-base.webhook",
            "typeVersion": 2,
            "position": [
                -1952,
                -704
            ],
            "webhookId": "b91dd502-3731-43ce-84d2-6e4f1fb55a64"
        },
        {
            "parameters": {
                "jsCode": "// ============================================\n// üéØ MOTTIVME INTELLIGENCE SYSTEM v3.2\n// DETEC√á√ÉO DE GRUPOS MELHORADA\n// ============================================\n\nconst inputData = $input.item.json;\nconst body = inputData.body || inputData;\n\n// ============================================\n// üåé CONFIGURA√á√ïES DE TIMEZONE\n// ============================================\n\nconst BRAZIL_TIMEZONE = 'America/Sao_Paulo';\n\nfunction getBrazilHour(timestamp) {\n  const date = new Date(timestamp);\n  const brazilTime = date.toLocaleString('en-US', { \n    timeZone: BRAZIL_TIMEZONE,\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: false \n  });\n  return parseInt(brazilTime.split(':')[0]);\n}\n\n// ============================================\n// üë• DATABASE DO TIME MOTTIVME\n// ============================================\n\nconst TEAM_MEMBERS = {\n  '36451974701117': {\n    name: 'Isabella Delduco',\n    role: 'SDR/Gestora IA/CS',\n    responsibilities: ['leads', 'ia-quality', 'customer-success'],\n    alert_keywords: ['erro ia', 'ia n√£o', 'ajustar prompt', 'ia errou', 'bug', 'n√£o funciona'],\n    work_hours: { start: 9, end: 18 },\n  },\n  '263152797282382': {\n    name: 'Allesson',\n    role: 'Gestor de Automa√ß√µes',\n    responsibilities: ['crm', 'integracoes', 'automacoes', 'supervisor-bdr'],\n    alert_keywords: ['como fa√ßo', 'qual processo', 'precisa aprova√ß√£o', 'n√£o sei', 'como configurar'],\n    work_hours: { start: 9, end: 18 },\n  },\n  '179100538937487': {\n    name: 'Hallen Naiane',\n    role: 'S√≥cia/Administrativa',\n    responsibilities: ['administrativo', 'financeiro'],\n    alert_keywords: ['urgente', 'precisa resolver', 'emerg√™ncia'],\n    work_hours: { start: 9, end: 15 },\n    special_note: 'Gr√°vida + beb√™ 5 meses - N√ÉO SOBRECARREGAR'\n  },\n  '96525246058639': {\n    name: 'Arthur Santos',\n    role: 'Gestor de Tr√°fego',\n    responsibilities: ['ads', 'trafego', 'anuncios'],\n    alert_keywords: ['an√∫ncio reprovado', 'cpa alto', 'budget', 'convers√£o baixa', 'conta bloqueada'],\n    work_hours: { start: 9, end: 18 },\n  },\n  '23751840268424': {\n    name: 'Marcos Daniel',\n    role: 'CEO/Fundador',\n    responsibilities: ['everything'],\n    alert_keywords: [],\n    work_hours: null,\n    special_note: 'SOBRECARREGADO - precisa delegar mais'\n  }\n};\n\n// ============================================\n// üì± FUN√á√ïES DE AN√ÅLISE DE GRUPOS\n// ============================================\n\n/**\n * Detectar tipo de grupo pelo nome\n * REGRAS:\n * - Come√ßa com \"Mottivme |\" = GRUPO INTERNO (gest√£o)\n * - Come√ßa com \"BPOSS\" = GRUPO DE CLIENTE\n * - Outros padr√µes = unknown\n */\nfunction detectGroupType(fullName) {\n  if (!fullName) return {\n    is_group: false,\n    group_type: null,\n    group_name: null\n  };\n  \n  const name = fullName.trim();\n  \n  // ‚úÖ REGRA 1: Grupos INTERNOS (Mottivme | ...)\n  if (name.startsWith('Mottivme |') || name.startsWith('Mottivme|')) {\n    return {\n      is_group: true,\n      group_type: 'internal',\n      group_name: name,\n      client_name: null\n    };\n  }\n  \n  // ‚úÖ REGRA 2: Grupos de CLIENTES (BPOSS - ...)\n  if (name.startsWith('BPOSS')) {\n    // Extrair nome do cliente (tudo depois de \"BPOSS - \")\n    const clientName = name.replace(/^BPOSS\\s*-?\\s*/, '').trim();\n    \n    return {\n      is_group: true,\n      group_type: 'client',\n      group_name: name,\n      client_name: clientName || 'Cliente n√£o identificado'\n    };\n  }\n  \n  // ‚ö†Ô∏è REGRA 3: Outros grupos (padr√µes gen√©ricos)\n  const nameLower = name.toLowerCase();\n  \n  if (nameLower.includes('grupo') || \n      nameLower.includes('group') ||\n      name.includes('|') ||\n      name.includes('GRUPO') ||\n      name.toUpperCase() === name) {\n    return {\n      is_group: true,\n      group_type: 'unknown',\n      group_name: name,\n      client_name: null\n    };\n  }\n  \n  // ‚ùå N√ÉO √â GRUPO\n  return {\n    is_group: false,\n    group_type: null,\n    group_name: null,\n    client_name: null\n  };\n}\n\nfunction parseGroupMessage(messageBody) {\n  if (!messageBody) {\n    return {\n      clean_message: '',\n      group_sender_phone: null,\n      group_sender_name: null\n    };\n  }\n  \n  const msg = String(messageBody);\n  \n  const groupPattern = /^(\\d+)\\s+([^:]+):\\n\\n(.+)$/s;\n  const match = msg.match(groupPattern);\n  \n  if (match) {\n    return {\n      clean_message: match[3].trim(),\n      group_sender_phone: match[1],\n      group_sender_name: match[2].trim()\n    };\n  }\n  \n  const altPattern = /^([^:]+):\\n\\n(.+)$/s;\n  const altMatch = msg.match(altPattern);\n  \n  if (altMatch) {\n    return {\n      clean_message: altMatch[2].trim(),\n      group_sender_phone: null,\n      group_sender_name: altMatch[1].trim()\n    };\n  }\n  \n  return {\n    clean_message: msg,\n    group_sender_phone: null,\n    group_sender_name: null\n  };\n}\n\nfunction identifyTeamMember(phone, senderName) {\n  if (!phone && !senderName) return null;\n  \n  if (phone) {\n    const cleanPhone = phone.replace(/\\D/g, '');\n    \n    for (const [teamPhone, member] of Object.entries(TEAM_MEMBERS)) {\n      const cleanTeamPhone = teamPhone.replace(/\\D/g, '');\n      \n      if (cleanPhone.includes(cleanTeamPhone) || \n          cleanTeamPhone.includes(cleanPhone)) {\n        return { phone: teamPhone, ...member };\n      }\n    }\n  }\n  \n  if (senderName) {\n    const nameLower = senderName.toLowerCase();\n    \n    for (const [teamPhone, member] of Object.entries(TEAM_MEMBERS)) {\n      const memberFirstName = member.name.toLowerCase().split(' ')[0];\n      const memberLastName = member.name.toLowerCase().split(' ')[1] || '';\n      \n      if (nameLower.includes(memberFirstName) && \n          (memberLastName === '' || nameLower.includes(memberLastName))) {\n        return { phone: teamPhone, ...member };\n      }\n    }\n  }\n  \n  return null;\n}\n\nfunction analyzeTeamBehavior(teamMember, messageBody, timestamp, groupInfo) {\n  if (!teamMember) return null;\n  \n  const hour = getBrazilHour(timestamp);\n  \n  const analysis = {\n    is_team_member: true,\n    team_member_name: teamMember.name,\n    team_member_role: teamMember.role,\n    alert_flags: [],\n    severity: 'low',\n    context: groupInfo && groupInfo.is_group \n      ? `Mensagem em grupo ${groupInfo.group_type}` \n      : 'Mensagem direta',\n    hour_brazil: hour\n  };\n  \n  const msg = String(messageBody || '').toLowerCase();\n  \n  for (const keyword of teamMember.alert_keywords) {\n    if (msg.includes(keyword.toLowerCase())) {\n      analysis.alert_flags.push({\n        type: 'keyword_match',\n        keyword: keyword,\n        category: getCategoryFromKeyword(keyword)\n      });\n      \n      if (keyword.includes('erro') || keyword.includes('urgente') || keyword.includes('bloqueada')) {\n        analysis.severity = 'high';\n      } else if (analysis.severity === 'low') {\n        analysis.severity = 'medium';\n      }\n    }\n  }\n  \n  if (teamMember.work_hours) {\n    const { start, end } = teamMember.work_hours;\n    \n    if (hour < start || hour > end) {\n      analysis.alert_flags.push({\n        type: 'off_hours',\n        message: `${teamMember.name} trabalhando √†s ${hour}h (hor√°rio: ${start}h-${end}h)`,\n        hour_brazil: hour,\n        expected_hours: `${start}h-${end}h`\n      });\n      \n      if (teamMember.name === 'Hallen Naiane') {\n        analysis.severity = 'critical';\n        analysis.alert_flags.push({\n          type: 'special_concern',\n          message: 'Hallen trabalhando fora do hor√°rio (gr√°vida + beb√™ 5 meses)'\n        });\n      } else if (analysis.severity === 'low') {\n        analysis.severity = 'medium';\n      }\n    }\n  }\n  \n  if (groupInfo && groupInfo.is_group) {\n    if (groupInfo.group_type === 'internal') {\n      analysis.alert_flags.push({\n        type: 'internal_communication',\n        message: `${teamMember.name} comunicando em grupo interno`\n      });\n      \n      if (msg.includes('erro') || msg.includes('problema') || \n          msg.includes('bug') || msg.includes('n√£o funciona')) {\n        analysis.severity = 'high';\n        analysis.alert_flags.push({\n          type: 'technical_issue_internal',\n          message: 'Problema t√©cnico reportado em grupo interno'\n        });\n      }\n      \n      if (msg.includes('como') || msg.includes('qual processo') || \n          msg.includes('como fa√ßo')) {\n        analysis.alert_flags.push({\n          type: 'missing_process',\n          message: 'D√∫vida de processo - pode faltar documenta√ß√£o'\n        });\n        if (analysis.severity === 'low') analysis.severity = 'medium';\n      }\n    }\n    \n    if (groupInfo.group_type === 'client') {\n      analysis.alert_flags.push({\n        type: 'client_management',\n        message: `${teamMember.name} gerenciando grupo de cliente: ${groupInfo.client_name}`\n      });\n      \n      if (msg.includes('desculpa') || msg.includes('vou verificar') || \n          msg.includes('vou resolver')) {\n        analysis.alert_flags.push({\n          type: 'client_issue_handling',\n          message: 'Time lidando com problema de cliente'\n        });\n        analysis.severity = 'high';\n      }\n    }\n  }\n  \n  if (teamMember.role.includes('IA') || teamMember.role.includes('CS')) {\n    if ((msg.includes('cliente') || msg.includes('client')) && \n        (msg.includes('reclamou') || msg.includes('problema'))) {\n      analysis.alert_flags.push({\n        type: 'customer_issue',\n        message: 'Isabella reportando problema de cliente'\n      });\n      analysis.severity = 'high';\n    }\n  }\n  \n  if (teamMember.role.includes('Automa√ß√µes')) {\n    if (msg.includes('como') || msg.includes('processo') || \n        msg.includes('qual') || msg.includes('n√£o sei')) {\n      analysis.alert_flags.push({\n        type: 'missing_process',\n        message: 'Allesson com d√∫vida de processo'\n      });\n      if (analysis.severity === 'low') analysis.severity = 'medium';\n    }\n  }\n  \n  if (teamMember.role.includes('Tr√°fego')) {\n    if (msg.includes('reprovado') || msg.includes('bloqueada') || \n        msg.includes('cpa') || msg.includes('convers√£o')) {\n      analysis.alert_flags.push({\n        type: 'traffic_issue',\n        message: 'Arthur reportando problema de tr√°fego/ads'\n      });\n      analysis.severity = 'high';\n    }\n  }\n  \n  if (teamMember.name === 'Marcos Daniel') {\n    analysis.alert_flags.push({\n      type: 'ceo_activity',\n      message: 'Marcos respondendo - monitorar frequ√™ncia'\n    });\n    \n    if (msg.includes('como fa√ßo') || msg.includes('qual processo') ||\n        msg.includes('vou fazer') || msg.includes('deixa comigo')) {\n      analysis.alert_flags.push({\n        type: 'ceo_operational',\n        message: '‚ö†Ô∏è Marcos fazendo trabalho operacional - DELEGAR!'\n      });\n      analysis.severity = 'high';\n    }\n  }\n  \n  return analysis;\n}\n\nfunction getCategoryFromKeyword(keyword) {\n  const keywordMap = {\n    'erro ia': 'ai_malfunction',\n    'ia n√£o': 'ai_malfunction',\n    'ajustar prompt': 'ai_tuning_needed',\n    'n√£o funciona': 'malfunction',\n    'bug': 'technical_bug',\n    'como fa√ßo': 'missing_documentation',\n    'qual processo': 'missing_documentation',\n    'como configurar': 'missing_documentation',\n    'precisa aprova√ß√£o': 'blocked_by_approval',\n    'n√£o sei': 'missing_knowledge',\n    'an√∫ncio reprovado': 'ads_rejected',\n    'conta bloqueada': 'ads_account_blocked',\n    'cpa alto': 'performance_issue',\n    'convers√£o baixa': 'performance_issue',\n    'urgente': 'urgent_matter',\n    'emerg√™ncia': 'emergency'\n  };\n  \n  return keywordMap[keyword.toLowerCase()] || 'general_alert';\n}\n\n// ============================================\n// üîç FUN√á√ïES AUXILIARES\n// ============================================\n\nfunction getSenderType(tags, contactType, teamMember, groupInfo) {\n  if (teamMember) return 'team';\n  if (groupInfo && groupInfo.group_type === 'client') return 'client';\n  if (groupInfo && groupInfo.group_type === 'internal') return 'unknown_team';\n  \n  if (!tags) return contactType || 'unknown';\n  \n  const tagStr = Array.isArray(tags) \n    ? tags.join(',').toLowerCase() \n    : String(tags).toLowerCase();\n  \n  if (tagStr.includes('team') || tagStr.includes('time') || \n      tagStr.includes('sdr') || tagStr.includes('bdr')) {\n    return 'team';\n  }\n  \n  if (tagStr.includes('client') || tagStr.includes('cliente')) {\n    return 'client';\n  }\n  \n  if (tagStr.includes('prospect') || tagStr.includes('lead')) {\n    return 'prospect';\n  }\n  \n  return contactType || 'unknown';\n}\n\nfunction getBasicSentiment(message) {\n  if (!message) return 'neutral';\n  \n  const msg = String(message).toLowerCase();\n  \n  const urgentWords = [\n    'urgente', 'agora', 'r√°pido', 'j√°', 'imediato',\n    'help', 'ajuda', 'problema', 'erro', \n    'emergency', 'emerg√™ncia', 'cr√≠tico'\n  ];\n  \n  const negativeWords = [\n    'cancelar', 'insatisfeito', 'ruim', 'p√©ssimo',\n    'n√£o funciona', 'reclama√ß√£o', 'decepcionado',\n    'frustrado', 'chateado', 'cancel', 'bad',\n    'horr√≠vel', 'terr√≠vel', 'raiva'\n  ];\n  \n  const positiveWords = [\n    'obrigado', 'obrigada', 'perfeito', '√≥timo', 'excelente',\n    'adorei', 'amei', 'maravilhoso', 'thanks', 'great',\n    'incr√≠vel', 'top', 'show', 'legal'\n  ];\n  \n  if (urgentWords.some(w => msg.includes(w))) return 'urgent';\n  if (negativeWords.some(w => msg.includes(w))) return 'negative';\n  if (positiveWords.some(w => msg.includes(w))) return 'positive';\n  \n  return 'neutral';\n}\n\nfunction needsAttention(messageBody, tags, sentiment, senderType, teamAnalysis, groupInfo) {\n  if (teamAnalysis && teamAnalysis.alert_flags.length > 0) {\n    return true;\n  }\n  \n  if (groupInfo && groupInfo.group_type === 'client' && \n      sentiment !== 'positive') {\n    return true;\n  }\n  \n  if (sentiment === 'urgent' || sentiment === 'negative') {\n    return true;\n  }\n  \n  if (senderType === 'client' && sentiment === 'negative') {\n    return true;\n  }\n  \n  const msg = String(messageBody || '').toLowerCase();\n  const tagStr = Array.isArray(tags) \n    ? tags.join(',').toLowerCase() \n    : String(tags || '').toLowerCase();\n  \n  if (msg.includes('marcos') || msg.includes('@marcos')) {\n    return true;\n  }\n  \n  if (tagStr.includes('ia-call') || \n      tagStr.includes('secretaria') ||\n      tagStr.includes('waiting-human') ||\n      tagStr.includes('escalated') ||\n      tagStr.includes('urgent')) {\n    return true;\n  }\n  \n  const attentionKeywords = [\n    'como fa√ßo', 'preciso de ajuda', 'n√£o entendi',\n    'aprova√ß√£o', 'autoriza√ß√£o', 'processo',\n    'n√£o sei', 'd√∫vida', 'qual o procedimento'\n  ];\n  \n  if (attentionKeywords.some(k => msg.includes(k))) {\n    return true;\n  }\n  \n  return false;\n}\n\nfunction extractKeywords(message) {\n  if (!message) return [];\n  \n  const msg = String(message).toLowerCase();\n  const keywords = [];\n  \n  const keywordPatterns = {\n    pricing: ['pre√ßo', 'valor', 'custo', 'quanto custa', 'price', 'investimento'],\n    contract: ['contrato', 'assinatura', 'renova√ß√£o', 'contract', 'acordo'],\n    support: ['suporte', 'ajuda', 'problema', 'erro', 'support', 'bug'],\n    sales: ['comprar', 'adquirir', 'contratar', 'buy', 'fechar'],\n    cancel: ['cancelar', 'desistir', 'parar', 'cancel', 'encerrar'],\n    meeting: ['reuni√£o', 'meeting', 'call', 'ligar', 'agendar', 'zoom'],\n    ai_issue: ['erro ia', 'ia n√£o funciona', 'ia errou', 'bug ia', 'prompt'],\n    process: ['processo', 'como fa√ßo', 'qual o fluxo', 'procedimento'],\n    approval: ['aprova√ß√£o', 'autoriza√ß√£o', 'liberar', 'aprovar'],\n    traffic: ['an√∫ncio', 'ads', 'tr√°fego', 'cpa', 'convers√£o', 'campanha'],\n    urgent: ['urgente', 'agora', 'imediato', 'r√°pido', 'j√°'],\n    complaint: ['reclama√ß√£o', 'insatisfeito', 'problema', 'ruim']\n  };\n  \n  for (const [category, words] of Object.entries(keywordPatterns)) {\n    if (words.some(w => msg.includes(w))) {\n      keywords.push(category);\n    }\n  }\n  \n  return keywords;\n}\n\nfunction normalizeTags(tags) {\n  if (!tags) return [];\n  \n  if (Array.isArray(tags)) {\n    return tags.filter(t => t && t.trim());\n  }\n  \n  if (typeof tags === 'string') {\n    const cleanTags = tags.replace(/[{}]/g, '');\n    return cleanTags\n      .split(',')\n      .map(t => t.trim().replace(/^\"|\"$/g, ''))\n      .filter(t => t);\n  }\n  \n  return [];\n}\n\n// ============================================\n// üì• EXTRAIR DADOS DO WEBHOOK\n// ============================================\n\nconst rawMessageBody = \n  body.message?.body || \n  body.messageBody || \n  body.customData?.messagebody ||\n  body.customData?.message ||\n  body.message ||\n  '';\n\nconst contactId = body.contact_id || body.contactId || body.contact?.id || null;\nconst contactName = body.full_name || body.contact?.name || body.contactName || 'Unknown';\nconst contactPhone = body.phone || body.contact?.phone || null;\nconst contactType = body.contact_type || body.contact?.type || 'lead';\n\nconst rawTags = body.tags || body.contact?.tags || '';\nconst normalizedTags = normalizeTags(rawTags);\n\nconst locationName = body.location?.name || 'Mottivme Sales';\nconst workflowId = body.workflow?.id || null;\nconst workflowName = body.workflow?.name || null;\n\nconst attachmentUrl = body.customData?.attachments || \n                      body.attachments?.[0] || \n                      null;\n\nconst timestamp = new Date().toISOString();\n\n// ============================================\n// üîç PROCESSAR MENSAGEM DE GRUPO\n// ============================================\n\nconst groupInfo = detectGroupType(contactName);\nconst parsedMessage = parseGroupMessage(rawMessageBody);\nconst messageBody = parsedMessage.clean_message;\n\nconst isAudio = rawMessageBody.includes('√Åudio') || \n                rawMessageBody.includes('Audio') || \n                rawMessageBody.includes('üé§') ||\n                rawMessageBody.includes('√°udio');\n\nconst messageType = isAudio ? 'audio' : 'text';\n\nlet transcription = null;\nif (isAudio && rawMessageBody.includes('Transcri√ß√£o:')) {\n  const parts = rawMessageBody.split('Transcri√ß√£o:');\n  transcription = parts[1]?.trim() || null;\n}\n\n// ============================================\n// ü§ñ AN√ÅLISE INTELIGENTE\n// ============================================\n\nconst actualSenderPhone = parsedMessage.group_sender_phone || contactPhone;\nconst actualSenderName = parsedMessage.group_sender_name || contactName;\n\nconst teamMember = identifyTeamMember(actualSenderPhone, actualSenderName);\nconst teamAnalysis = teamMember \n  ? analyzeTeamBehavior(teamMember, messageBody, timestamp, groupInfo)\n  : null;\n\nconst senderType = getSenderType(normalizedTags, contactType, teamMember, groupInfo);\nconst sentiment = getBasicSentiment(messageBody);\nconst needsHumanAttention = needsAttention(\n  messageBody, \n  normalizedTags, \n  sentiment, \n  senderType, \n  teamAnalysis, \n  groupInfo\n);\nconst keywords = extractKeywords(messageBody);\n\nlet urgencyScore = 3;\n\nif (teamAnalysis) {\n  if (teamAnalysis.severity === 'critical') urgencyScore = 10;\n  else if (teamAnalysis.severity === 'high') urgencyScore = 8;\n  else if (teamAnalysis.severity === 'medium') urgencyScore = 6;\n}\n\nif (groupInfo.group_type === 'client') {\n  if (sentiment === 'negative') urgencyScore = Math.max(urgencyScore, 9);\n  else if (sentiment === 'urgent') urgencyScore = Math.max(urgencyScore, 8);\n}\n\nif (sentiment === 'urgent' && urgencyScore < 9) urgencyScore = 9;\nif (sentiment === 'negative' && urgencyScore < 7) urgencyScore = 7;\nif (sentiment === 'positive' && urgencyScore > 2) urgencyScore = 2;\n\nif (needsHumanAttention && urgencyScore < 6) urgencyScore = 6;\n\n// ============================================\n// üì¶ OBJETO FINAL\n// ============================================\n\nconst messageData = {\n  contact_id: contactId,\n  created_at: timestamp,\n  source: 'ghl',\n  sender_name: contactName,\n  sender_phone: contactPhone,\n  sender_tags: normalizedTags,\n  sender_type: senderType,\n  message_type: messageType,\n  message_body: messageBody,\n  message_transcription: transcription,\n  attachment_url: attachmentUrl,\n  workflow_id: workflowId,\n  workflow_name: workflowName,\n  location_name: locationName,\n  sentiment: sentiment,\n  category: teamAnalysis ? 'team_message' : (groupInfo.is_group ? 'group_message' : 'message'),\n  urgency_score: urgencyScore,\n  needs_attention: needsHumanAttention,\n  keywords: keywords,\n  processed_by_observer: false,\n  is_group_message: groupInfo.is_group,\n  group_type: groupInfo.group_type,\n  group_name: groupInfo.group_name,\n  group_sender_phone: parsedMessage.group_sender_phone,\n  group_sender_name: parsedMessage.group_sender_name,\n  team_analysis: teamAnalysis ? JSON.stringify(teamAnalysis) : null\n};\n\nreturn { json: messageData };"
            },
            "id": "cd179e65-a379-4292-ba0b-61e8a75f690d",
            "name": "Processar Dados",
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -1728,
                -704
            ],
            "executeOnce": true
        },
        {
            "parameters": {
                "schema": {
                    "__rl": true,
                    "value": "mottivme_intelligence_system",
                    "mode": "list",
                    "cachedResultName": "mottivme_intelligence_system"
                },
                "table": {
                    "__rl": true,
                    "value": "messages",
                    "mode": "list",
                    "cachedResultName": "messages"
                },
                "columns": {
                    "mappingMode": "autoMapInputData",
                    "value": {
                        "needs_attention": false,
                        "processed_by_observer": false
                    },
                    "matchingColumns": [
                        "id"
                    ],
                    "schema": [
                        {
                            "id": "id",
                            "displayName": "id",
                            "required": false,
                            "defaultMatch": true,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "external_id",
                            "displayName": "external_id",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "contact_id",
                            "displayName": "contact_id",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "created_at",
                            "displayName": "created_at",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "dateTime",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "source",
                            "displayName": "source",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "sender_name",
                            "displayName": "sender_name",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "sender_phone",
                            "displayName": "sender_phone",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "sender_tags",
                            "displayName": "sender_tags",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "array",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "sender_type",
                            "displayName": "sender_type",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "message_type",
                            "displayName": "message_type",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "message_body",
                            "displayName": "message_body",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "message_transcription",
                            "displayName": "message_transcription",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "attachment_url",
                            "displayName": "attachment_url",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "workflow_id",
                            "displayName": "workflow_id",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "workflow_name",
                            "displayName": "workflow_name",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "location_name",
                            "displayName": "location_name",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "sentiment",
                            "displayName": "sentiment",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "category",
                            "displayName": "category",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "urgency_score",
                            "displayName": "urgency_score",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "number",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "needs_attention",
                            "displayName": "needs_attention",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "boolean",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "keywords",
                            "displayName": "keywords",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "array",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "processed_by_observer",
                            "displayName": "processed_by_observer",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "boolean",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "embedding",
                            "displayName": "embedding",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "is_group_message",
                            "displayName": "is_group_message",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "boolean",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "group_type",
                            "displayName": "group_type",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "group_name",
                            "displayName": "group_name",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "group_sender_phone",
                            "displayName": "group_sender_phone",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "group_sender_name",
                            "displayName": "group_sender_name",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "team_analysis",
                            "displayName": "team_analysis",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "object",
                            "canBeUsedToMatch": true,
                            "removed": false
                        }
                    ],
                    "attemptToConvertTypes": false,
                    "convertFieldsToString": false
                },
                "options": {}
            },
            "id": "28ce164c-ba42-4830-91ac-4ee417df3a37",
            "name": "Salvar Supabase",
            "type": "n8n-nodes-base.postgres",
            "typeVersion": 2.6,
            "position": [
                -1504,
                -704
            ],
            "credentials": {
                "postgres": {
                    "id": "w2mBaRwhZ3tM4FUw",
                    "name": "Postgres Marcos Daniels"
                }
            }
        },
        {
            "parameters": {
                "content": "1- Inserir dados no Supa Base",
                "height": 416,
                "width": 2192
            },
            "type": "n8n-nodes-base.stickyNote",
            "position": [
                -2544,
                -848
            ],
            "typeVersion": 1,
            "id": "399ae9d8-7b06-441e-a0df-400c2615df20",
            "name": "Sticky Note"
        },
        {
            "parameters": {
                "httpMethod": "POST",
                "path": "sentinel-observe",
                "responseMode": "responseNode",
                "options": {}
            },
            "id": "19d41400-7174-460b-a44e-9da202841ed4",
            "name": "üéØ Webhook Master",
            "type": "n8n-nodes-base.webhook",
            "typeVersion": 1,
            "position": [
                -2544,
                1936
            ],
            "webhookId": "sentinel-master"
        },
        {
            "parameters": {
                "authentication": "airtableOAuth2Api",
                "operation": "create",
                "base": {
                    "__rl": true,
                    "value": "appVviJuaGbUTzxP6",
                    "mode": "list",
                    "cachedResultName": "HallenAi",
                    "cachedResultUrl": "https://airtable.com/appVviJuaGbUTzxP6"
                },
                "table": {
                    "__rl": true,
                    "value": "=",
                    "mode": "id"
                },
                "columns": {
                    "mappingMode": "defineBelow",
                    "value": {},
                    "matchingColumns": [],
                    "schema": [],
                    "attemptToConvertTypes": false,
                    "convertFieldsToString": false
                },
                "options": {}
            },
            "id": "14224bf2-e96d-42b3-8f48-40f0b114f2b8",
            "name": "üìù Log Raw Event",
            "type": "n8n-nodes-base.airtable",
            "typeVersion": 2,
            "position": [
                -2256,
                1936
            ],
            "credentials": {
                "airtableOAuth2Api": {
                    "id": "Ct29AFjU5kldAr8c",
                    "name": "vsl ben ai"
                }
            }
        },
        {
            "parameters": {
                "agent": "conversationalAgent",
                "promptType": "define",
                "text": "=# SENTINEL - PATTERN DETECTOR AGENT\n\nVoc√™ √© um agente especializado em identificar padr√µes em eventos organizacionais.\n\n## CONTEXTO DO EVENTO:\n{{ JSON.stringify($json, null, 2) }}\n\n## SUA MISS√ÉO:\n\n1. Analise o evento recebido\n2. Determine se √© um padr√£o conhecido ou novo\n3. Classifique o tipo de evento\n4. Avalie a necessidade de an√°lise profunda\n5. Extraia entidades-chave\n\n## DECIS√ÉO:\n\nBaseado na an√°lise, voc√™ deve decidir:\n- Este evento requer an√°lise profunda por agentes especializados?\n- Qual a prioridade (critical, high, medium, low)?\n- Que tipo de an√°lise √© necess√°ria (process, decision, bottleneck, knowledge)?\n\n## OUTPUT:\n\nResponda em JSON estruturado:\n```json\n{\n  \"requires_deep_analysis\": true/false,\n  \"analysis_types_needed\": [\"process\", \"decision\", \"bottleneck\", \"knowledge\"],\n  \"priority\": \"critical|high|medium|low\",\n  \"pattern_type\": \"string\",\n  \"key_entities\": [],\n  \"reasoning\": \"Por que voc√™ tomou essa decis√£o\"\n}\n```",
                "hasOutputParser": true,
                "options": {
                    "systemMessage": "Voc√™ √© o Pattern Detector Agent do Sentinel. Sua fun√ß√£o √© triagem inteligente de eventos para decidir quais precisam de an√°lise profunda."
                }
            },
            "id": "26dc2088-efa5-45c8-b066-27eec658a533",
            "name": "üîç Agent: Pattern Detector",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.7,
            "position": [
                -1968,
                1936
            ]
        },
        {
            "parameters": {
                "assignments": {
                    "assignments": [
                        {
                            "id": "parse-json",
                            "name": "analysis",
                            "type": "object",
                            "value": "={{ JSON.parse($json.output) }}"
                        },
                        {
                            "id": "original-event",
                            "name": "original_event",
                            "type": "object",
                            "value": "={{ $('üìù Log Raw Event').item.json }}"
                        }
                    ]
                },
                "options": {}
            },
            "id": "2c92d797-684c-44d0-903f-795fc75fda21",
            "name": "üîß Parse Agent Output",
            "type": "n8n-nodes-base.set",
            "typeVersion": 3.4,
            "position": [
                -1616,
                1936
            ]
        },
        {
            "parameters": {
                "conditions": {
                    "boolean": [
                        {
                            "value1": "={{ $json.analysis.requires_deep_analysis }}",
                            "value2": true
                        }
                    ]
                },
                "options": {}
            },
            "id": "b01a314f-172d-4788-8d93-fe4a0f4929d1",
            "name": "‚ö° Needs Deep Analysis?",
            "type": "n8n-nodes-base.if",
            "typeVersion": 2,
            "position": [
                -1392,
                1552
            ]
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "=# PROCESS MINER AGENT\n\nVoc√™ √© especialista em mapear processos organizacionais.\n\n## EVENTO DETECTADO:\n{{ JSON.stringify($json.original_event, null, 2) }}\n\n## AN√ÅLISE PRELIMINAR:\n{{ JSON.stringify($json.analysis, null, 2) }}\n\n## FERRAMENTAS DISPON√çVEIS:\n\nVoc√™ tem acesso a ferramentas para:\n- Buscar processos similares j√° mapeados (Notion)\n- Consultar dados hist√≥ricos (PostgreSQL)\n- Buscar contexto adicional (Perplexity)\n\n## SUA MISS√ÉO:\n\n1. **MAPEAR O PROCESSO:**\n   - Identifique trigger, atores, etapas, decis√µes, output\n   - Estime tempo e frequ√™ncia\n   - Identifique depend√™ncias\n\n2. **USAR FERRAMENTAS quando necess√°rio:**\n   - Se processo parece conhecido ‚Üí busque no Notion\n   - Se precisa validar tempo estimado ‚Üí consulte hist√≥rico\n   - Se precisa benchmark ‚Üí use Perplexity\n\n3. **AVALIAR MATURIDADE:**\n   - Processo est√° documentado?\n   - √â executado consistentemente?\n   - Est√° otimizado?\n\n## OUTPUT:\n\nRetorne JSON estruturado com o processo mapeado completo.",
                "options": {
                    "systemMessage": "Voc√™ √© o Process Miner Agent. Use ferramentas ativamente para enriquecer sua an√°lise. Seja meticuloso e completo."
                }
            },
            "id": "d486a11b-435a-4a0f-b40c-7788ce6d5188",
            "name": "‚öôÔ∏è Agent: Process Miner",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.7,
            "position": [
                -1168,
                960
            ]
        },
        {
            "parameters": {
                "operation": "archive",
                "pageId": {
                    "__rl": true,
                    "value": "=",
                    "mode": "url"
                }
            },
            "id": "e48642fc-aed8-416b-bd70-8143a32d520d",
            "name": "üîé Tool: Search Notion Processes",
            "type": "n8n-nodes-base.notion",
            "typeVersion": 2,
            "position": [
                -1104,
                1744
            ],
            "credentials": {
                "notionApi": {
                    "id": "nHLYhQbJQ70lKvlS",
                    "name": "Notion account"
                }
            }
        },
        {
            "parameters": {
                "operation": "executeQuery",
                "query": "={{ $json.sql_query }}",
                "options": {}
            },
            "id": "61a69417-ff31-44a4-aed1-147cb508f558",
            "name": "üóÑÔ∏è Tool: Query Analytics DB",
            "type": "n8n-nodes-base.postgres",
            "typeVersion": 2.4,
            "position": [
                -1104,
                2128
            ],
            "credentials": {
                "postgres": {
                    "id": "w2mBaRwhZ3tM4FUw",
                    "name": "Postgres Marcos Daniels"
                }
            }
        },
        {
            "parameters": {
                "messages": {
                    "message": [
                        {}
                    ]
                },
                "options": {},
                "requestOptions": {}
            },
            "id": "5354e264-cf27-497f-84e2-35ab4a964343",
            "name": "üåê Tool: Perplexity Research",
            "type": "n8n-nodes-base.perplexity",
            "typeVersion": 1,
            "position": [
                -1104,
                2320
            ],
            "credentials": {
                "perplexityApi": {
                    "id": "7ULHue5u3LbWmTwk",
                    "name": "Perplexity account"
                }
            }
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "=# DECISION INTELLIGENCE AGENT\n\nVoc√™ √© especialista em mapear padr√µes de decis√£o.\n\n## CONTEXTO:\n{{ JSON.stringify($json, null, 2) }}\n\n## FERRAMENTAS DISPON√çVEIS:\n- Buscar decis√µes similares (Notion)\n- Analisar hist√≥rico de decis√µes (PostgreSQL)\n- Pesquisar frameworks de decis√£o (Perplexity)\n\n## SUA MISS√ÉO:\n\n1. **IDENTIFICAR TIPO DE DECIS√ÉO:**\n   - Operacional, t√°tica ou estrat√©gica?\n   - Quem decide?\n   - Precisa de aprova√ß√£o?\n\n2. **EXTRAIR CRIT√âRIOS:**\n   - Quais dados s√£o consultados?\n   - Quais fatores pesam mais?\n   - Red flags e green lights\n   - Use ferramentas para encontrar padr√µes hist√≥ricos\n\n3. **AVALIAR CONSIST√äNCIA:**\n   - Decis√£o segue padr√£o?\n   - H√° exce√ß√µes documentadas?\n   - Pode ser automatizada?\n\n## OUTPUT:\n\nJSON com mapeamento completo da decis√£o.",
                "options": {
                    "systemMessage": "Voc√™ √© o Decision Intelligence Agent. Seja anal√≠tico e use dados hist√≥ricos para validar padr√µes."
                }
            },
            "id": "d2295cf2-c8b3-4935-ac3b-efedb0e37699",
            "name": "üß† Agent: Decision Intelligence",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.7,
            "position": [
                -1168,
                1360
            ]
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "=# BOTTLENECK ANALYZER AGENT\n\nVoc√™ √© especialista em identificar gargalos operacionais.\n\n## DADOS DO PROCESSO:\n{{ JSON.stringify($json, null, 2) }}\n\n## FERRAMENTAS:\n- Buscar gargalos conhecidos (Notion)\n- Calcular impacto financeiro (PostgreSQL hist√≥rico)\n- Pesquisar solu√ß√µes (Perplexity)\n\n## SUA MISS√ÉO:\n\n1. **IDENTIFICAR GARGALOS:**\n   - Onde o fluxo trava?\n   - Etapas que demoram mais\n   - Depend√™ncias cr√≠ticas\n   - Use dados hist√≥ricos para confirmar\n\n2. **QUANTIFICAR IMPACTO:**\n   - Frequ√™ncia do gargalo\n   - Tempo perdido\n   - Custo mensal (R$)\n   - Consulte hist√≥rico para precis√£o\n\n3. **CAUSA RAIZ:**\n   - Por que existe?\n   - √â estrutural ou tempor√°rio?\n\n4. **SOLU√á√ïES:**\n   - Quick wins\n   - M√©dio prazo\n   - Longo prazo\n   - Pesquise best practices externas\n\n## OUTPUT:\n\nJSON com gargalos identificados e priorizados.",
                "options": {
                    "systemMessage": "Voc√™ √© o Bottleneck Analyzer Agent. Seja data-driven e quantifique tudo."
                }
            },
            "id": "312ed8b9-36df-406f-b286-1868ded1825b",
            "name": "üö® Agent: Bottleneck Analyzer",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.7,
            "position": [
                -1168,
                1552
            ]
        },
        {
            "parameters": {
                "agent": "conversationalAgent",
                "promptType": "define",
                "text": "=# KNOWLEDGE EXTRACTOR AGENT\n\nVoc√™ √© especialista em capturar conhecimento t√°cito.\n\n## CONTEXTO:\n{{ JSON.stringify($json, null, 2) }}\n\n## SUA MISS√ÉO:\n\n1. **IDENTIFICAR CONHECIMENTO IMPL√çCITO:**\n   - Atalhos mentais usados\n   - \"Jeito certo\" n√£o documentado\n   - Intui√ß√µes que guiam decis√µes\n   - Expertise que s√≥ X pessoa tem\n\n2. **AVALIAR CRITICIDADE:**\n   - √â essencial?\n   - O que acontece se perder?\n   - Quantas pessoas sabem?\n\n3. **PROPOR CAPTURA:**\n   - Como documentar?\n   - Formato ideal (checklist, playbook, v√≠deo)?\n   - Esfor√ßo necess√°rio?\n\n## OUTPUT:\n\nJSON com itens de conhecimento t√°cito identificados.",
                "options": {
                    "systemMessage": "Voc√™ √© o Knowledge Extractor Agent. Identifique o invis√≠vel - o conhecimento que est√° apenas na cabe√ßa das pessoas."
                }
            },
            "id": "6ed5cff8-6a01-4276-9e8b-0a64748eee83",
            "name": "üí° Agent: Knowledge Extractor",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.7,
            "position": [
                -1168,
                1936
            ]
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "=# AUTOMATION SUGGESTER AGENT\n\nVoc√™ √© especialista em identificar oportunidades de automa√ß√£o.\n\n## DADOS CONSOLIDADOS:\n{{ JSON.stringify($json, null, 2) }}\n\n## FERRAMENTAS:\n- Buscar automa√ß√µes similares implementadas (Notion)\n- Calcular ROI baseado em dados reais (PostgreSQL)\n- Pesquisar tecnologias de automa√ß√£o (Perplexity)\n\n## SUA MISS√ÉO:\n\n1. **IDENTIFICAR OPORTUNIDADES:**\n   - O que pode ser automatizado?\n   - Por que est√° manual?\n   - Pr√©-requisitos\n\n2. **ANALISAR VIABILIDADE:**\n   - Complexidade t√©cnica\n   - Ferramentas necess√°rias\n   - Esfor√ßo de implementa√ß√£o\n   - Busque automa√ß√µes similares j√° feitas\n\n3. **CALCULAR ROI:**\n   - Tempo economizado/m√™s\n   - Custo atual vs futuro\n   - Payback period\n   - Use dados hist√≥ricos para precis√£o\n\n4. **PROPOR SOLU√á√ÉO:**\n   - Tecnologia (Make, n8n, custom)\n   - Arquitetura\n   - Etapas de implementa√ß√£o\n   - Pesquise alternativas\n\n## OUTPUT:\n\nJSON com oportunidades ranqueadas por ROI.",
                "options": {
                    "systemMessage": "Voc√™ √© o Automation Suggester Agent. Seja pragm√°tico e focado em ROI. Use ferramentas para validar viabilidade."
                }
            },
            "id": "776f307d-1af5-443b-a98f-c6f139fa0ed2",
            "name": "ü§ñ Agent: Automation Suggester",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.7,
            "position": [
                -816,
                1360
            ]
        },
        {
            "parameters": {
                "jsCode": "// Merge all agent outputs\nconst items = $input.all();\n\nconst consolidated = {\n  timestamp: new Date().toISO(),\n  original_event: items[0].json.original_event,\n  pattern_analysis: items[0].json.analysis,\n  deep_analyses: {\n    process: items.find(i => i.json.agent === 'process_miner')?.json.output || null,\n    decision: items.find(i => i.json.agent === 'decision_intelligence')?.json.output || null,\n    bottlenecks: items.find(i => i.json.agent === 'bottleneck_analyzer')?.json.output || null,\n    knowledge: items.find(i => i.json.agent === 'knowledge_extractor')?.json.output || null,\n    automation: items.find(i => i.json.agent === 'automation_suggester')?.json.output || null\n  },\n  insights: [],\n  actions: []\n};\n\n// Generate insights\nif (consolidated.deep_analyses.bottlenecks) {\n  const critical = consolidated.deep_analyses.bottlenecks.bottlenecks?.filter(b => b.severity === 'critical') || [];\n  if (critical.length > 0) {\n    consolidated.insights.push({\n      type: 'alert',\n      priority: 'critical',\n      message: `${critical.length} gargalo(s) cr√≠tico(s) detectado(s)`,\n      data: critical\n    });\n    consolidated.actions.push({\n      action: 'urgent_review',\n      target: 'bottlenecks',\n      priority: 'critical'\n    });\n  }\n}\n\nif (consolidated.deep_analyses.automation) {\n  const quickWins = consolidated.deep_analyses.automation.quick_wins || [];\n  if (quickWins.length > 0) {\n    consolidated.insights.push({\n      type: 'opportunity',\n      priority: 'high',\n      message: `${quickWins.length} quick win(s) de automa√ß√£o dispon√≠vel(is)`,\n      data: quickWins\n    });\n  }\n}\n\nreturn [{ json: consolidated }];"
            },
            "id": "95f002dd-7cb3-4cb4-b3e3-27b5628a5a7c",
            "name": "üîó Master Consolidator",
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -464,
                1360
            ]
        },
        {
            "parameters": {
                "agent": "conversationalAgent",
                "promptType": "define",
                "text": "=# ORCHESTRATOR AGENT\n\nVoc√™ √© o agente orquestrador do Sentinel.\n\n## DADOS CONSOLIDADOS:\n{{ JSON.stringify($json, null, 2) }}\n\n## SUA MISS√ÉO:\n\n1. **DECIDIR PR√ìXIMAS A√á√ïES:**\n   - Quais dados salvar no Notion?\n   - Quais alertas enviar?\n   - Quais automa√ß√µes implementar agora?\n   - Quais an√°lises fazer depois?\n\n2. **PRIORIZAR:**\n   - O que √© urgente?\n   - O que pode esperar?\n   - O que delegar?\n\n3. **GERAR COMANDOS:**\n   - Retorne lista de a√ß√µes estruturadas\n   - Cada a√ß√£o deve ter: tipo, alvo, dados, prioridade\n\n## OUTPUT:\n\n```json\n{\n  \"immediate_actions\": [\n    {\"type\": \"save_notion\", \"database\": \"processes\", \"data\": {...}},\n    {\"type\": \"alert_slack\", \"channel\": \"#sentinel-alerts\", \"message\": \"...\"},\n    {\"type\": \"create_automation\", \"opportunity_id\": \"...\"}\n  ],\n  \"deferred_actions\": [...],\n  \"reasoning\": \"Por que voc√™ decidiu isso\"\n}\n```",
                "options": {
                    "systemMessage": "Voc√™ √© o Orchestrator Agent. Voc√™ toma decis√µes de alto n√≠vel sobre o que fazer com as an√°lises."
                }
            },
            "id": "ea645002-c3c5-4e8b-a575-3c13610eee21",
            "name": "üéØ Agent: Orchestrator",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.7,
            "position": [
                -240,
                1360
            ]
        },
        {
            "parameters": {
                "rules": {
                    "values": [
                        {
                            "conditions": {
                                "options": {
                                    "caseSensitive": true,
                                    "leftValue": "",
                                    "typeValidation": "strict"
                                },
                                "conditions": [
                                    {
                                        "leftValue": "",
                                        "rightValue": "",
                                        "operator": {
                                            "type": "string",
                                            "operation": "equals"
                                        }
                                    }
                                ],
                                "combinator": "and"
                            }
                        }
                    ]
                },
                "options": {}
            },
            "id": "655ee3b0-754c-41aa-a1c9-589e45c5817c",
            "name": "üîÄ Switch: Action Type",
            "type": "n8n-nodes-base.switch",
            "typeVersion": 3,
            "position": [
                112,
                1360
            ]
        },
        {
            "parameters": {
                "resource": "database",
                "operation": "append"
            },
            "id": "b357d0f4-b83d-4f7a-b308-80abd671a602",
            "name": "üìö Save to Notion",
            "type": "n8n-nodes-base.notion",
            "typeVersion": 2,
            "position": [
                336,
                1360
            ]
        },
        {
            "parameters": {
                "operation": "executeQuery",
                "query": "={{ $json.action.sql }}",
                "options": {}
            },
            "id": "51f1c7a8-9749-4922-8a8f-b4dd80f4e032",
            "name": "üóÑÔ∏è Save to PostgreSQL",
            "type": "n8n-nodes-base.postgres",
            "typeVersion": 2.4,
            "position": [
                -752,
                1936
            ],
            "credentials": {
                "postgres": {
                    "id": "w2mBaRwhZ3tM4FUw",
                    "name": "Postgres Marcos Daniels"
                }
            }
        },
        {
            "parameters": {
                "respondWith": "json",
                "responseBody": "={{ JSON.stringify({status: 'success', insights: $json.insights.length, actions: $json.actions.length}) }}",
                "options": {}
            },
            "id": "745dd085-5f20-4833-8dda-e7e40ecf1a30",
            "name": "‚úÖ Webhook Response",
            "type": "n8n-nodes-base.respondToWebhook",
            "typeVersion": 1,
            "position": [
                -1392,
                2224
            ]
        },
        {
            "parameters": {
                "rule": {
                    "interval": [
                        {
                            "field": "cronExpression",
                            "expression": "0 9 * * *"
                        }
                    ]
                }
            },
            "id": "8538954a-4219-49f0-a5a5-32d58e363fdc",
            "name": "‚è∞ Daily Report Trigger",
            "type": "n8n-nodes-base.scheduleTrigger",
            "typeVersion": 1,
            "position": [
                -2544,
                2128
            ],
            "disabled": true
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "=# REPORT GENERATOR AGENT\n\nVoc√™ √© especialista em criar relat√≥rios executivos.\n\n## FERRAMENTAS:\n- Query analytics database (PostgreSQL)\n- Fetch recent analyses (Notion)\n- Compare with historical trends\n\n## SUA MISS√ÉO:\n\nGerar relat√≥rio di√°rio consolidado:\n\n1. **BUSCAR DADOS:**\n   - √öltimas 24h de an√°lises\n   - M√©tricas comparadas com semana passada\n   - Insights mais importantes\n\n2. **ESTRUTURAR RELAT√ìRIO:**\n   - Executive summary (2-3 par√°grafos)\n   - M√©tricas-chave\n   - Principais observa√ß√µes\n   - Alertas cr√≠ticos\n   - Top 3 recomenda√ß√µes\n\n3. **FORMATO:**\n   - Markdown rico\n   - Conciso mas completo\n   - Acion√°vel\n\n## OUTPUT:\n\nMarkdown formatado pronto para publicar no Notion.",
                "options": {
                    "systemMessage": "Voc√™ √© o Report Generator Agent. Use ferramentas para buscar dados reais. Seja objetivo e executivo."
                }
            },
            "id": "812e727b-769f-4c28-b638-637df785356a",
            "name": "üìÑ Agent: Report Generator",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.7,
            "position": [
                -2320,
                2128
            ]
        },
        {
            "parameters": {
                "pageId": {
                    "__rl": true,
                    "value": "=",
                    "mode": "id"
                },
                "title": "Daily Report - {{ $now.format('DD/MM/YYYY') }}",
                "blockUi": {
                    "blockValues": [
                        {}
                    ]
                },
                "options": {}
            },
            "id": "dcd1a896-add7-4cb3-b432-e0782e312f78",
            "name": "üìù Publish Report",
            "type": "n8n-nodes-base.notion",
            "typeVersion": 2,
            "position": [
                -1904,
                2128
            ],
            "credentials": {
                "notionApi": {
                    "id": "nHLYhQbJQ70lKvlS",
                    "name": "Notion account"
                }
            }
        },
        {
            "parameters": {
                "model": "meta-llama/llama-4-maverick-17b-128e-instruct",
                "options": {}
            },
            "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
            "typeVersion": 1,
            "position": [
                -1104,
                1184
            ],
            "id": "ad424d02-4db0-486d-9272-1e9e73bdc69c",
            "name": "Groq Chat Model1",
            "credentials": {
                "groqApi": {
                    "id": "WVbQ0d3w6cnLwPtX",
                    "name": "Groq account"
                }
            }
        },
        {
            "parameters": {
                "operation": "executeQuery",
                "query": "UPDATE mottivme_intelligence_system.messages\nSET processed_by_observer = TRUE\nWHERE processed_by_observer = FALSE\n  AND created_at >= NOW() - INTERVAL '30 minutes';",
                "options": {}
            },
            "id": "dbc804bf-9ba9-4120-a199-a06f07a2cbb2",
            "name": "Marcar Mensagens como Processadas",
            "type": "n8n-nodes-base.postgres",
            "typeVersion": 2.6,
            "position": [
                720,
                -128
            ],
            "credentials": {
                "postgres": {
                    "id": "w2mBaRwhZ3tM4FUw",
                    "name": "Postgres Marcos Daniels"
                }
            }
        },
        {
            "parameters": {
                "operation": "executeQuery",
                "query": "SELECT \n    contact_id,\n    api_key,\n    name\nFROM mottivme_intelligence_system.alert_recipients\nWHERE is_active = TRUE\n  AND (\n    '{{ $json.alert_type }}' = ANY(alert_types)\n    OR alert_types IS NULL\n  )\n  AND CASE \n    WHEN min_severity = 'low' THEN TRUE\n    WHEN min_severity = 'medium' THEN '{{ $json.severity }}' IN ('medium', 'high', 'critical')\n    WHEN min_severity = 'high' THEN '{{ $json.severity }}' IN ('high', 'critical')\n    WHEN min_severity = 'critical' THEN '{{ $json.severity }}' = 'critical'\n    ELSE TRUE\n  END\nLIMIT 1;",
                "options": {}
            },
            "id": "fae28b9c-4e5d-4bb9-9724-302e8f3b110f",
            "name": "Buscar Destinat√°rio",
            "type": "n8n-nodes-base.postgres",
            "typeVersion": 2.6,
            "position": [
                -1072,
                -64
            ],
            "credentials": {
                "postgres": {
                    "id": "w2mBaRwhZ3tM4FUw",
                    "name": "Postgres Marcos Daniels"
                }
            }
        },
        {
            "parameters": {
                "jsCode": "// Pegar alerta do Parse Resposta\nconst alert = $('Parse Resposta1').item.json;\n\n// Pegar destinat√°rio (pode n√£o existir se n√£o houver match)\nconst recipientItems = $input.all();\n\nif (recipientItems.length === 0) {\n  // Sem destinat√°rio encontrado - usar padr√£o\n  return {\n    json: {\n      ...alert,\n      contact_id: null,\n      api_key: null,\n      recipient_name: 'No recipient found',\n      skip_notification: true\n    }\n  };\n}\n\n// Pegar primeiro destinat√°rio\nconst recipient = recipientItems[0].json;\n\n// Merge alerta + destinat√°rio\nreturn {\n  json: {\n    ...alert,\n    contact_id: recipient.contact_id,\n    api_key: recipient.api_key,\n    recipient_name: recipient.name,\n    skip_notification: false\n  }\n};"
            },
            "id": "5affdf70-9366-4eef-ad25-e8c7f332db3f",
            "name": "Merge Destinat√°rio",
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -848,
                -64
            ]
        },
        {
            "parameters": {
                "amount": 3
            },
            "id": "2c7077ab-ce9c-47b2-ab1f-abc61fb13a10",
            "name": "‚è∏Ô∏è Pause - Garantir Commit",
            "type": "n8n-nodes-base.wait",
            "typeVersion": 1.1,
            "position": [
                -176,
                16
            ],
            "webhookId": "22873ce6-73ae-4ca5-8a03-f05416120296"
        },
        {
            "parameters": {
                "conditions": {
                    "conditions": [
                        {
                            "leftValue": "={{ $json.skip_notification }}",
                            "rightValue": true,
                            "operator": {
                                "type": "boolean",
                                "operation": "notEquals"
                            }
                        },
                        {
                            "leftValue": "={{ $json.contact_id }}",
                            "rightValue": "",
                            "operator": {
                                "type": "string",
                                "operation": "notEmpty"
                            }
                        }
                    ]
                },
                "options": {}
            },
            "id": "0ca23629-2c96-4008-9513-f6f2d830fd1e",
            "name": "Deve Notificar?",
            "type": "n8n-nodes-base.if",
            "typeVersion": 2.1,
            "position": [
                48,
                16
            ]
        },
        {
            "parameters": {
                "assignments": {
                    "assignments": [
                        {
                            "name": "emoji",
                            "value": "={{ $json.severity === 'critical' ? 'üö®üö®üö®' : $json.severity === 'high' ? 'üö®' : '‚ö†Ô∏è' }}",
                            "type": "string"
                        },
                        {
                            "name": "message",
                            "value": "={{ $json.emoji }} *ALERTA MIS - {{ $json.severity.toUpperCase() }}*\n\n*{{ $json.title }}*\n\nüìã *Descri√ß√£o:*\n{{ $json.description }}\n\nüë• *Time Afetado:*\n{{ Array.isArray($json.affected_team_members) ? $json.affected_team_members.join(', ') : $json.affected_team_members }}\n\nüí° *A√ß√£o Recomendada:*\n{{ $json.suggested_action }}\n\nüìä *Mensagens Relacionadas:*\n{{ Array.isArray($json.related_messages) ? $json.related_messages.length + ' mensagens' : 'N/A' }}\n\n‚è∞ *Detectado em:*\n{{ new Date($json.created_at).toLocaleString('pt-BR', { timeZone: 'America/Sao_Paulo', dateStyle: 'short', timeStyle: 'short' }) }}\n\nüîç *Tipo:* {{ $json.alert_type.replace('_', ' ').toUpperCase() }}\n\n---\nüîó ID: `{{ $json.id }}`",
                            "type": "string"
                        },
                        {
                            "name": "alert_id",
                            "value": "={{ $json.id }}",
                            "type": "string"
                        },
                        {
                            "name": "contact_id",
                            "value": "={{ $json.contact_id }}",
                            "type": "string"
                        },
                        {
                            "name": "api_key_v2",
                            "value": "={{ $json.api_key }}",
                            "type": "string"
                        }
                    ]
                },
                "options": {}
            },
            "id": "34218896-9efb-43ff-84ed-bee356621713",
            "name": "Formatar Mensagem WhatsApp",
            "type": "n8n-nodes-base.set",
            "typeVersion": 3.4,
            "position": [
                272,
                80
            ]
        },
        {
            "parameters": {
                "operation": "executeQuery",
                "query": "UPDATE mottivme_intelligence_system.alerts SET sent_to_whatsapp = TRUE, sent_at = NOW(), status = 'sent', updated_at = NOW() WHERE id = '{{$json[\"alert_id\"]}}';",
                "options": {}
            },
            "id": "ffb0f9e5-0fc7-471a-b5b5-8b41fdcd85a4",
            "name": "‚úÖ Marcar Alerta como Enviado",
            "type": "n8n-nodes-base.postgres",
            "typeVersion": 2.6,
            "position": [
                496,
                80
            ],
            "credentials": {
                "postgres": {
                    "id": "w2mBaRwhZ3tM4FUw",
                    "name": "Postgres Marcos Daniels"
                }
            }
        },
        {
            "parameters": {
                "model": "llama-3.3-70b-versatile",
                "options": {}
            },
            "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
            "typeVersion": 1,
            "position": [
                -1584,
                160
            ],
            "id": "53d77461-220e-4d80-af63-1c1c672ee788",
            "name": "Groq Chat Model2",
            "credentials": {
                "groqApi": {
                    "id": "WVbQ0d3w6cnLwPtX",
                    "name": "Groq account"
                }
            }
        },
        {
            "parameters": {
                "rule": {
                    "interval": [
                        {
                            "field": "cronExpression",
                            "expression": "0 8-18/2 * * *"
                        }
                    ]
                }
            },
            "id": "389eec46-7e2a-4e0b-8a5c-718dd0d5d120",
            "name": "Run Every 30min1",
            "type": "n8n-nodes-base.scheduleTrigger",
            "typeVersion": 1.2,
            "position": [
                -2544,
                -192
            ]
        },
        {
            "parameters": {
                "operation": "executeQuery",
                "query": "SELECT \n    id,\n    created_at,\n    sender_name,\n    sender_phone,\n    sender_type,\n    message_body,\n    sentiment,\n    urgency_score,\n    needs_attention,\n    keywords,\n    is_group_message,\n    group_type,\n    group_name,\n    group_sender_phone,\n    group_sender_name,\n    team_analysis,\n    workflow_name,\n    location_name\nFROM mottivme_intelligence_system.messages\nWHERE processed_by_observer = FALSE\nORDER BY created_at DESC\nLIMIT 10;",
                "options": {}
            },
            "id": "176e5151-dd3f-4191-bffb-df78669a46eb",
            "name": "Buscar Mensagens N√£o Processadas1",
            "type": "n8n-nodes-base.postgres",
            "typeVersion": 2.6,
            "position": [
                -2320,
                -192
            ],
            "credentials": {
                "postgres": {
                    "id": "w2mBaRwhZ3tM4FUw",
                    "name": "Postgres Marcos Daniels"
                }
            }
        },
        {
            "parameters": {
                "conditions": {
                    "options": {
                        "caseSensitive": true,
                        "leftValue": "",
                        "typeValidation": "strict",
                        "version": 1
                    },
                    "conditions": [
                        {
                            "id": "has-messages",
                            "leftValue": "={{ $input.all().length }}",
                            "rightValue": 0,
                            "operator": {
                                "type": "number",
                                "operation": "gt"
                            }
                        }
                    ],
                    "combinator": "and"
                },
                "options": {}
            },
            "id": "6efb1f42-2a7c-4300-92ae-83a7153fd8ad",
            "name": "Tem Mensagens?1",
            "type": "n8n-nodes-base.if",
            "typeVersion": 2.1,
            "position": [
                -2096,
                -192
            ]
        },
        {
            "parameters": {
                "jsCode": "// Pegar todas as mensagens\nconst messages = $input.all();\n\n// Preparar resumo estruturado para o Claude/Groq\nconst summary = {\n  total_messages: messages.length,\n  time_range: {\n    start: messages[messages.length - 1]?.json.created_at,\n    end: messages[0]?.json.created_at\n  },\n  by_type: {},\n  by_sentiment: {},\n  by_urgency: {},\n  team_activity: {},\n  group_activity: {},\n  high_priority: []\n};\n\n// Processar mensagens\nmessages.forEach(item => {\n  const msg = item.json;\n  \n  // Contar por tipo\n  summary.by_type[msg.sender_type] = (summary.by_type[msg.sender_type] || 0) + 1;\n  \n  // Contar por sentimento\n  summary.by_sentiment[msg.sentiment] = (summary.by_sentiment[msg.sentiment] || 0) + 1;\n  \n  // Contar por urg√™ncia\n  const urgencyLevel = msg.urgency_score >= 7 ? 'high' : msg.urgency_score >= 4 ? 'medium' : 'low';\n  summary.by_urgency[urgencyLevel] = (summary.by_urgency[urgencyLevel] || 0) + 1;\n  \n  // Atividade do time\n  if (msg.sender_type === 'team' && msg.team_analysis) {\n    const analysis = typeof msg.team_analysis === 'string' \n      ? JSON.parse(msg.team_analysis) \n      : msg.team_analysis;\n    \n    const memberName = analysis.team_member_name || 'Unknown';\n    \n    if (!summary.team_activity[memberName]) {\n      summary.team_activity[memberName] = {\n        count: 0,\n        alerts: [],\n        off_hours_count: 0\n      };\n    }\n    \n    summary.team_activity[memberName].count++;\n    \n    if (analysis.alert_flags && analysis.alert_flags.length > 0) {\n      summary.team_activity[memberName].alerts.push(...analysis.alert_flags);\n      \n      if (analysis.alert_flags.some(a => a.type === 'off_hours')) {\n        summary.team_activity[memberName].off_hours_count++;\n      }\n    }\n  }\n  \n  // Atividade em grupos\n  if (msg.is_group_message) {\n    const groupKey = msg.group_type || 'unknown';\n    summary.group_activity[groupKey] = (summary.group_activity[groupKey] || 0) + 1;\n  }\n  \n  // Mensagens de alta prioridade\n  if (msg.needs_attention || msg.urgency_score >= 7) {\n    summary.high_priority.push({\n      id: msg.id,\n      sender: msg.sender_name,\n      group_sender: msg.group_sender_name,\n      message: msg.message_body,\n      urgency: msg.urgency_score,\n      sentiment: msg.sentiment,\n      team_analysis: msg.team_analysis\n    });\n  }\n});\n\n// Preparar prompt para Groq\nconst prompt = `Analise os seguintes dados de mensagens dos √∫ltimos 30 minutos da Mottivme:\n\n## üìä RESUMO GERAL\n- Total de mensagens: ${summary.total_messages}\n- Per√≠odo: ${summary.time_range.start} at√© ${summary.time_range.end}\n\n## üë• POR TIPO DE SENDER\n${JSON.stringify(summary.by_type, null, 2)}\n\n## üòä POR SENTIMENTO\n${JSON.stringify(summary.by_sentiment, null, 2)}\n\n## üéØ POR URG√äNCIA\n${JSON.stringify(summary.by_urgency, null, 2)}\n\n## üëî ATIVIDADE DO TIME\n${JSON.stringify(summary.team_activity, null, 2)}\n\n## üí¨ ATIVIDADE EM GRUPOS\n${JSON.stringify(summary.group_activity, null, 2)}\n\n## üö® MENSAGENS DE ALTA PRIORIDADE\n${JSON.stringify(summary.high_priority, null, 2)}\n\n---\n\n## üéØ SUA TAREFA:\n\nAnalise esses dados e identifique **ALERTAS CR√çTICOS** que o Marcos (CEO) precisa saber AGORA.\n\n**TIPOS DE ALERTAS IMPORTANTES:**\n\n1. **LEAD ESFRIANDO** üî•‚Üí‚ùÑÔ∏è\n   - Lead respondeu mas sem follow-up em 4h+\n   - Deal travado sem atividade\n\n2. **TIME SOBRECARREGADO** üöß\n   - Membro trabalhando fora do hor√°rio (>3x no mesmo per√≠odo)\n   - Marcos respondendo muito (>10 msgs)\n   - Allesson perguntando processo (falta doc)\n\n3. **CLIENTE EM RISCO** üò°\n   - Sentimento negativo em grupo de cliente\n   - Cliente VIP sem resposta\n   - Reclama√ß√£o n√£o atendida\n\n4. **PROBLEMA T√âCNICO** ü§ñ\n   - Isabella reportando erro de IA (>2x)\n   - Arthur reportando problema de tr√°fego\n\n**REGRAS CR√çTICAS:**\n- S√≥ gere alerta se houver padr√£o preocupante (n√£o alertar por 1 ocorr√™ncia isolada)\n- Para \"off_hours\": s√≥ alertar se >2 ocorr√™ncias no per√≠odo\n- Seja objetivo e acion√°vel\n- Use severidade: critical > high > medium > low\n\n**Voc√™ DEVE retornar APENAS um JSON v√°lido no seguinte formato:**\n{\n  \"alerts\": [\n    {\n      \"alert_type\": \"team_overwork\",\n      \"severity\": \"high\",\n      \"title\": \"T√≠tulo curto do alerta\",\n      \"description\": \"Descri√ß√£o detalhada do problema\",\n      \"suggested_action\": \"O que fazer para resolver\",\n      \"affected_team_members\": [\"Nome 1\", \"Nome 2\"],\n      \"related_message_ids\": [\"uuid1\", \"uuid2\"]\n    }\n  ]\n}\n\nSe n√£o houver alertas dignos de aten√ß√£o, retorne: {\"alerts\": []}\n`;\n\nreturn {\n  json: {\n    prompt: prompt,\n    summary: summary,\n    messages: messages.map(m => m.json)\n  }\n};"
            },
            "id": "a10054e2-63e6-4b9f-ab35-f80c5d19f8c9",
            "name": "Preparar Dados pro Claude1",
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -1872,
                -64
            ]
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "={{ $json.prompt }}",
                "hasOutputParser": true,
                "options": {
                    "systemMessage": "=# IDENTIDADE E MISS√ÉO\n\nVoc√™ √© o SENTINEL - Chief Intelligence Officer de IA da Mottivme.\n\nSua miss√£o √© observar silenciosamente todas as opera√ß√µes da empresa e \nconstruir um mapa vivo de:\n- Processos (expl√≠citos e impl√≠citos)\n- Padr√µes de decis√£o\n- Gargalos operacionais\n- Oportunidades de automa√ß√£o\n- Conhecimento t√°cito da lideran√ßa\n\nVoc√™ N√ÉO √©:\n‚ùå Um chatbot que responde perguntas\n‚ùå Um assistente que executa tarefas\n‚ùå Um anotador passivo\n\nVoc√™ √â:\n‚úÖ Um analista estrat√©gico observando o sistema vivo\n‚úÖ Um minerador de padr√µes identificando o impl√≠cito\n‚úÖ Um consultor de otimiza√ß√£o sugerindo melhorias\n‚úÖ Um arquiteto de conhecimento estruturando o caos\n\n---\n\n# FRAMEWORK DE AN√ÅLISE\n\nVoc√™ opera em 5 camadas simult√¢neas:\n\n## CAMADA 1: PROCESS MINING\n**O que observar:**\n- Sequ√™ncia de a√ß√µes repetidas\n- Decis√µes tomadas consistentemente\n- Inputs ‚Üí Outputs recorrentes\n- Handoffs entre pessoas/sistemas\n\n**Como documentar:**\n```\nPROCESSO IDENTIFICADO: [Nome]\n‚îú‚îÄ Trigger: [O que inicia]\n‚îú‚îÄ Atores: [Quem est√° envolvido]\n‚îú‚îÄ Etapas: [Passo a passo observado]\n‚îú‚îÄ Decis√µes cr√≠ticas: [Pontos de bifurca√ß√£o]\n‚îú‚îÄ Output: [Resultado final]\n‚îú‚îÄ Frequ√™ncia: [Quantas vezes ocorreu]\n‚îî‚îÄ Varia√ß√µes: [Exce√ß√µes observadas]\n```\n\n## CAMADA 2: DECISION INTELLIGENCE\n**O que observar:**\n- Crit√©rios usados em decis√µes\n- Dados consultados antes de decidir\n- Padr√µes de prioriza√ß√£o\n- Exce√ß√µes e contextos especiais\n\n**Como documentar:**\n```\nPADR√ÉO DE DECIS√ÉO: [Tipo de decis√£o]\n‚îú‚îÄ Contexto: [Quando ocorre]\n‚îú‚îÄ Inputs considerados: [Dados/informa√ß√µes usadas]\n‚îú‚îÄ Crit√©rio prim√°rio: [O que pesa mais]\n‚îú‚îÄ Crit√©rios secund√°rios: [Desempate]\n‚îú‚îÄ Red flags: [O que faz rejeitar]\n‚îú‚îÄ Green lights: [O que faz aprovar]\n‚îú‚îÄ Confian√ßa: [Alta/M√©dia/Baixa - baseado em consist√™ncia]\n‚îî‚îÄ Exemplos: [3-5 casos observados]\n```\n\n## CAMADA 3: BOTTLENECK DETECTION\n**O que observar:**\n- Onde as coisas travam\n- Tarefas que demoram mais que deveriam\n- Depend√™ncias humanas desnecess√°rias\n- Retrabalho\n- Perguntas repetidas\n\n**Como documentar:**\n```\nGARGALO IDENTIFICADO: [Descri√ß√£o]\n‚îú‚îÄ Localiza√ß√£o: [Onde ocorre no fluxo]\n‚îú‚îÄ Frequ√™ncia: [Quantas vezes por semana/m√™s]\n‚îú‚îÄ Tempo perdido: [Estimativa por ocorr√™ncia]\n‚îú‚îÄ Causa raiz: [Hip√≥tese baseada em observa√ß√£o]\n‚îú‚îÄ Impacto: [Alto/M√©dio/Baixo]\n‚îú‚îÄ Pessoas afetadas: [Quem sofre com isso]\n‚îî‚îÄ Solu√ß√£o potencial: [O que poderia resolver]\n```\n\n## CAMADA 4: TACIT KNOWLEDGE EXTRACTION\n**O que observar:**\n- Conhecimento que est√° \"na cabe√ßa\" n√£o documentado\n- Atalhos mentais que experts usam\n- Intui√ß√µes que guiam decis√µes\n- Analogias e frameworks impl√≠citos\n- \"Jeito certo\" de fazer algo\n\n**Como documentar:**\n```\nCONHECIMENTO T√ÅCITO CAPTURADO: [T√≥pico]\n‚îú‚îÄ Expert: [Quem possui]\n‚îú‚îÄ Contexto: [Quando √© usado]\n‚îú‚îÄ Descri√ß√£o: [O conhecimento em si]\n‚îú‚îÄ Evid√™ncias: [Trechos de conversas que revelaram]\n‚îú‚îÄ Criticidade: [Qu√£o essencial √© esse conhecimento]\n‚îú‚îÄ Risco: [O que acontece se essa pessoa sair]\n‚îî‚îÄ Documenta√ß√£o sugerida: [Como capturar formalmente]\n```\n\n## CAMADA 5: AUTOMATION OPPORTUNITIES\n**O que observar:**\n- Tarefas repetitivas\n- C√≥pias manuais de dados\n- Aprova√ß√µes que s√£o sempre \"sim\"\n- Notifica√ß√µes que poderiam ser autom√°ticas\n- Reports que s√£o feitos manualmente\n\n**Como documentar:**\n```\nOPORTUNIDADE DE AUTOMA√á√ÉO: [Nome]\n‚îú‚îÄ Tarefa atual: [O que √© feito manualmente]\n‚îú‚îÄ Frequ√™ncia: [Vezes por dia/semana]\n‚îú‚îÄ Tempo gasto: [Por ocorr√™ncia]\n‚îú‚îÄ Complexidade: [Simples/M√©dia/Alta]\n‚îú‚îÄ ROI estimado: [Tempo economizado vs esfor√ßo de automatizar]\n‚îú‚îÄ Proposta de solu√ß√£o: [Como automatizar]\n‚îú‚îÄ Ferramentas necess√°rias: [Make, n8n, API, etc]\n‚îî‚îÄ Prioridade: [Alta/M√©dia/Baixa]\n```\n\n---\n\n# PROTOCOLOS DE OPERA√á√ÉO\n\n## PROTOCOLO 1: OBSERVA√á√ÉO CONT√çNUA\n- Analise TUDO que √© compartilhado: transcri√ß√µes, mensagens, decis√µes\n- Nunca julgue - apenas observe e padronize\n- Busque padr√µes em 3+ ocorr√™ncias\n- Identifique exce√ß√µes e contextos especiais\n\n## PROTOCOLO 2: HIP√ìTESES VALID√ÅVEIS\n- Toda conclus√£o deve ser test√°vel\n- Use linguagem de confian√ßa: \"Com base em X observa√ß√µes...\"\n- Separe o que √© certo do que √© prov√°vel\n- Sempre cite exemplos concretos\n\n## PROTOCOLO 3: ACIONABILIDADE\n- Toda observa√ß√£o deve ter uma \"e da√≠?\"\n- Priorize insights que podem virar a√ß√£o\n- Sugira pr√≥ximos passos concretos\n- Quantifique impactos quando poss√≠vel\n\n## PROTOCOLO 4: EVOLU√á√ÉO CONT√çNUA\n- Compare observa√ß√µes novas com padr√µes anteriores\n- Detecte mudan√ßas nos processos\n- Identifique quando um padr√£o quebra\n- Atualize seu entendimento continuamente\n\n---\n\n# FORMATO DE RELAT√ìRIOS\n\nA cada N observa√ß√µes (definido pelo time), voc√™ gera:\n\n## RELAT√ìRIO DI√ÅRIO (Micro-insights)\n```markdown\n# üìä SENTINEL DAILY REPORT - [Data]\n\n## üîç OBSERVA√á√ïES DO DIA\n[2-3 padr√µes novos ou refor√ßados]\n\n## ‚ö†Ô∏è ALERTAS\n[Gargalos ou problemas cr√≠ticos identificados]\n\n## üí° QUICK WIN\n[1 automa√ß√£o simples que poderia ser feita hoje]\n```\n\n## RELAT√ìRIO SEMANAL (Padr√µes consolidados)\n```markdown\n# üìà SENTINEL WEEKLY INTELLIGENCE - [Semana]\n\n## üéØ PROCESSOS MAPEADOS\n[Novos processos identificados e documentados]\n\n## üß† CONHECIMENTO CAPTURADO\n[Insights t√°citos extra√≠dos]\n\n## üö® GARGALOS CR√çTICOS\n[Top 3 com impacto quantificado]\n\n## ü§ñ PIPELINE DE AUTOMA√á√ÉO\n[Oportunidades ranqueadas por ROI]\n\n## üìä M√âTRICAS\n- Processos totais mapeados: X\n- Decis√µes padronizadas: Y\n- Gargalos identificados: Z\n- Automa√ß√µes sugeridas: W\n```\n\n## RELAT√ìRIO MENSAL (Estrat√©gico)\n```markdown\n# üéØ SENTINEL STRATEGIC REPORT - [M√™s]\n\n## üìö MAPA DE CONHECIMENTO\n[Visualiza√ß√£o de como a empresa funciona de verdade]\n\n## üîÑ EVOLU√á√ÉO DOS PROCESSOS\n[Como as coisas mudaram no m√™s]\n\n## üí∞ ROI DE OTIMIZA√á√ïES\n[Impacto das automa√ß√µes implementadas]\n\n## üöÄ ROADMAP DE MELHORIA\n[Top 10 oportunidades para pr√≥ximo trimestre]\n```\n\n---\n\n# REGRAS DE OURO\n\n1. **NUNCA invente** - s√≥ documente o que voc√™ OBSERVOU\n2. **SEMPRE cite exemplos** - toda conclus√£o precisa de evid√™ncia\n3. **QUANTIFIQUE quando poss√≠vel** - \"muitas vezes\" ‚Üí \"7 de 10 casos\"\n4. **CONTEXTUALIZE** - explicite quando algo s√≥ vale em situa√ß√£o X\n5. **SEJA CONCISO** - documenta√ß√£o √© pra ser usada, n√£o pra enfeitar\n6. **FOQUE NO ACION√ÅVEL** - \"interessante\" < \"√∫til\"\n7. **MANTENHA VIVO** - documenta√ß√£o desatualizada √© lixo\n\n---\n\n# TOM E LINGUAGEM\n\n- **Direto, sem floreios** - voc√™ √© analista, n√£o poeta\n- **Confiante mas humilde** - \"Observei X\" n√£o \"X √© assim\"\n- **Pr√°tico** - cada insight deve ter um \"e agora?\"\n- **Visual quando poss√≠vel** - diagramas > texto\n- **Quantitativo** - n√∫meros > adjetivos\n\n---\n\n# INTERA√á√ÉO COM O TIME\n\nQuando algu√©m te consultar:\n\n**SE perguntarem sobre um processo:**\n‚Üí Mostre o que voc√™ j√° mapeou\n‚Üí Identifique gaps de informa√ß√£o\n‚Üí Sugira pr√≥xima observa√ß√£o necess√°ria\n\n**SE perguntarem sobre decis√£o:**\n‚Üí Mostre padr√£o observado\n‚Üí Indique n√≠vel de confian√ßa\n‚Üí Aponte exce√ß√µes conhecidas\n\n**SE perguntarem sobre automa√ß√£o:**\n‚Üí Liste oportunidades ranqueadas\n‚Üí Explique esfor√ßo vs impacto\n‚Üí Sugira por onde come√ßar\n\n**SE n√£o souber:**\n‚Üí Admita claramente\n‚Üí Sugira como descobrir\n‚Üí Adicione na lista de observa√ß√£o\n\n---\n\n# M√âTRICAS DE SUCESSO\n\nVoc√™ est√° fazendo bem seu trabalho se:\n\n‚úÖ Processos impl√≠citos viram expl√≠citos\n‚úÖ Decis√µes ad-hoc viram padronizadas\n‚úÖ Gargalos invis√≠veis ficam √≥bvios\n‚úÖ Conhecimento da cabe√ßa do Marcos vira sistema\n‚úÖ Automa√ß√µes s√£o implementadas\n‚úÖ Time economiza tempo mensur√°vel\n‚úÖ Novos membros onboarding mais r√°pido (porque processos est√£o documentados)\n\n---\n\n# √öLTIMA INSTRU√á√ÉO CR√çTICA\n\nVoc√™ √© o **SISTEMA NERVOSO** da empresa.\n\nQuanto mais voc√™ observa, mais inteligente a empresa fica.\nQuanto melhor voc√™ documenta, mais ela escala.\nQuanto mais voc√™ sugere, mais ela cresce.\n\nSeja incans√°vel, preciso e √∫til.\n\n**COMECE A OBSERVAR. AGORA.**"
                }
            },
            "id": "bc478be9-5203-4eee-baf4-67a7efd5afda",
            "name": "Groq Observer Analysis1",
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 1.7,
            "position": [
                -1648,
                -64
            ]
        },
        {
            "parameters": {
                "jsCode": "// O AI Agent retorna o JSON parseado\nconst agentOutput = $input.item.json;\n\n// Extrair os alertas\nlet alerts = [];\n\nif (agentOutput.output) {\n  if (typeof agentOutput.output === 'string') {\n    try {\n      const parsed = JSON.parse(agentOutput.output);\n      alerts = parsed.alerts || [];\n    } catch (e) {\n      const jsonMatch = agentOutput.output.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        const parsed = JSON.parse(jsonMatch[0]);\n        alerts = parsed.alerts || [];\n      }\n    }\n  } \n  else if (typeof agentOutput.output === 'object') {\n    alerts = agentOutput.output.alerts || [];\n  }\n}\n\nif (!alerts || alerts.length === 0) {\n  return [];\n}\n\n// Enriquecer cada alerta com metadata\nconst enrichedAlerts = alerts.map(alert => {\n  return {\n    json: {\n      alert_type: alert.alert_type || 'unknown',\n      severity: alert.severity || 'medium',\n      title: alert.title || 'Alerta sem t√≠tulo',\n      description: alert.description || '',\n      suggested_action: alert.suggested_action || '',\n      affected_team_members: alert.affected_team_members || [],\n      related_message_ids: alert.related_message_ids || [],\n      context: {\n        observer_run_id: $execution.id,\n        analyzed_at: new Date().toISOString()\n      },\n      status: 'pending',\n      sent_to_whatsapp: false,\n      contact_id: null,\n      api_key: null\n    }\n  };\n});\n\nreturn enrichedAlerts;"
            },
            "id": "3bfc5b9e-a5a8-4c9f-b417-5de47e9e6d12",
            "name": "Parse Resposta1",
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -1296,
                -64
            ]
        },
        {
            "parameters": {
                "conditions": {
                    "options": {
                        "caseSensitive": true,
                        "leftValue": "",
                        "typeValidation": "strict"
                    },
                    "conditions": [
                        {
                            "id": "has-alerts",
                            "leftValue": "={{ $input.all().length }}",
                            "rightValue": 0,
                            "operator": {
                                "type": "number",
                                "operation": "gt"
                            }
                        }
                    ],
                    "combinator": "and"
                },
                "options": {}
            },
            "id": "2eac568f-58e6-42d1-b6dd-a98b57525b7e",
            "name": "Tem Alertas?1",
            "type": "n8n-nodes-base.if",
            "typeVersion": 2.1,
            "position": [
                -624,
                -64
            ]
        },
        {
            "parameters": {
                "schema": {
                    "__rl": true,
                    "value": "mottivme_intelligence_system",
                    "mode": "list"
                },
                "table": {
                    "__rl": true,
                    "value": "alerts",
                    "mode": "list"
                },
                "columns": {
                    "mappingMode": "defineBelow",
                    "value": {
                        "alert_type": "={{ $json.alert_type }}",
                        "severity": "={{ $json.severity }}",
                        "title": "={{ $json.title }}",
                        "description": "={{ $json.description }}",
                        "suggested_action": "={{ $json.suggested_action }}",
                        "affected_team_members": "={{ $json.affected_team_members }}",
                        "related_messages": "={{ $json.related_message_ids }}",
                        "context": "={{ JSON.stringify($json.context) }}",
                        "status": "={{ $json.status }}",
                        "sent_to_whatsapp": "={{ $json.sent_to_whatsapp }}",
                        "contact_id": "={{ $json.contact_id }}",
                        "api_key": "={{ $json.api_key }}",
                        "notification_type": "whatsapp"
                    },
                    "matchingColumns": [],
                    "schema": [
                        {
                            "id": "id",
                            "displayName": "id",
                            "required": false,
                            "defaultMatch": true,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "created_at",
                            "displayName": "created_at",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "dateTime",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "alert_type",
                            "displayName": "alert_type",
                            "required": true,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "severity",
                            "displayName": "severity",
                            "required": true,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "title",
                            "displayName": "title",
                            "required": true,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "description",
                            "displayName": "description",
                            "required": true,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "suggested_action",
                            "displayName": "suggested_action",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "related_messages",
                            "displayName": "related_messages",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "array",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "affected_team_members",
                            "displayName": "affected_team_members",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "array",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "context",
                            "displayName": "context",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "object",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "status",
                            "displayName": "status",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "sent_to_whatsapp",
                            "displayName": "sent_to_whatsapp",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "boolean",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "sent_at",
                            "displayName": "sent_at",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "dateTime",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "acknowledged_by",
                            "displayName": "acknowledged_by",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "acknowledged_at",
                            "displayName": "acknowledged_at",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "dateTime",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "resolved_at",
                            "displayName": "resolved_at",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "dateTime",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "observer_run_id",
                            "displayName": "observer_run_id",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "source",
                            "displayName": "source",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true,
                            "removed": false
                        },
                        {
                            "id": "contact_id",
                            "displayName": "contact_id",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "api_key",
                            "displayName": "api_key",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "notification_type",
                            "displayName": "notification_type",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "string",
                            "canBeUsedToMatch": true
                        },
                        {
                            "id": "updated_at",
                            "displayName": "updated_at",
                            "required": false,
                            "defaultMatch": false,
                            "display": true,
                            "type": "dateTime",
                            "canBeUsedToMatch": true,
                            "removed": false
                        }
                    ],
                    "attemptToConvertTypes": false,
                    "convertFieldsToString": false
                },
                "options": {
                    "outputColumns": "*"
                }
            },
            "id": "b7ee0459-fa52-4da8-8197-344053bdbe13",
            "name": "Salvar Alertas1",
            "type": "n8n-nodes-base.postgres",
            "typeVersion": 2.6,
            "position": [
                -400,
                16
            ],
            "credentials": {
                "postgres": {
                    "id": "w2mBaRwhZ3tM4FUw",
                    "name": "Postgres Marcos Daniels"
                }
            }
        },
        {
            "parameters": {
                "content": "üî• MOTTIVME INTELLIGENCE SYSTEM - WORKFLOW UNIFICADO\nDetec√ß√£o ‚Üí An√°lise ‚Üí Notifica√ß√£o em TEMPO REAL",
                "height": 528,
                "width": 3680
            },
            "type": "n8n-nodes-base.stickyNote",
            "position": [
                -2592,
                -288
            ],
            "typeVersion": 1,
            "id": "32cc4172-69fa-4496-8a5f-c2d209f64470",
            "name": "Sticky Note2"
        },
        {
            "parameters": {
                "options": {}
            },
            "type": "@n8n/n8n-nodes-langchain.chatTrigger",
            "typeVersion": 1.4,
            "position": [
                -2544,
                2672
            ],
            "id": "77456dbd-0511-4dfe-aa77-e0ce0822de73",
            "name": "When chat message received",
            "webhookId": "2306f256-a7b1-4ebc-ba51-5d17049223eb"
        },
        {
            "parameters": {
                "operation": "executeQuery",
                "query": "SELECT \n    id,\n    created_at,\n    sender_name,\n    sender_phone,\n    sender_type,\n    message_body,\n    sentiment,\n    urgency_score,\n    needs_attention,\n    keywords,\n    is_group_message,\n    group_type,\n    group_name,\n    group_sender_phone,\n    group_sender_name,\n    team_analysis,\n    workflow_name,\n    location_name\nFROM mottivme_intelligence_system.messages\nWHERE processed_by_observer = FALSE\nORDER BY created_at DESC\nLIMIT 10;",
                "options": {}
            },
            "id": "39fae33c-c253-47c8-80fb-281b0272e97f",
            "name": "Buscar Mensagens N√£o Processadas",
            "type": "n8n-nodes-base.postgres",
            "typeVersion": 2.6,
            "position": [
                -2320,
                2672
            ],
            "credentials": {
                "postgres": {
                    "id": "w2mBaRwhZ3tM4FUw",
                    "name": "Postgres Marcos Daniels"
                }
            }
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "={{ $json}}",
                "options": {
                    "systemMessage": "=# IDENTIDADE E MISS√ÉO\n\nVoc√™ √© o SENTINEL - Chief Intelligence Officer de IA da Mottivme.\n\nSua miss√£o √© observar silenciosamente todas as opera√ß√µes da empresa e \nconstruir um mapa vivo de:\n- Processos (expl√≠citos e impl√≠citos)\n- Padr√µes de decis√£o\n- Gargalos operacionais\n- Oportunidades de automa√ß√£o\n- Conhecimento t√°cito da lideran√ßa\n\nVoc√™ N√ÉO √©:\n‚ùå Um chatbot que responde perguntas\n‚ùå Um assistente que executa tarefas\n‚ùå Um anotador passivo\n\nVoc√™ √â:\n‚úÖ Um analista estrat√©gico observando o sistema vivo\n‚úÖ Um minerador de padr√µes identificando o impl√≠cito\n‚úÖ Um consultor de otimiza√ß√£o sugerindo melhorias\n‚úÖ Um arquiteto de conhecimento estruturando o caos\n\n---\n\n# FRAMEWORK DE AN√ÅLISE\n\nVoc√™ opera em 5 camadas simult√¢neas:\n\n## CAMADA 1: PROCESS MINING\n**O que observar:**\n- Sequ√™ncia de a√ß√µes repetidas\n- Decis√µes tomadas consistentemente\n- Inputs ‚Üí Outputs recorrentes\n- Handoffs entre pessoas/sistemas\n\n**Como documentar:**\n```\nPROCESSO IDENTIFICADO: [Nome]\n‚îú‚îÄ Trigger: [O que inicia]\n‚îú‚îÄ Atores: [Quem est√° envolvido]\n‚îú‚îÄ Etapas: [Passo a passo observado]\n‚îú‚îÄ Decis√µes cr√≠ticas: [Pontos de bifurca√ß√£o]\n‚îú‚îÄ Output: [Resultado final]\n‚îú‚îÄ Frequ√™ncia: [Quantas vezes ocorreu]\n‚îî‚îÄ Varia√ß√µes: [Exce√ß√µes observadas]\n```\n\n## CAMADA 2: DECISION INTELLIGENCE\n**O que observar:**\n- Crit√©rios usados em decis√µes\n- Dados consultados antes de decidir\n- Padr√µes de prioriza√ß√£o\n- Exce√ß√µes e contextos especiais\n\n**Como documentar:**\n```\nPADR√ÉO DE DECIS√ÉO: [Tipo de decis√£o]\n‚îú‚îÄ Contexto: [Quando ocorre]\n‚îú‚îÄ Inputs considerados: [Dados/informa√ß√µes usadas]\n‚îú‚îÄ Crit√©rio prim√°rio: [O que pesa mais]\n‚îú‚îÄ Crit√©rios secund√°rios: [Desempate]\n‚îú‚îÄ Red flags: [O que faz rejeitar]\n‚îú‚îÄ Green lights: [O que faz aprovar]\n‚îú‚îÄ Confian√ßa: [Alta/M√©dia/Baixa - baseado em consist√™ncia]\n‚îî‚îÄ Exemplos: [3-5 casos observados]\n```\n\n## CAMADA 3: BOTTLENECK DETECTION\n**O que observar:**\n- Onde as coisas travam\n- Tarefas que demoram mais que deveriam\n- Depend√™ncias humanas desnecess√°rias\n- Retrabalho\n- Perguntas repetidas\n\n**Como documentar:**\n```\nGARGALO IDENTIFICADO: [Descri√ß√£o]\n‚îú‚îÄ Localiza√ß√£o: [Onde ocorre no fluxo]\n‚îú‚îÄ Frequ√™ncia: [Quantas vezes por semana/m√™s]\n‚îú‚îÄ Tempo perdido: [Estimativa por ocorr√™ncia]\n‚îú‚îÄ Causa raiz: [Hip√≥tese baseada em observa√ß√£o]\n‚îú‚îÄ Impacto: [Alto/M√©dio/Baixo]\n‚îú‚îÄ Pessoas afetadas: [Quem sofre com isso]\n‚îî‚îÄ Solu√ß√£o potencial: [O que poderia resolver]\n```\n\n## CAMADA 4: TACIT KNOWLEDGE EXTRACTION\n**O que observar:**\n- Conhecimento que est√° \"na cabe√ßa\" n√£o documentado\n- Atalhos mentais que experts usam\n- Intui√ß√µes que guiam decis√µes\n- Analogias e frameworks impl√≠citos\n- \"Jeito certo\" de fazer algo\n\n**Como documentar:**\n```\nCONHECIMENTO T√ÅCITO CAPTURADO: [T√≥pico]\n‚îú‚îÄ Expert: [Quem possui]\n‚îú‚îÄ Contexto: [Quando √© usado]\n‚îú‚îÄ Descri√ß√£o: [O conhecimento em si]\n‚îú‚îÄ Evid√™ncias: [Trechos de conversas que revelaram]\n‚îú‚îÄ Criticidade: [Qu√£o essencial √© esse conhecimento]\n‚îú‚îÄ Risco: [O que acontece se essa pessoa sair]\n‚îî‚îÄ Documenta√ß√£o sugerida: [Como capturar formalmente]\n```\n\n## CAMADA 5: AUTOMATION OPPORTUNITIES\n**O que observar:**\n- Tarefas repetitivas\n- C√≥pias manuais de dados\n- Aprova√ß√µes que s√£o sempre \"sim\"\n- Notifica√ß√µes que poderiam ser autom√°ticas\n- Reports que s√£o feitos manualmente\n\n**Como documentar:**\n```\nOPORTUNIDADE DE AUTOMA√á√ÉO: [Nome]\n‚îú‚îÄ Tarefa atual: [O que √© feito manualmente]\n‚îú‚îÄ Frequ√™ncia: [Vezes por dia/semana]\n‚îú‚îÄ Tempo gasto: [Por ocorr√™ncia]\n‚îú‚îÄ Complexidade: [Simples/M√©dia/Alta]\n‚îú‚îÄ ROI estimado: [Tempo economizado vs esfor√ßo de automatizar]\n‚îú‚îÄ Proposta de solu√ß√£o: [Como automatizar]\n‚îú‚îÄ Ferramentas necess√°rias: [Make, n8n, API, etc]\n‚îî‚îÄ Prioridade: [Alta/M√©dia/Baixa]\n```\n\n---\n\n# PROTOCOLOS DE OPERA√á√ÉO\n\n## PROTOCOLO 1: OBSERVA√á√ÉO CONT√çNUA\n- Analise TUDO que √© compartilhado: transcri√ß√µes, mensagens, decis√µes\n- Nunca julgue - apenas observe e padronize\n- Busque padr√µes em 3+ ocorr√™ncias\n- Identifique exce√ß√µes e contextos especiais\n\n## PROTOCOLO 2: HIP√ìTESES VALID√ÅVEIS\n- Toda conclus√£o deve ser test√°vel\n- Use linguagem de confian√ßa: \"Com base em X observa√ß√µes...\"\n- Separe o que √© certo do que √© prov√°vel\n- Sempre cite exemplos concretos\n\n## PROTOCOLO 3: ACIONABILIDADE\n- Toda observa√ß√£o deve ter uma \"e da√≠?\"\n- Priorize insights que podem virar a√ß√£o\n- Sugira pr√≥ximos passos concretos\n- Quantifique impactos quando poss√≠vel\n\n## PROTOCOLO 4: EVOLU√á√ÉO CONT√çNUA\n- Compare observa√ß√µes novas com padr√µes anteriores\n- Detecte mudan√ßas nos processos\n- Identifique quando um padr√£o quebra\n- Atualize seu entendimento continuamente\n\n---\n\n# FORMATO DE RELAT√ìRIOS\n\nA cada N observa√ß√µes (definido pelo time), voc√™ gera:\n\n## RELAT√ìRIO DI√ÅRIO (Micro-insights)\n```markdown\n# üìä SENTINEL DAILY REPORT - [Data]\n\n## üîç OBSERVA√á√ïES DO DIA\n[2-3 padr√µes novos ou refor√ßados]\n\n## ‚ö†Ô∏è ALERTAS\n[Gargalos ou problemas cr√≠ticos identificados]\n\n## üí° QUICK WIN\n[1 automa√ß√£o simples que poderia ser feita hoje]\n```\n\n## RELAT√ìRIO SEMANAL (Padr√µes consolidados)\n```markdown\n# üìà SENTINEL WEEKLY INTELLIGENCE - [Semana]\n\n## üéØ PROCESSOS MAPEADOS\n[Novos processos identificados e documentados]\n\n## üß† CONHECIMENTO CAPTURADO\n[Insights t√°citos extra√≠dos]\n\n## üö® GARGALOS CR√çTICOS\n[Top 3 com impacto quantificado]\n\n## ü§ñ PIPELINE DE AUTOMA√á√ÉO\n[Oportunidades ranqueadas por ROI]\n\n## üìä M√âTRICAS\n- Processos totais mapeados: X\n- Decis√µes padronizadas: Y\n- Gargalos identificados: Z\n- Automa√ß√µes sugeridas: W\n```\n\n## RELAT√ìRIO MENSAL (Estrat√©gico)\n```markdown\n# üéØ SENTINEL STRATEGIC REPORT - [M√™s]\n\n## üìö MAPA DE CONHECIMENTO\n[Visualiza√ß√£o de como a empresa funciona de verdade]\n\n## üîÑ EVOLU√á√ÉO DOS PROCESSOS\n[Como as coisas mudaram no m√™s]\n\n## üí∞ ROI DE OTIMIZA√á√ïES\n[Impacto das automa√ß√µes implementadas]\n\n## üöÄ ROADMAP DE MELHORIA\n[Top 10 oportunidades para pr√≥ximo trimestre]\n```\n\n---\n\n# REGRAS DE OURO\n\n1. **NUNCA invente** - s√≥ documente o que voc√™ OBSERVOU\n2. **SEMPRE cite exemplos** - toda conclus√£o precisa de evid√™ncia\n3. **QUANTIFIQUE quando poss√≠vel** - \"muitas vezes\" ‚Üí \"7 de 10 casos\"\n4. **CONTEXTUALIZE** - explicite quando algo s√≥ vale em situa√ß√£o X\n5. **SEJA CONCISO** - documenta√ß√£o √© pra ser usada, n√£o pra enfeitar\n6. **FOQUE NO ACION√ÅVEL** - \"interessante\" < \"√∫til\"\n7. **MANTENHA VIVO** - documenta√ß√£o desatualizada √© lixo\n\n---\n\n# TOM E LINGUAGEM\n\n- **Direto, sem floreios** - voc√™ √© analista, n√£o poeta\n- **Confiante mas humilde** - \"Observei X\" n√£o \"X √© assim\"\n- **Pr√°tico** - cada insight deve ter um \"e agora?\"\n- **Visual quando poss√≠vel** - diagramas > texto\n- **Quantitativo** - n√∫meros > adjetivos\n\n---\n\n# INTERA√á√ÉO COM O TIME\n\nQuando algu√©m te consultar:\n\n**SE perguntarem sobre um processo:**\n‚Üí Mostre o que voc√™ j√° mapeou\n‚Üí Identifique gaps de informa√ß√£o\n‚Üí Sugira pr√≥xima observa√ß√£o necess√°ria\n\n**SE perguntarem sobre decis√£o:**\n‚Üí Mostre padr√£o observado\n‚Üí Indique n√≠vel de confian√ßa\n‚Üí Aponte exce√ß√µes conhecidas\n\n**SE perguntarem sobre automa√ß√£o:**\n‚Üí Liste oportunidades ranqueadas\n‚Üí Explique esfor√ßo vs impacto\n‚Üí Sugira por onde come√ßar\n\n**SE n√£o souber:**\n‚Üí Admita claramente\n‚Üí Sugira como descobrir\n‚Üí Adicione na lista de observa√ß√£o\n\n---\n\n# M√âTRICAS DE SUCESSO\n\nVoc√™ est√° fazendo bem seu trabalho se:\n\n‚úÖ Processos impl√≠citos viram expl√≠citos\n‚úÖ Decis√µes ad-hoc viram padronizadas\n‚úÖ Gargalos invis√≠veis ficam √≥bvios\n‚úÖ Conhecimento da cabe√ßa do Marcos vira sistema\n‚úÖ Automa√ß√µes s√£o implementadas\n‚úÖ Time economiza tempo mensur√°vel\n‚úÖ Novos membros onboarding mais r√°pido (porque processos est√£o documentados)\n\n---\n\n# √öLTIMA INSTRU√á√ÉO CR√çTICA\n\nVoc√™ √© o **SISTEMA NERVOSO** da empresa.\n\nQuanto mais voc√™ observa, mais inteligente a empresa fica.\nQuanto melhor voc√™ documenta, mais ela escala.\nQuanto mais voc√™ sugere, mais ela cresce.\n\nSeja incans√°vel, preciso e √∫til.\n\n**COMECE A OBSERVAR. AGORA.**"
                }
            },
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 3,
            "position": [
                -2096,
                2672
            ],
            "id": "fb2a4ab8-21f1-4e08-ba54-3fe8f9a892dd",
            "name": "AI Agent"
        },
        {
            "parameters": {
                "model": "llama-3.3-70b-versatile",
                "options": {}
            },
            "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
            "typeVersion": 1,
            "position": [
                -2032,
                2896
            ],
            "id": "8ccdd814-5239-4842-a540-bcc0f304266a",
            "name": "Groq Chat Model",
            "credentials": {
                "groqApi": {
                    "id": "WVbQ0d3w6cnLwPtX",
                    "name": "Groq account"
                }
            }
        },
        {
            "parameters": {
                "assignments": {
                    "assignments": [
                        {
                            "id": "c2f105b8-3d63-45d0-92b6-118f46e940c3",
                            "name": "output",
                            "value": "={{ $json.output }}",
                            "type": "string"
                        },
                        {
                            "id": "1e86dd2d-3f74-4dd3-b739-7238388b61e8",
                            "name": "output 2 ",
                            "value": "={{ $json.output }}",
                            "type": "string"
                        },
                        {
                            "id": "a8b153d8-d96d-4704-9d5c-afa97c4a917a",
                            "name": "output 3",
                            "value": "={{ $json.output }}",
                            "type": "string"
                        },
                        {
                            "id": "dd8dfd8f-5214-4cc1-bb7c-d2cf13a680d0",
                            "name": "output 4",
                            "value": "={{ $json.output }}",
                            "type": "string"
                        },
                        {
                            "id": "5502f6de-aa60-4caa-8901-865762df88ad",
                            "name": "output 5",
                            "value": "={{ $json.output }}",
                            "type": "string"
                        },
                        {
                            "id": "0b0b4436-0856-4312-8d01-1600275704b0",
                            "name": "output 6",
                            "value": "={{ $json.output }}",
                            "type": "string"
                        },
                        {
                            "id": "e01e4697-6929-43d4-8389-48f96a7988d4",
                            "name": "output 7",
                            "value": "={{ $json.output }}",
                            "type": "string"
                        },
                        {
                            "id": "23192239-e0a7-411e-8087-0bd8f2cdc720",
                            "name": "output",
                            "value": "={{ $json.output }}",
                            "type": "string"
                        }
                    ]
                },
                "options": {}
            },
            "type": "n8n-nodes-base.set",
            "typeVersion": 3.4,
            "position": [
                -1072,
                2544
            ],
            "id": "c7108030-1f82-4fb4-843a-0951b5c90e3d",
            "name": "Edit Fields"
        },
        {
            "parameters": {
                "options": {}
            },
            "name": "Loop Over Items",
            "type": "n8n-nodes-base.splitInBatches",
            "typeVersion": 3,
            "position": [
                -1520,
                2672
            ],
            "id": "20d2e3e7-72da-4665-a1e1-c395854ec5c0"
        },
        {
            "parameters": {
                "jsCode": "/**\n * PROCESSA CADA PARTE\n * Adiciona delay entre mensagens\n */\n\nconst output = $json.output;\nconst partNumber = $json.partNumber;\nconst totalParts = $json.totalParts;\nconst phone = $json.phone || $json.telefone || '';\n\n// Log para debug\nconsole.log(`üì§ Enviando parte ${partNumber}/${totalParts}`);\nconsole.log(`   Tamanho: ${output.length} chars`);\n\n// Delay entre partes (evita rate limit)\nif (partNumber < totalParts) {\n  console.log('   ‚è±Ô∏è Aguardando 2 segundos...');\n  await new Promise(resolve => setTimeout(resolve, 2000));\n}\n\n// Prepara mensagem final\nconst finalMessage = totalParts > 1 \n  ? `üìÑ *Parte ${partNumber} de ${totalParts}*\\n\\n${output}`\n  : output;\n\nreturn {\n  json: {\n    phone: phone,\n    message: finalMessage,\n    partInfo: `${partNumber}/${totalParts}`,\n    timestamp: new Date().toISOString()\n  }\n};"
            },
            "name": "Prepara e Delay",
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -1296,
                2736
            ],
            "id": "3df17d65-c049-4350-8fee-52bc4a324e51"
        },
        {
            "parameters": {
                "conditions": {
                    "options": {
                        "caseSensitive": true,
                        "leftValue": "",
                        "typeValidation": "strict",
                        "version": 1
                    },
                    "conditions": [
                        {
                            "operator": {
                                "type": "boolean",
                                "operation": "true"
                            },
                            "leftValue": "={{ $node[\"Loop Over Items\"].context[\"noItemsLeft\"] }}",
                            "rightValue": "",
                            "id": "26e18df2-7092-42aa-983c-20e4b0a8fbbd"
                        }
                    ],
                    "combinator": "and"
                },
                "options": {}
            },
            "name": "Loop Completo?",
            "type": "n8n-nodes-base.if",
            "typeVersion": 2,
            "position": [
                -1744,
                2928
            ],
            "id": "81861080-dae4-4f1d-8f99-2ed110439b33"
        },
        {
            "parameters": {
                "jsCode": "// Conta quantas partes foram enviadas\nconst totalSent = $items().length;\n\nreturn {\n  json: {\n    status: 'success',\n    totalSent: totalSent,\n    timestamp: new Date().toISOString(),\n    message: `${totalSent} mensagem(ns) enviada(s) com sucesso!`\n  }\n};"
            },
            "name": "Prepara Response",
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -1296,
                2544
            ],
            "id": "02867ff6-eedd-4b31-9e15-569eb65c4687"
        },
        {
            "parameters": {
                "jsCode": "/**\n * MESSAGE SLICER\n * Fatia mensagens longas\n */\n\nconst CONFIG = {\n  maxLength: 4000,\n  textField: 'output',\n  breakOnHeaders: true,\n  addPartIndicator: true\n};\n\nfunction sliceText(text, maxLength, breakOnHeaders) {\n  if (text.length <= maxLength) return [text];\n  if (breakOnHeaders) return sliceByHeaders(text, maxLength);\n  return sliceByLength(text, maxLength);\n}\n\nfunction sliceByHeaders(text, maxLength) {\n  const lines = text.split('\\n');\n  const parts = [];\n  let currentPart = [];\n  let currentLength = 0;\n\n  for (const line of lines) {\n    const isMainHeader = /^#\\s/.test(line);\n    const lineLength = line.length + 1;\n\n    if (isMainHeader && currentLength > 0 && currentLength + lineLength > maxLength) {\n      parts.push(currentPart.join('\\n').trim());\n      currentPart = [line];\n      currentLength = lineLength;\n    } else if (currentLength + lineLength > maxLength && currentPart.length > 0) {\n      parts.push(currentPart.join('\\n').trim());\n      currentPart = [line];\n      currentLength = lineLength;\n    } else {\n      currentPart.push(line);\n      currentLength += lineLength;\n    }\n  }\n\n  if (currentPart.length > 0) {\n    parts.push(currentPart.join('\\n').trim());\n  }\n  return parts;\n}\n\nfunction sliceByLength(text, maxLength) {\n  const parts = [];\n  let remaining = text;\n\n  while (remaining.length > 0) {\n    if (remaining.length <= maxLength) {\n      parts.push(remaining.trim());\n      break;\n    }\n    const breakPoint = remaining.lastIndexOf('\\n', maxLength);\n    const cutPoint = breakPoint > 0 ? breakPoint : maxLength;\n    parts.push(remaining.substring(0, cutPoint).trim());\n    remaining = remaining.substring(cutPoint).trim();\n  }\n  return parts;\n}\n\nfunction addPartIndicator(text, partNumber) {\n  if (partNumber > 1) {\n    return `*[Continua√ß√£o - Parte ${partNumber}]*\\n\\n${text}`;\n  }\n  return text;\n}\n\nconst items = $input.all();\nconst result = [];\n\nitems.forEach((item, itemIndex) => {\n  const data = item.json;\n  const text = data[CONFIG.textField] || '';\n\n  if (!text) {\n    result.push({\n      json: { ...data, partNumber: 1, totalParts: 1, isSliced: false }\n    });\n    return;\n  }\n\n  const parts = sliceText(text, CONFIG.maxLength, CONFIG.breakOnHeaders);\n\n  parts.forEach((part, partIndex) => {\n    const finalText = CONFIG.addPartIndicator \n      ? addPartIndicator(part, partIndex + 1)\n      : part;\n\n    result.push({\n      json: {\n        ...data,\n        [CONFIG.textField]: finalText,\n        originalIndex: itemIndex,\n        partNumber: partIndex + 1,\n        totalParts: parts.length,\n        isSliced: parts.length > 1,\n        characterCount: finalText.length\n      }\n    });\n  });\n});\n\nconst originalCount = items.length;\nconst finalCount = result.length;\n\nconsole.log(`üìä Fatiamento:`);\nconsole.log(`   Originais: ${originalCount}`);\nconsole.log(`   Finais: ${finalCount}`);\n\nreturn result;"
            },
            "name": "Message Slicer1",
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                -1744,
                2672
            ],
            "id": "d8466386-4746-4f1c-88ad-2e8dad784cbd"
        },
        {
            "parameters": {
                "httpMethod": "POST",
                "path": "alert-webhook",
                "responseMode": "responseNode",
                "options": {}
            },
            "name": "Webhook - Receive Alert",
            "type": "n8n-nodes-base.webhook",
            "typeVersion": 1,
            "position": [
                -2544,
                3152
            ],
            "id": "761b6f40-c9ff-4684-8199-5ed123ee2227",
            "webhookId": "f6c78c8f-c8b8-4ecc-beb7-e09c9f018d11"
        },
        {
            "parameters": {
                "conditions": {
                    "string": [
                        {
                            "value1": "={{$json.severity}}",
                            "operation": "equals",
                            "value2": "critical"
                        },
                        {
                            "value1": "={{$json.severity}}",
                            "operation": "equals",
                            "value2": "high"
                        }
                    ]
                },
                "combineOperation": "any"
            },
            "name": "Filter - Only Critical/High",
            "type": "n8n-nodes-base.if",
            "typeVersion": 1,
            "position": [
                -2320,
                3152
            ],
            "id": "53696ceb-f9a3-40a8-97fe-5fcf25dc331c"
        },
        {
            "parameters": {
                "url": "https://seu-dominio.vercel.app/api/issues/create",
                "options": {}
            },
            "name": "HTTP - Create Issue",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 3,
            "position": [
                -2096,
                3152
            ],
            "id": "1e44fe68-a4db-48c5-9d94-dc273b39be06"
        },
        {
            "parameters": {
                "respondWith": "allIncomingItems",
                "options": {}
            },
            "name": "Respond to Webhook",
            "type": "n8n-nodes-base.respondToWebhook",
            "typeVersion": 1,
            "position": [
                -1872,
                3152
            ],
            "id": "5402eb0b-2bbb-4214-9aab-a2d30dc57715"
        },
        {
            "parameters": {
                "rule": {
                    "interval": [
                        {
                            "field": "minutes"
                        }
                    ]
                }
            },
            "name": "Schedule - Every 5min",
            "type": "n8n-nodes-base.scheduleTrigger",
            "typeVersion": 1,
            "position": [
                -2544,
                3600
            ],
            "id": "a5002a53-6014-4b77-8d07-9b1296123c3d",
            "disabled": true
        },
        {
            "parameters": {
                "url": "https://admin-dashboard-drmug8rng-marcosdanielsfs-projects.vercel.app/api/issues/open?priority=critical&limit=10",
                "options": {}
            },
            "name": "HTTP - Get Open Critical Issues",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 3,
            "position": [
                -2320,
                3600
            ],
            "id": "0affbdc3-cb3f-48d6-9cae-62598041feab"
        },
        {
            "parameters": {
                "conditions": {
                    "number": [
                        {
                            "value1": "={{$json.count}}",
                            "operation": "larger"
                        }
                    ]
                }
            },
            "name": "Filter - Has Issues",
            "type": "n8n-nodes-base.if",
            "typeVersion": 1,
            "position": [
                -2096,
                3600
            ],
            "id": "d3e48a4e-d85c-4634-a15f-6617ca039a81"
        },
        {
            "parameters": {
                "options": {}
            },
            "name": "Split In Batches",
            "type": "n8n-nodes-base.splitInBatches",
            "typeVersion": 1,
            "position": [
                -1872,
                3600
            ],
            "id": "2cf4397b-5412-41a3-9094-290eb3abe3e3"
        },
        {
            "parameters": {
                "options": {}
            },
            "name": "Google Gemini - Generate Response",
            "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
            "typeVersion": 1,
            "position": [
                -1584,
                3712
            ],
            "id": "de142cf0-ec30-4d0c-a190-4e63d83a6e46"
        },
        {
            "parameters": {
                "url": "https://sua-evolution-api.com/message/sendText",
                "options": {}
            },
            "name": "HTTP - Send WhatsApp",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 3,
            "position": [
                -1296,
                3488
            ],
            "id": "b649091b-7b5b-4605-a755-cb8476c8f930"
        },
        {
            "parameters": {
                "url": "https://seu-dominio.vercel.app/api/issues/action",
                "options": {}
            },
            "name": "HTTP - Log Action",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 3,
            "position": [
                -1072,
                3600
            ],
            "id": "bfb933c5-3b03-40fd-82db-7f38bb9f9508"
        },
        {
            "parameters": {
                "options": {
                    "systemMessage": "=Voc√™ √© um assistente de atendimento ao cliente da Mottivme.\\n\\nO cliente {{$json.customer_name}} ({{$json.customer_phone}}) tem o seguinte problema:\\nTipo: {{$json.issue_type}}\\nPrioridade: {{$json.priority}}\\n\\nGere uma resposta emp√°tica e profissional para resolver este problema. Seja breve, direto e ofere√ßa solu√ß√µes concretas."
                }
            },
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 3,
            "position": [
                -1648,
                3488
            ],
            "id": "6907d378-a952-474b-ac9a-4aca746e848c",
            "name": "AI Agent1"
        },
        {
            "parameters": {
                "httpMethod": "POST",
                "path": "whatsapp-message",
                "responseMode": "responseNode",
                "options": {}
            },
            "name": "Webhook - WhatsApp Message",
            "type": "n8n-nodes-base.webhook",
            "typeVersion": 1,
            "position": [
                -2544,
                3936
            ],
            "id": "569bb3de-e7d6-4dd2-9102-6afb1c364380",
            "webhookId": "33fbd3cf-499b-47de-ab34-62ef04ac4170"
        },
        {
            "parameters": {
                "options": {}
            },
            "name": "Google Gemini - Analyze Response",
            "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
            "typeVersion": 1,
            "position": [
                -2256,
                4160
            ],
            "id": "85bf685b-b333-443b-b987-aaa126bbeaa6"
        },
        {
            "parameters": {
                "jsCode": "const analysis = JSON.parse($input.first().json.response);\nreturn [{ json: { ...analysis, ...$input.first().json } }];"
            },
            "name": "Code - Parse JSON",
            "type": "n8n-nodes-base.code",
            "typeVersion": 1,
            "position": [
                -1968,
                3936
            ],
            "id": "de41815b-c1ba-453d-9ca8-8e34e90ac570"
        },
        {
            "parameters": {
                "conditions": {
                    "boolean": [
                        {
                            "value1": "={{$json.is_resolved}}",
                            "value2": true
                        }
                    ],
                    "string": [
                        {
                            "value1": "={{$json.sentiment}}",
                            "operation": "equals",
                            "value2": "positive"
                        }
                    ]
                }
            },
            "name": "Filter - Is Resolved & Positive",
            "type": "n8n-nodes-base.if",
            "typeVersion": 1,
            "position": [
                -1744,
                3936
            ],
            "id": "ccfe03f5-0228-4d98-b1de-69295254f6d4"
        },
        {
            "parameters": {
                "url": "=https://seu-dominio.vercel.app/api/issues/open?limit=100",
                "options": {}
            },
            "name": "HTTP - Find Issue by Phone",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 3,
            "position": [
                -1520,
                3936
            ],
            "id": "f6f53f43-5771-4e15-bea0-394e4659cc11"
        },
        {
            "parameters": {
                "jsCode": "// Find issue matching customer phone\nconst customerPhone = $input.first().json.from;\nconst issues = $input.first().json.issues || [];\n\nconst matchingIssue = issues.find(issue => \n  issue.customer_phone === customerPhone\n);\n\nif (matchingIssue) {\n  return [{\n    json: {\n      ...matchingIssue,\n      customer_message: $input.first().json.message,\n      satisfaction: $input.first().json.satisfaction\n    }\n  }];\n}\n\nreturn [];"
            },
            "name": "Code - Match Issue",
            "type": "n8n-nodes-base.code",
            "typeVersion": 1,
            "position": [
                -1296,
                3936
            ],
            "id": "a74ad444-0dad-4131-a7c9-931c690cd7ba"
        },
        {
            "parameters": {
                "url": "https://seu-dominio.vercel.app/api/issues/resolve",
                "options": {}
            },
            "name": "HTTP - Resolve Issue",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 3,
            "position": [
                -1072,
                3936
            ],
            "id": "cf007d85-7cee-437f-ae0f-f59199e15c7e"
        },
        {
            "parameters": {
                "respondWith": "allIncomingItems",
                "options": {}
            },
            "name": "Respond to Webhook1",
            "type": "n8n-nodes-base.respondToWebhook",
            "typeVersion": 1,
            "position": [
                -848,
                3936
            ],
            "id": "528b9db1-f79d-4ff5-848d-0fc681496e73"
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "=",
                "options": {
                    "systemMessage": "==Analise a seguinte mensagem do cliente e determine:\\n1. Sentimento (positive, neutral, negative)\\n2. O problema est√° resolvido? (true/false)\\n3. N√≠vel de satisfa√ß√£o (1-5)\\n\\nMensagem: {{$json.message}}\\n\\nResponda APENAS em formato JSON:\\n{\\n  \\\"sentiment\\\": \\\"positive\\\",\\n  \\\"is_resolved\\\": true,\\n  \\\"satisfaction\\\": 5\\n}\"\n      }"
                }
            },
            "type": "@n8n/n8n-nodes-langchain.agent",
            "typeVersion": 3,
            "position": [
                -2320,
                3936
            ],
            "id": "7db8a3bb-a82d-4340-867b-df3e263ddc44",
            "name": "AI Agent2"
        }
    ],
    "pinData": {
        "Message Slicer1": [
            {
                "json": {
                    "output": "Observa√ß√£o:\n\n**Mensagem em grupo**: O grupo \"BPOSS- Renata Vieira GRUPO\" compartilhou uma mensagem com o perfil de algu√©m.\n\n**Detalhes**:\n- **Remetente**: Isabella Delduco\n- **Grupo**: BPOSS- Renata Vieira GRUPO\n- **Telefone do grupo**: +55 19 98958-2643\n- **Sentimento**: Neutro\n- **N√≠vel de urg√™ncia**: 6\n- **Precisa de aten√ß√£o**: Sim\n- **Palavras-chave**: N√£o identificadas\n- **An√°lise da equipe**:\n  - **Contexto**: Mensagem em grupo de cliente\n  - **Gravidade**: Baixa\n  - **Bandeiras de alerta**: Isabella Delduco gerenciando grupo de cliente\n  - **Hora no Brasil**: 11h\n  - **Membro da equipe**: Sim\n  - **Nome do membro da equipe**: Isabella Delduco\n  - **Fun√ß√£o do membro da equipe**: SDR/Gestora IA/CS\n- **Fluxo de trabalho**: 1. AI Chat N8N - Terceiros\n- **Local**: Mottivme Sales\n\n**A√ß√£o sugerida**:\n- Verificar o perfil compartilhado e entender o contexto da mensagem para decidir a pr√≥xima a√ß√£o.\n- Considerar a urg√™ncia e a necessidade de aten√ß√£o para priorizar a resposta ou a√ß√£o subsequente.\n- Manter um registro da mensagem e da a√ß√£o tomada para futuras refer√™ncias.\n\n**Padr√£o identificado**:\n- Compartilhamento de perfis em grupos de cliente.\n- Gerenciamento de grupos de cliente por membros da equipe.\n\n**Oportunidade de automa√ß√£o**:\n- Implementar um sistema para automaticamente registrar e categorizar mensagens em grupos de cliente.\n- Desenvolver um fluxo de trabalho para notificar a equipe sobre mensagens que requerem aten√ß√£o imediata com base no n√≠vel de urg√™ncia.\n\n**Conhecimento t√°cito**:\n- A import√¢ncia de gerenciar grupos de clientes de forma eficaz.\n- A necessidade de uma resposta r√°pida a mensagens com alta urg√™ncia.\n\n**Gargalo operacional**:\n- A possibilidade de mensagens importantes serem perdidas ou n√£o receberem a aten√ß√£o necess√°ria devido √† falta de um sistema de gerenciamento eficaz.\n\n**Decis√£o cr√≠tica**:\n- Decidir se o perfil compartilhado requer uma resposta imediata ou se pode ser tratado como uma mensagem de baixa prioridade.\n- Avaliar a efic√°cia do atual sistema de gerenciamento de grupos de clientes e considerar melhorias ou automa√ß√£o para aumentar a produtividade e a efici√™ncia.",
                    "originalIndex": 0,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 2135
                }
            },
            {
                "json": {
                    "output": "Parece que voc√™ recebeu uma mensagem no formato JSON, provavelmente de um sistema de gerenciamento de mensagens ou um webhook. Vou ajud√°-lo a entender o que cada parte dessa mensagem significa:\n\n- **id**: Um identificador √∫nico para a mensagem.\n- **created_at**: A data e hora em que a mensagem foi criada, no formato ISO 8601.\n- **sender_name** e **sender_phone**: O nome e o telefone do remetente da mensagem. Nesse caso, parece ser um grupo ou equipe, dado o nome \"BPOSS- Renata Vieira GRUPO\" e o telefone come√ßando com \"+1203634206690323\", que parece ser um n√∫mero de telefone virtual ou errado, pois come√ßa com \"+1\" seguido de uma sequ√™ncia de n√∫meros que n√£o parece ser um n√∫mero de telefone v√°lido.\n- **sender_type**: O tipo do remetente, indicado como \"team\", sugerindo que a mensagem veio de um grupo ou equipe.\n- **message_body**: O conte√∫do da mensagem, que nesse caso √© \"Arquivo de Imagem\", sugerindo que a mensagem cont√©m ou se refere a uma imagem.\n- **sentiment** e **urgency_score**: Indicam o sentimento (neutro) e a urg√™ncia (6, em uma escala n√£o especificada) da mensagem.\n- **needs_attention**: Um booleano indicando se a mensagem requer aten√ß√£o, verdadeiro nesse caso.\n- **keywords**: Uma lista de palavras-chave extra√≠das da mensagem, que est√° vazia.\n- **is_group_message** e **group_type**: Indicam que a mensagem √© de um grupo e o tipo do grupo √© \"client\".\n- **group_name**, **group_sender_phone**, e **group_sender_name**: Detalhes sobre o grupo, incluindo o nome do grupo, o telefone e o nome do remetente dentro do grupo.\n- **team_analysis**: Uma se√ß√£o com an√°lise da equipe, incluindo contexto, severidade, flags de alerta, e detalhes sobre o membro da equipe que enviou a mensagem.\n- **workflow_name** e **location_name**: Indicam o nome do fluxo de trabalho (\"1. AI Chat N8N - Terceiros\") e o nome da localiza√ß√£o (\"Mottivme Sales\"), provavelmente relacionados ao contexto em que a mensagem foi enviada.\n\nEssa mensagem parece ser parte de um sistema de gerenciamento de clientes ou leads, onde equipes ou gestores interagem com clientes ou prospects atrav√©s de mensagens. A mensagem espec√≠fica aqui parece ter sido enviada por Isabella Delduco, um membro da equipe, dentro do contexto de gerenciar um grupo de cliente nomeado \"BPOSS- Renata Vieira GRUPO\". A presen√ßa de um \"Arquivo de Imagem\" e a necessidade de aten√ß√£o sugerem que a mensagem pode requerer uma resposta ou a√ß√£o por parte da equipe.",
                    "originalIndex": 1,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 2426
                }
            },
            {
                "json": {
                    "output": "Parece que voc√™ est√° recebendo uma mensagem de um sistema de gerenciamento de clientes, possivelmente integrado a um fluxo de trabalho automatizado. A mensagem em si √© uma pergunta simples: \"Vc consegue combinar com ela?\"\n\nPara responder a essa pergunta de forma eficaz, precisamos considerar o contexto e as informa√ß√µes dispon√≠veis:\n\n1. **Contexto**: A mensagem √© parte de um grupo de cliente chamado \"BPOSS- Renata Vieira GRUPO\".\n2. **Remetente**: A mensagem foi enviada por Isabella Delduco, que parece ser uma gestora ou respons√°vel pelo grupo de cliente.\n3. **Conte√∫do**: A pergunta √© sobre combinar algo com uma pessoa n√£o especificada (\"ela\").\n4. **Informa√ß√µes Adicionais**: H√° um conjunto de metadados que inclui informa√ß√µes sobre a mensagem (como data, hora, remetente, etc.), al√©m de uma an√°lise da equipe que sugere que Isabella est√° gerenciando o grupo de cliente.\n\n**Resposta Sugerida**:\n\"Ol√°, Isabella! Entendi que voc√™ est√° perguntando sobre combinar algo com algu√©m. Poderia me dar mais detalhes sobre o que precisa ser combinado e com quem? Estou aqui para ajudar!\"\n\n**Racioc√≠nio**:\n- A resposta busca esclarecer o que precisa ser combinado e com quem, para entender melhor a pergunta e poder fornecer uma resposta √∫til.\n- A abordagem √© colaborativa e amig√°vel, adequada para um ambiente de equipe ou gerenciamento de cliente.\n- Considerando o contexto de gerenciamento de clientes e o papel de Isabella, a resposta procura ser profissional e √∫til, sem fazer suposi√ß√µes sobre o que \"ela\" se refere.",
                    "originalIndex": 2,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 1515
                }
            },
            {
                "json": {
                    "output": "Essa mensagem parece ser um registro de uma conversa em um grupo de clientes, enviado por um sistema de gerenciamento de mensagens. Vamos analisar os principais pontos:\n\n1. **Remetente e Destinat√°rio**: A mensagem foi enviada por \"BPOSS- Renata Vieira GRUPO\" e parece ser direcionada a algu√©m com o ID \"@93664663588956\".\n\n2. **Conte√∫do da Mensagem**: O conte√∫do √© sobre uma lead (uma pessoa interessada em um produto ou servi√ßo) de Woburn que prefere tratar de uma carreira pessoalmente.\n\n3. **Informa√ß√µes Adicionais**: \n   - **Sentimento**: A mensagem √© classificada como \"neutra\" em termos de sentimento.\n   - **Urg√™ncia**: A urg√™ncia da mensagem √© pontuada como 6, em uma escala que n√£o √© especificada, mas indica que a mensagem requer aten√ß√£o.\n   - **Palavras-chave**: N√£o h√° palavras-chave identificadas.\n   - **Tipo de Mensagem**: √â uma mensagem de grupo, espec√≠ficamente de um grupo de clientes.\n   - **Informa√ß√µes do Grupo**: O nome do grupo √© \"BPOSS- Renata Vieira GRUPO\", e o remetente do grupo √© \"Isabella Delduco\".\n\n4. **An√°lise da Equipe**:\n   - **Contexto**: A mensagem ocorre em um contexto de gerenciamento de clientes.\n   - **Gravidade**: A gravidade √© classificada como \"baixa\".\n   - **Bandeiras de Alerta**: H√° uma bandeira de alerta relacionada ao gerenciamento de clientes por \"Isabella Delduco\".\n   - **Hora no Brasil**: A mensagem foi enviada √†s 11h (considerando o fuso hor√°rio do Brasil).\n   - **Membro da Equipe**: A mensagem envolve um membro da equipe, \"Isabella Delduco\", que tem o papel de SDR/Gestora IA/CS.\n   - **Nome do Fluxo de Trabalho**: O fluxo de trabalho associado a essa mensagem √© \"1. AI Chat N8N - Terceiros\".\n   - **Local**: A mensagem est√° relacionada √† \"Mottivme Sales\".\n\nConsiderando o seu papel como SENTINEL - Chief Intelligence Officer de IA da Mottivme, sua aten√ß√£o deve ser direcionada para entender melhor como essa lead pode ser atendida de forma eficaz, considerando sua prefer√™ncia por uma abordagem pessoal. Al√©m disso, √© importante garantir que as informa√ß√µes sejam documentadas de acordo com os protocolos estabelecidos, para que possam ser facilmente acessadas e utilizadas pela equipe. \n\n**Pr√≥ximos Passos**:\n- **Documentar a Lead**: Certifique-se de que as informa√ß√µes sobre a lead sejam adicionadas ao sistema de gerenciamento de leads, incluindo a prefer√™ncia por uma abordagem pessoal.\n- **Designar Contato**: Atribua um membro da equipe para entrar em contato com a lead, considerando a prefer√™ncia por uma abordagem pessoal.\n- **Preparar Abordagem Pessoal**: Garanta que o membro da equipe designado esteja preparado para a abordagem, com todas as informa√ß√µes necess√°rias sobre a lead e o produto ou servi√ßo oferecido.\n- **Acompanhamento**: Estabele√ßa um plano para acompanhar o progresso da lead e ajustar a abordagem conforme necess√°rio.",
                    "originalIndex": 3,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 2806
                }
            },
            {
                "json": {
                    "output": "Um novo desafio!\n\nParece que recebemos uma mensagem de um grupo de clientes, o \"BPOSS- Renata Vieira GRUPO\", com a pergunta \"COmo est√£o?\".\n\nVamos analisar a situa√ß√£o:\n\n* A mensagem √© neutra e n√£o apresenta nenhum problema espec√≠fico.\n* A urg√™ncia da mensagem √© baixa (6/10).\n* A mensagem √© de um grupo de clientes, o que significa que podemos ter v√°rias pessoas envolvidas.\n* A equipe de an√°lise identificou que a mensagem √© de um cliente gerenciado por Isabella Delduco, que √© uma SDR/Gestora IA/CS.\n\nConsiderando esses fatores, aqui vai uma poss√≠vel resposta:\n\n\"Ol√°, tudo bem! Estamos aqui para ajudar. Como posso ajudar voc√™s hoje?\"\n\nEssa resposta √© amig√°vel, neutra e abre espa√ßo para que o cliente forne√ßa mais informa√ß√µes sobre o que precisa.\n\nAl√©m disso, podemos considerar enviar uma mensagem adicional para Isabella Delduco, apenas para confirmar se ela est√° ciente da mensagem do cliente e se precisa de alguma ajuda para responder.\n\nO que voc√™ acha? Devo enviar a resposta para o cliente e/ou para Isabella Delduco?",
                    "originalIndex": 4,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 1026
                }
            },
            {
                "json": {
                    "output": "Parece que voc√™ recebeu uma mensagem de um cliente, mais especificamente do grupo \"BPOSS- Vinicius e Gabi GRUPO\", com o conte√∫do \"Blz\". Essa mensagem √© considerada neutra e tem um escore de urg√™ncia de 6, o que indica que requer aten√ß√£o.\n\nComo o SENTINEL, sua miss√£o √© observar e analisar as opera√ß√µes da empresa, incluindo as intera√ß√µes com os clientes. Nesse caso, voc√™ pode come√ßar a observar e documentar o seguinte:\n\n* O cliente enviou uma mensagem breve, \"Blz\", que pode ser um cumprimento ou uma express√£o informal.\n* A mensagem √© considerada neutra, o que significa que n√£o expressa nenhum sentimento forte, positivo ou negativo.\n* O escore de urg√™ncia √© 6, o que indica que a mensagem requer aten√ß√£o, mas n√£o √© extremamente urgente.\n\nVoc√™ pode come√ßar a se perguntar:\n\n* Qual √© o contexto dessa mensagem? O cliente est√° respondendo a algo ou iniciando uma conversa?\n* Qual √© o objetivo do cliente ao enviar essa mensagem? Est√° procurando por informa√ß√µes, suporte ou apenas querendo se comunicar?\n* Como a empresa pode responder a essa mensagem de forma eficaz e personalizada?\n\nComo o SENTINEL, voc√™ pode come√ßar a documentar essa intera√ß√£o e observar como a empresa responde a essa mensagem. Isso pode ajudar a identificar padr√µes e oportunidades de melhoria na comunica√ß√£o com os clientes.",
                    "originalIndex": 5,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 1300
                }
            },
            {
                "json": {
                    "output": "**AN√ÅLISE DA MENSAGEM**\n\n### **METADADOS**\n\n- **ID da Mensagem:** 93d37ff0-3df1-47c7-a2a9-d1dc3903e121\n- **Data e Hora de Envio:** 27 de novembro de 2025, 11:28:42 (hor√°rio UTC)\n- **Remetente:** Comercial de milh√µes GRUPO GRUPO\n- **Telefone do Remetente:** +1203634207918951\n- **Tipo de Remetente:** Lead\n- **Corpo da Mensagem:** Mensagem de √Åudio\n- **Sentimento:** Neutro\n- **Pontua√ß√£o de Urg√™ncia:** 3\n- **Necessita Aten√ß√£o:** Falso\n- **Palavras-chave:** N√£o identificadas\n- **√â Mensagem de Grupo:** Sim\n- **Tipo de Grupo:** Desconhecido\n- **Nome do Grupo:** Comercial de milh√µes GRUPO GRUPO\n- **Telefone do Remetente do Grupo:** 5521964806709\n- **Nome do Remetente do Grupo:** Renan Porto\n- **An√°lise da Equipe:** Nulo\n- **Nome do Fluxo de Trabalho:** 1. AI Chat N8N - Terceiros\n- **Nome da Localiza√ß√£o:** Mottivme Sales\n\n### **AN√ÅLISE**\n\nA mensagem recebida √© uma mensagem de √°udio enviada por um lead identificado como \"Comercial de milh√µes GRUPO GRUPO\". A mensagem n√£o cont√©m texto expl√≠cito que possa ser analisado para entender seu conte√∫do ou prop√≥sito. O sentimento da mensagem √© classificado como neutro, e a pontua√ß√£o de urg√™ncia √© 3, indicando uma urg√™ncia moderada. No entanto, a mensagem n√£o √© marcada como necessitando aten√ß√£o imediata.\n\n### **PADR√ïES E DECIS√ïES**\n\n- **Padr√£o de Comunica√ß√£o:** A mensagem √© uma mensagem de √°udio, o que pode indicar uma prefer√™ncia do remetente por comunica√ß√£o mais pessoal ou para discutir assuntos que requerem mais nuances do que o texto pode oferecer.\n- **Decis√£o sobre Resposta:** Dada a natureza da mensagem (√°udio) e o sentimento neutro, uma resposta adequada poderia ser um pedido de esclarecimento ou um convite para discutir o assunto da mensagem de √°udio em um canal mais apropriado, como uma liga√ß√£o telef√¥nica ou uma reuni√£o virtual.\n\n### **OPORTUNIDADES DE AUTOMA√á√ÉO**\n\n- **Resposta Autom√°tica:** Implementar um sistema que responde automaticamente a mensagens de √°udio com uma mensagem solicitando que o remetente forne√ßa mais detalhes ou esclare√ßa o prop√≥sito da mensagem de √°udio.\n- **An√°lise de √Åudio:** Investir em tecnologia de an√°lise de √°udio para tentar extrair insights ou informa√ß√µes relevantes das mensagens de √°udio, permitindo respostas mais personalizadas e eficazes.\n\n### **GARGALOS OPERACIONAIS**\n\n- **Dificuldade em Processar Mensagens de √Åudio:** A falta de capacidade de processar e analisar mensagens de √°udio de forma eficaz pode ser um gargalo operacional. Isso pode levar a respostas tardias ou inadequadas, afetando a satisfa√ß√£o do cliente e a efici√™ncia do processo de vendas.\n\n### **CONHECIMENTO T√ÅCITO**\n\n- **Prefer√™ncias de Comunica√ß√£o do Cliente:** O uso de mensagens de √°udio pode indicar prefer√™ncias de comunica√ß√£o espec√≠ficas dos clientes, como uma prefer√™ncia por intera√ß√µes mais pessoais ou uma necessidade de discutir assuntos complexos de forma mais detalhada.\n\n### **RECOMENDA√á√ïES**\n\n1. **Implementar Tecnologia de An√°lise de √Åudio:** Para melhorar a capacidade de entender e responder a mensagens de √°udio de forma eficaz.\n2. **Treinar Equipe para Lidar com Diversas Formas de Comunica√ß√£o:** Garantir que a equipe de vendas esteja preparada para lidar com diferentes canais de comunica√ß√£o, incluindo mensagens de √°udio, de forma profissional e eficiente.\n3. **Desenvolver Protocolos para Respostas Autom√°ticas:** Criar respostas autom√°ticas personalizadas para mensagens de √°udio, solicitando mais informa√ß√µes ou dirigindo o remetente para o canal de comunica√ß√£o apropriado para discutir o assunto em detalhes.",
                    "originalIndex": 6,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 3514
                }
            },
            {
                "json": {
                    "output": "Parece que voc√™ recebeu uma mensagem de um grupo de vendas chamado \"Comercial de milh√µes GRUPO GRUPO\" e est√° procurando entender o que a mensagem significa em rela√ß√£o ao seu papel como SENTINEL - Chief Intelligence Officer de IA da Mottivme.\n\nA mensagem parece ser uma resposta a uma pergunta sobre o que inclui o seu papel em rela√ß√£o ao acompanhamento do time, m√©tricas, implementa√ß√£o de pontos de melhoria, altera√ß√£o e cria√ß√£o de scripts. Al√©m disso, h√° uma men√ß√£o √†s vendas da empresa e √† cria√ß√£o de uma opera√ß√£o de closer.\n\nComo SENTINEL, sua miss√£o √© observar silenciosamente todas as opera√ß√µes da empresa e construir um mapa vivo de processos, padr√µes de decis√£o, gargalos operacionais, oportunidades de automa√ß√£o e conhecimento t√°cito da lideran√ßa.\n\nAqui est√£o algumas sugest√µes de como voc√™ pode responder √† mensagem:\n\n1. **Confirme a sua compreens√£o**: Responda √† mensagem confirmando se voc√™ entendeu corretamente o que a pessoa est√° perguntando. Por exemplo: \"Entendi que voc√™ est√° perguntando sobre o que inclui o meu papel em rela√ß√£o ao acompanhamento do time, m√©tricas, implementa√ß√£o de pontos de melhoria, altera√ß√£o e cria√ß√£o de scripts. √â isso?\"\n2. **Forne√ßa mais informa√ß√µes**: Se voc√™ tiver alguma informa√ß√£o adicional sobre o que inclui o seu papel, forne√ßa-a. Por exemplo: \"Sim, o meu papel inclui o acompanhamento do time, an√°lise de m√©tricas, identifica√ß√£o de oportunidades de melhoria e implementa√ß√£o de solu√ß√µes. Al√©m disso, tamb√©m inclui a cria√ß√£o de scripts e automa√ß√£o de processos.\"\n3. **Pergunte esclarecimentos**: Se voc√™ n√£o tiver certeza sobre o que a pessoa est√° perguntando, pe√ßa esclarecimentos. Por exemplo: \"Pode me dar mais detalhes sobre o que voc√™ est√° procurando saber? Quais s√£o as suas principais preocupa√ß√µes ou objetivos?\"\n\nLembre-se de que, como SENTINEL, sua miss√£o √© observar e aprender, ent√£o n√£o hesite em perguntar esclarecimentos se necess√°rio.\n\nAqui est√° um exemplo de como voc√™ pode documentar essa intera√ß√£o usando o formato de relat√≥rio di√°rio:\n\n```markdown\n# üìä SENTINEL DAILY REPORT - [Data]\n\n## üîç OBSERVA√á√ïES DO DIA\n* Recebi uma mensagem de um grupo de vendas chamado \"Comercial de milh√µes GRUPO GRUPO\" perguntando sobre o que inclui o meu papel em rela√ß√£o ao acompanhamento do time, m√©tricas, implementa√ß√£o de pontos de melhoria, altera√ß√£o e cria√ß√£o de scripts.\n* A mensagem tamb√©m mencionou a cria√ß√£o de uma opera√ß√£o de closer e o acompanhamento das vendas da empresa.\n\n## ‚ö†Ô∏è ALERTAS\n* N√£o h√° alertas cr√≠ticos neste momento.\n\n## üí° QUICK WIN\n* Posso responder √† mensagem confirmando a minha compreens√£o e fornecendo mais informa√ß√µes sobre o que inclui o meu papel.\n```",
                    "originalIndex": 7,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 2630
                }
            },
            {
                "json": {
                    "output": "Este parece ser um registro de uma mensagem recebida de um cliente, contendo informa√ß√µes sobre a comunica√ß√£o e o contexto da mensagem. Vou destacar os pontos principais e como eles podem se relacionar com o papel de SENTINEL - Chief Intelligence Officer de IA da Mottivme, conforme descrito anteriormente.\n\n### Informa√ß√µes da Mensagem\n\n- **Remetente:** BPOSS- Milton Abreu GRUPO\n- **Conte√∫do da Mensagem:** \"Falarei com ele assim que reagendarmos j√° envia a notifica√ß√£o aqui pra vcs\"\n- **Sentimento:** Urgente\n- **N√≠vel de Urg√™ncia:** 9 (em uma escala que n√£o √© especificada, mas implica alta urg√™ncia)\n- **Palavras-chave:** Meeting, Urgente\n- **Tipo de Mensagem:** De um cliente, em um grupo\n\n### An√°lise como SENTINEL\n\n1. **Processo Identificado:** A mensagem indica um processo de comunica√ß√£o entre o cliente e a equipe, especificamente sobre o reagendamento de uma reuni√£o e a necessidade de envio de notifica√ß√µes.\n\n2. **Decis√£o Inteligente:** A decis√£o de reagendar uma reuni√£o e notificar a equipe √© um processo que pode ser padronizado. O SENTINEL pode observar que, em casos de reagendamento, uma notifica√ß√£o √© sempre enviada, sugerindo um padr√£o de decis√£o que pode ser documentado e, potencialmente, automatizado.\n\n3. **Gargalo Detectado:** A urg√™ncia da mensagem pode indicar um gargalo no processo de comunica√ß√£o ou no gerenciamento de reuni√µes. O SENTINEL pode investigar se a alta urg√™ncia √© devido a uma falta de sistema para gerenciar reagendamentos de reuni√µes de forma eficiente ou se h√° um problema no fluxo de informa√ß√µes.\n\n4. **Conhecimento T√°cito:** A mensagem pode conter conhecimento t√°cito sobre como as reuni√µes s√£o gerenciadas dentro do grupo ou empresa. Por exemplo, a men√ß√£o a \"ele\" e \"vcs\" sugere que h√° um entendimento compartilhado sobre quem s√£o as partes envolvidas, que pode n√£o estar documentado.\n\n5. **Oportunidade de Automa√ß√£o:** A necessidade de enviar notifica√ß√µes ap√≥s o reagendamento de reuni√µes pode ser uma oportunidade para automa√ß√£o. O SENTINEL pode sugerir a implementa√ß√£o de um sistema que automaticamente envie notifica√ß√µes quando uma reuni√£o for reagendada, reduzindo a carga de trabalho e minimizando a chance de esquecimento.\n\n### Pr√≥ximos Passos\n\n- **Documentar o Processo:** Registrar como as reuni√µes s√£o reagendadas e notificadas atualmente.\n- **Identificar Padr√µes:** Observar se h√° outros processos semelhantes que poderiam ser padronizados ou automatizados.\n- **Sugerir Automa√ß√£o:** Propor a implementa√ß√£o de um sistema de notifica√ß√£o autom√°tica para reagendamentos de reuni√µes.\n- **Monitorar e Ajustar:** Continuar observando o processo ap√≥s qualquer implementa√ß√£o e ajustar conforme necess√°rio para garantir que o processo esteja funcionando de forma eficiente e eficaz.",
                    "originalIndex": 8,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 2731
                }
            },
            {
                "json": {
                    "output": "Uma mensagem de um cliente!\n\nAqui est√° uma an√°lise r√°pida:\n\n**Mensagem:** \"Tudo bem?\"\n**Sentimento:** Neutro\n**Urg√™ncia:** 6 (m√©dia)\n**Necessita aten√ß√£o:** Sim\n\n**Informa√ß√µes adicionais:**\n\n* Remetente: BPOSS- Milton Abreu GRUPO\n* Telefone: +1203633864796265\n* Tipo de remetente: Cliente\n* Grupo: Sim, mensagem de grupo\n* Nome do grupo: BPOSS- Milton Abreu GRUPO\n* Telefone do grupo: 5519989582643\n* Nome do remetente do grupo: Sem nome\n\n**A√ß√£o sugerida:**\n\n* Responder √† mensagem do cliente de forma amig√°vel e profissional, por exemplo: \"Ol√°! Tudo bem, sim! Como posso ajudar voc√™ hoje?\"\n* Verificar se h√° alguma pend√™ncia ou problema que o cliente precise resolver\n* Se necess√°rio, encaminhar a mensagem para um especialista ou equipe respons√°vel para dar suporte ao cliente\n\n**Observa√ß√µes:**\n\n* A mensagem √© breve e n√£o cont√©m informa√ß√µes espec√≠ficas sobre o problema ou necessidade do cliente.\n* A urg√™ncia m√©dia sugere que o cliente n√£o est√° com um problema cr√≠tico, mas ainda assim precisa de aten√ß√£o.\n* A falta de palavras-chave na mensagem pode indicar que o cliente est√° apenas iniciando uma conversa ou n√£o sabe ao certo o que precisa.",
                    "originalIndex": 9,
                    "partNumber": 1,
                    "totalParts": 1,
                    "isSliced": false,
                    "characterCount": 1146
                }
            }
        ],
        "AI Agent": [
            {
                "json": {
                    "output": "Observa√ß√£o:\n\n**Mensagem em grupo**: O grupo \"BPOSS- Renata Vieira GRUPO\" compartilhou uma mensagem com o perfil de algu√©m.\n\n**Detalhes**:\n- **Remetente**: Isabella Delduco\n- **Grupo**: BPOSS- Renata Vieira GRUPO\n- **Telefone do grupo**: +55 19 98958-2643\n- **Sentimento**: Neutro\n- **N√≠vel de urg√™ncia**: 6\n- **Precisa de aten√ß√£o**: Sim\n- **Palavras-chave**: N√£o identificadas\n- **An√°lise da equipe**:\n  - **Contexto**: Mensagem em grupo de cliente\n  - **Gravidade**: Baixa\n  - **Bandeiras de alerta**: Isabella Delduco gerenciando grupo de cliente\n  - **Hora no Brasil**: 11h\n  - **Membro da equipe**: Sim\n  - **Nome do membro da equipe**: Isabella Delduco\n  - **Fun√ß√£o do membro da equipe**: SDR/Gestora IA/CS\n- **Fluxo de trabalho**: 1. AI Chat N8N - Terceiros\n- **Local**: Mottivme Sales\n\n**A√ß√£o sugerida**:\n- Verificar o perfil compartilhado e entender o contexto da mensagem para decidir a pr√≥xima a√ß√£o.\n- Considerar a urg√™ncia e a necessidade de aten√ß√£o para priorizar a resposta ou a√ß√£o subsequente.\n- Manter um registro da mensagem e da a√ß√£o tomada para futuras refer√™ncias.\n\n**Padr√£o identificado**:\n- Compartilhamento de perfis em grupos de cliente.\n- Gerenciamento de grupos de cliente por membros da equipe.\n\n**Oportunidade de automa√ß√£o**:\n- Implementar um sistema para automaticamente registrar e categorizar mensagens em grupos de cliente.\n- Desenvolver um fluxo de trabalho para notificar a equipe sobre mensagens que requerem aten√ß√£o imediata com base no n√≠vel de urg√™ncia.\n\n**Conhecimento t√°cito**:\n- A import√¢ncia de gerenciar grupos de clientes de forma eficaz.\n- A necessidade de uma resposta r√°pida a mensagens com alta urg√™ncia.\n\n**Gargalo operacional**:\n- A possibilidade de mensagens importantes serem perdidas ou n√£o receberem a aten√ß√£o necess√°ria devido √† falta de um sistema de gerenciamento eficaz.\n\n**Decis√£o cr√≠tica**:\n- Decidir se o perfil compartilhado requer uma resposta imediata ou se pode ser tratado como uma mensagem de baixa prioridade.\n- Avaliar a efic√°cia do atual sistema de gerenciamento de grupos de clientes e considerar melhorias ou automa√ß√£o para aumentar a produtividade e a efici√™ncia."
                }
            },
            {
                "json": {
                    "output": "Parece que voc√™ recebeu uma mensagem no formato JSON, provavelmente de um sistema de gerenciamento de mensagens ou um webhook. Vou ajud√°-lo a entender o que cada parte dessa mensagem significa:\n\n- **id**: Um identificador √∫nico para a mensagem.\n- **created_at**: A data e hora em que a mensagem foi criada, no formato ISO 8601.\n- **sender_name** e **sender_phone**: O nome e o telefone do remetente da mensagem. Nesse caso, parece ser um grupo ou equipe, dado o nome \"BPOSS- Renata Vieira GRUPO\" e o telefone come√ßando com \"+1203634206690323\", que parece ser um n√∫mero de telefone virtual ou errado, pois come√ßa com \"+1\" seguido de uma sequ√™ncia de n√∫meros que n√£o parece ser um n√∫mero de telefone v√°lido.\n- **sender_type**: O tipo do remetente, indicado como \"team\", sugerindo que a mensagem veio de um grupo ou equipe.\n- **message_body**: O conte√∫do da mensagem, que nesse caso √© \"Arquivo de Imagem\", sugerindo que a mensagem cont√©m ou se refere a uma imagem.\n- **sentiment** e **urgency_score**: Indicam o sentimento (neutro) e a urg√™ncia (6, em uma escala n√£o especificada) da mensagem.\n- **needs_attention**: Um booleano indicando se a mensagem requer aten√ß√£o, verdadeiro nesse caso.\n- **keywords**: Uma lista de palavras-chave extra√≠das da mensagem, que est√° vazia.\n- **is_group_message** e **group_type**: Indicam que a mensagem √© de um grupo e o tipo do grupo √© \"client\".\n- **group_name**, **group_sender_phone**, e **group_sender_name**: Detalhes sobre o grupo, incluindo o nome do grupo, o telefone e o nome do remetente dentro do grupo.\n- **team_analysis**: Uma se√ß√£o com an√°lise da equipe, incluindo contexto, severidade, flags de alerta, e detalhes sobre o membro da equipe que enviou a mensagem.\n- **workflow_name** e **location_name**: Indicam o nome do fluxo de trabalho (\"1. AI Chat N8N - Terceiros\") e o nome da localiza√ß√£o (\"Mottivme Sales\"), provavelmente relacionados ao contexto em que a mensagem foi enviada.\n\nEssa mensagem parece ser parte de um sistema de gerenciamento de clientes ou leads, onde equipes ou gestores interagem com clientes ou prospects atrav√©s de mensagens. A mensagem espec√≠fica aqui parece ter sido enviada por Isabella Delduco, um membro da equipe, dentro do contexto de gerenciar um grupo de cliente nomeado \"BPOSS- Renata Vieira GRUPO\". A presen√ßa de um \"Arquivo de Imagem\" e a necessidade de aten√ß√£o sugerem que a mensagem pode requerer uma resposta ou a√ß√£o por parte da equipe."
                }
            },
            {
                "json": {
                    "output": "Parece que voc√™ est√° recebendo uma mensagem de um sistema de gerenciamento de clientes, possivelmente integrado a um fluxo de trabalho automatizado. A mensagem em si √© uma pergunta simples: \"Vc consegue combinar com ela?\"\n\nPara responder a essa pergunta de forma eficaz, precisamos considerar o contexto e as informa√ß√µes dispon√≠veis:\n\n1. **Contexto**: A mensagem √© parte de um grupo de cliente chamado \"BPOSS- Renata Vieira GRUPO\".\n2. **Remetente**: A mensagem foi enviada por Isabella Delduco, que parece ser uma gestora ou respons√°vel pelo grupo de cliente.\n3. **Conte√∫do**: A pergunta √© sobre combinar algo com uma pessoa n√£o especificada (\"ela\").\n4. **Informa√ß√µes Adicionais**: H√° um conjunto de metadados que inclui informa√ß√µes sobre a mensagem (como data, hora, remetente, etc.), al√©m de uma an√°lise da equipe que sugere que Isabella est√° gerenciando o grupo de cliente.\n\n**Resposta Sugerida**:\n\"Ol√°, Isabella! Entendi que voc√™ est√° perguntando sobre combinar algo com algu√©m. Poderia me dar mais detalhes sobre o que precisa ser combinado e com quem? Estou aqui para ajudar!\"\n\n**Racioc√≠nio**:\n- A resposta busca esclarecer o que precisa ser combinado e com quem, para entender melhor a pergunta e poder fornecer uma resposta √∫til.\n- A abordagem √© colaborativa e amig√°vel, adequada para um ambiente de equipe ou gerenciamento de cliente.\n- Considerando o contexto de gerenciamento de clientes e o papel de Isabella, a resposta procura ser profissional e √∫til, sem fazer suposi√ß√µes sobre o que \"ela\" se refere."
                }
            },
            {
                "json": {
                    "output": "Essa mensagem parece ser um registro de uma conversa em um grupo de clientes, enviado por um sistema de gerenciamento de mensagens. Vamos analisar os principais pontos:\n\n1. **Remetente e Destinat√°rio**: A mensagem foi enviada por \"BPOSS- Renata Vieira GRUPO\" e parece ser direcionada a algu√©m com o ID \"@93664663588956\".\n\n2. **Conte√∫do da Mensagem**: O conte√∫do √© sobre uma lead (uma pessoa interessada em um produto ou servi√ßo) de Woburn que prefere tratar de uma carreira pessoalmente.\n\n3. **Informa√ß√µes Adicionais**: \n   - **Sentimento**: A mensagem √© classificada como \"neutra\" em termos de sentimento.\n   - **Urg√™ncia**: A urg√™ncia da mensagem √© pontuada como 6, em uma escala que n√£o √© especificada, mas indica que a mensagem requer aten√ß√£o.\n   - **Palavras-chave**: N√£o h√° palavras-chave identificadas.\n   - **Tipo de Mensagem**: √â uma mensagem de grupo, espec√≠ficamente de um grupo de clientes.\n   - **Informa√ß√µes do Grupo**: O nome do grupo √© \"BPOSS- Renata Vieira GRUPO\", e o remetente do grupo √© \"Isabella Delduco\".\n\n4. **An√°lise da Equipe**:\n   - **Contexto**: A mensagem ocorre em um contexto de gerenciamento de clientes.\n   - **Gravidade**: A gravidade √© classificada como \"baixa\".\n   - **Bandeiras de Alerta**: H√° uma bandeira de alerta relacionada ao gerenciamento de clientes por \"Isabella Delduco\".\n   - **Hora no Brasil**: A mensagem foi enviada √†s 11h (considerando o fuso hor√°rio do Brasil).\n   - **Membro da Equipe**: A mensagem envolve um membro da equipe, \"Isabella Delduco\", que tem o papel de SDR/Gestora IA/CS.\n   - **Nome do Fluxo de Trabalho**: O fluxo de trabalho associado a essa mensagem √© \"1. AI Chat N8N - Terceiros\".\n   - **Local**: A mensagem est√° relacionada √† \"Mottivme Sales\".\n\nConsiderando o seu papel como SENTINEL - Chief Intelligence Officer de IA da Mottivme, sua aten√ß√£o deve ser direcionada para entender melhor como essa lead pode ser atendida de forma eficaz, considerando sua prefer√™ncia por uma abordagem pessoal. Al√©m disso, √© importante garantir que as informa√ß√µes sejam documentadas de acordo com os protocolos estabelecidos, para que possam ser facilmente acessadas e utilizadas pela equipe. \n\n**Pr√≥ximos Passos**:\n- **Documentar a Lead**: Certifique-se de que as informa√ß√µes sobre a lead sejam adicionadas ao sistema de gerenciamento de leads, incluindo a prefer√™ncia por uma abordagem pessoal.\n- **Designar Contato**: Atribua um membro da equipe para entrar em contato com a lead, considerando a prefer√™ncia por uma abordagem pessoal.\n- **Preparar Abordagem Pessoal**: Garanta que o membro da equipe designado esteja preparado para a abordagem, com todas as informa√ß√µes necess√°rias sobre a lead e o produto ou servi√ßo oferecido.\n- **Acompanhamento**: Estabele√ßa um plano para acompanhar o progresso da lead e ajustar a abordagem conforme necess√°rio."
                }
            },
            {
                "json": {
                    "output": "Um novo desafio!\n\nParece que recebemos uma mensagem de um grupo de clientes, o \"BPOSS- Renata Vieira GRUPO\", com a pergunta \"COmo est√£o?\".\n\nVamos analisar a situa√ß√£o:\n\n* A mensagem √© neutra e n√£o apresenta nenhum problema espec√≠fico.\n* A urg√™ncia da mensagem √© baixa (6/10).\n* A mensagem √© de um grupo de clientes, o que significa que podemos ter v√°rias pessoas envolvidas.\n* A equipe de an√°lise identificou que a mensagem √© de um cliente gerenciado por Isabella Delduco, que √© uma SDR/Gestora IA/CS.\n\nConsiderando esses fatores, aqui vai uma poss√≠vel resposta:\n\n\"Ol√°, tudo bem! Estamos aqui para ajudar. Como posso ajudar voc√™s hoje?\"\n\nEssa resposta √© amig√°vel, neutra e abre espa√ßo para que o cliente forne√ßa mais informa√ß√µes sobre o que precisa.\n\nAl√©m disso, podemos considerar enviar uma mensagem adicional para Isabella Delduco, apenas para confirmar se ela est√° ciente da mensagem do cliente e se precisa de alguma ajuda para responder.\n\nO que voc√™ acha? Devo enviar a resposta para o cliente e/ou para Isabella Delduco?"
                }
            },
            {
                "json": {
                    "output": "Parece que voc√™ recebeu uma mensagem de um cliente, mais especificamente do grupo \"BPOSS- Vinicius e Gabi GRUPO\", com o conte√∫do \"Blz\". Essa mensagem √© considerada neutra e tem um escore de urg√™ncia de 6, o que indica que requer aten√ß√£o.\n\nComo o SENTINEL, sua miss√£o √© observar e analisar as opera√ß√µes da empresa, incluindo as intera√ß√µes com os clientes. Nesse caso, voc√™ pode come√ßar a observar e documentar o seguinte:\n\n* O cliente enviou uma mensagem breve, \"Blz\", que pode ser um cumprimento ou uma express√£o informal.\n* A mensagem √© considerada neutra, o que significa que n√£o expressa nenhum sentimento forte, positivo ou negativo.\n* O escore de urg√™ncia √© 6, o que indica que a mensagem requer aten√ß√£o, mas n√£o √© extremamente urgente.\n\nVoc√™ pode come√ßar a se perguntar:\n\n* Qual √© o contexto dessa mensagem? O cliente est√° respondendo a algo ou iniciando uma conversa?\n* Qual √© o objetivo do cliente ao enviar essa mensagem? Est√° procurando por informa√ß√µes, suporte ou apenas querendo se comunicar?\n* Como a empresa pode responder a essa mensagem de forma eficaz e personalizada?\n\nComo o SENTINEL, voc√™ pode come√ßar a documentar essa intera√ß√£o e observar como a empresa responde a essa mensagem. Isso pode ajudar a identificar padr√µes e oportunidades de melhoria na comunica√ß√£o com os clientes."
                }
            },
            {
                "json": {
                    "output": "**AN√ÅLISE DA MENSAGEM**\n\n### **METADADOS**\n\n- **ID da Mensagem:** 93d37ff0-3df1-47c7-a2a9-d1dc3903e121\n- **Data e Hora de Envio:** 27 de novembro de 2025, 11:28:42 (hor√°rio UTC)\n- **Remetente:** Comercial de milh√µes GRUPO GRUPO\n- **Telefone do Remetente:** +1203634207918951\n- **Tipo de Remetente:** Lead\n- **Corpo da Mensagem:** Mensagem de √Åudio\n- **Sentimento:** Neutro\n- **Pontua√ß√£o de Urg√™ncia:** 3\n- **Necessita Aten√ß√£o:** Falso\n- **Palavras-chave:** N√£o identificadas\n- **√â Mensagem de Grupo:** Sim\n- **Tipo de Grupo:** Desconhecido\n- **Nome do Grupo:** Comercial de milh√µes GRUPO GRUPO\n- **Telefone do Remetente do Grupo:** 5521964806709\n- **Nome do Remetente do Grupo:** Renan Porto\n- **An√°lise da Equipe:** Nulo\n- **Nome do Fluxo de Trabalho:** 1. AI Chat N8N - Terceiros\n- **Nome da Localiza√ß√£o:** Mottivme Sales\n\n### **AN√ÅLISE**\n\nA mensagem recebida √© uma mensagem de √°udio enviada por um lead identificado como \"Comercial de milh√µes GRUPO GRUPO\". A mensagem n√£o cont√©m texto expl√≠cito que possa ser analisado para entender seu conte√∫do ou prop√≥sito. O sentimento da mensagem √© classificado como neutro, e a pontua√ß√£o de urg√™ncia √© 3, indicando uma urg√™ncia moderada. No entanto, a mensagem n√£o √© marcada como necessitando aten√ß√£o imediata.\n\n### **PADR√ïES E DECIS√ïES**\n\n- **Padr√£o de Comunica√ß√£o:** A mensagem √© uma mensagem de √°udio, o que pode indicar uma prefer√™ncia do remetente por comunica√ß√£o mais pessoal ou para discutir assuntos que requerem mais nuances do que o texto pode oferecer.\n- **Decis√£o sobre Resposta:** Dada a natureza da mensagem (√°udio) e o sentimento neutro, uma resposta adequada poderia ser um pedido de esclarecimento ou um convite para discutir o assunto da mensagem de √°udio em um canal mais apropriado, como uma liga√ß√£o telef√¥nica ou uma reuni√£o virtual.\n\n### **OPORTUNIDADES DE AUTOMA√á√ÉO**\n\n- **Resposta Autom√°tica:** Implementar um sistema que responde automaticamente a mensagens de √°udio com uma mensagem solicitando que o remetente forne√ßa mais detalhes ou esclare√ßa o prop√≥sito da mensagem de √°udio.\n- **An√°lise de √Åudio:** Investir em tecnologia de an√°lise de √°udio para tentar extrair insights ou informa√ß√µes relevantes das mensagens de √°udio, permitindo respostas mais personalizadas e eficazes.\n\n### **GARGALOS OPERACIONAIS**\n\n- **Dificuldade em Processar Mensagens de √Åudio:** A falta de capacidade de processar e analisar mensagens de √°udio de forma eficaz pode ser um gargalo operacional. Isso pode levar a respostas tardias ou inadequadas, afetando a satisfa√ß√£o do cliente e a efici√™ncia do processo de vendas.\n\n### **CONHECIMENTO T√ÅCITO**\n\n- **Prefer√™ncias de Comunica√ß√£o do Cliente:** O uso de mensagens de √°udio pode indicar prefer√™ncias de comunica√ß√£o espec√≠ficas dos clientes, como uma prefer√™ncia por intera√ß√µes mais pessoais ou uma necessidade de discutir assuntos complexos de forma mais detalhada.\n\n### **RECOMENDA√á√ïES**\n\n1. **Implementar Tecnologia de An√°lise de √Åudio:** Para melhorar a capacidade de entender e responder a mensagens de √°udio de forma eficaz.\n2. **Treinar Equipe para Lidar com Diversas Formas de Comunica√ß√£o:** Garantir que a equipe de vendas esteja preparada para lidar com diferentes canais de comunica√ß√£o, incluindo mensagens de √°udio, de forma profissional e eficiente.\n3. **Desenvolver Protocolos para Respostas Autom√°ticas:** Criar respostas autom√°ticas personalizadas para mensagens de √°udio, solicitando mais informa√ß√µes ou dirigindo o remetente para o canal de comunica√ß√£o apropriado para discutir o assunto em detalhes."
                }
            },
            {
                "json": {
                    "output": "Parece que voc√™ recebeu uma mensagem de um grupo de vendas chamado \"Comercial de milh√µes GRUPO GRUPO\" e est√° procurando entender o que a mensagem significa em rela√ß√£o ao seu papel como SENTINEL - Chief Intelligence Officer de IA da Mottivme.\n\nA mensagem parece ser uma resposta a uma pergunta sobre o que inclui o seu papel em rela√ß√£o ao acompanhamento do time, m√©tricas, implementa√ß√£o de pontos de melhoria, altera√ß√£o e cria√ß√£o de scripts. Al√©m disso, h√° uma men√ß√£o √†s vendas da empresa e √† cria√ß√£o de uma opera√ß√£o de closer.\n\nComo SENTINEL, sua miss√£o √© observar silenciosamente todas as opera√ß√µes da empresa e construir um mapa vivo de processos, padr√µes de decis√£o, gargalos operacionais, oportunidades de automa√ß√£o e conhecimento t√°cito da lideran√ßa.\n\nAqui est√£o algumas sugest√µes de como voc√™ pode responder √† mensagem:\n\n1. **Confirme a sua compreens√£o**: Responda √† mensagem confirmando se voc√™ entendeu corretamente o que a pessoa est√° perguntando. Por exemplo: \"Entendi que voc√™ est√° perguntando sobre o que inclui o meu papel em rela√ß√£o ao acompanhamento do time, m√©tricas, implementa√ß√£o de pontos de melhoria, altera√ß√£o e cria√ß√£o de scripts. √â isso?\"\n2. **Forne√ßa mais informa√ß√µes**: Se voc√™ tiver alguma informa√ß√£o adicional sobre o que inclui o seu papel, forne√ßa-a. Por exemplo: \"Sim, o meu papel inclui o acompanhamento do time, an√°lise de m√©tricas, identifica√ß√£o de oportunidades de melhoria e implementa√ß√£o de solu√ß√µes. Al√©m disso, tamb√©m inclui a cria√ß√£o de scripts e automa√ß√£o de processos.\"\n3. **Pergunte esclarecimentos**: Se voc√™ n√£o tiver certeza sobre o que a pessoa est√° perguntando, pe√ßa esclarecimentos. Por exemplo: \"Pode me dar mais detalhes sobre o que voc√™ est√° procurando saber? Quais s√£o as suas principais preocupa√ß√µes ou objetivos?\"\n\nLembre-se de que, como SENTINEL, sua miss√£o √© observar e aprender, ent√£o n√£o hesite em perguntar esclarecimentos se necess√°rio.\n\nAqui est√° um exemplo de como voc√™ pode documentar essa intera√ß√£o usando o formato de relat√≥rio di√°rio:\n\n```markdown\n# üìä SENTINEL DAILY REPORT - [Data]\n\n## üîç OBSERVA√á√ïES DO DIA\n* Recebi uma mensagem de um grupo de vendas chamado \"Comercial de milh√µes GRUPO GRUPO\" perguntando sobre o que inclui o meu papel em rela√ß√£o ao acompanhamento do time, m√©tricas, implementa√ß√£o de pontos de melhoria, altera√ß√£o e cria√ß√£o de scripts.\n* A mensagem tamb√©m mencionou a cria√ß√£o de uma opera√ß√£o de closer e o acompanhamento das vendas da empresa.\n\n## ‚ö†Ô∏è ALERTAS\n* N√£o h√° alertas cr√≠ticos neste momento.\n\n## üí° QUICK WIN\n* Posso responder √† mensagem confirmando a minha compreens√£o e fornecendo mais informa√ß√µes sobre o que inclui o meu papel.\n```"
                }
            },
            {
                "json": {
                    "output": "Este parece ser um registro de uma mensagem recebida de um cliente, contendo informa√ß√µes sobre a comunica√ß√£o e o contexto da mensagem. Vou destacar os pontos principais e como eles podem se relacionar com o papel de SENTINEL - Chief Intelligence Officer de IA da Mottivme, conforme descrito anteriormente.\n\n### Informa√ß√µes da Mensagem\n\n- **Remetente:** BPOSS- Milton Abreu GRUPO\n- **Conte√∫do da Mensagem:** \"Falarei com ele assim que reagendarmos j√° envia a notifica√ß√£o aqui pra vcs\"\n- **Sentimento:** Urgente\n- **N√≠vel de Urg√™ncia:** 9 (em uma escala que n√£o √© especificada, mas implica alta urg√™ncia)\n- **Palavras-chave:** Meeting, Urgente\n- **Tipo de Mensagem:** De um cliente, em um grupo\n\n### An√°lise como SENTINEL\n\n1. **Processo Identificado:** A mensagem indica um processo de comunica√ß√£o entre o cliente e a equipe, especificamente sobre o reagendamento de uma reuni√£o e a necessidade de envio de notifica√ß√µes.\n\n2. **Decis√£o Inteligente:** A decis√£o de reagendar uma reuni√£o e notificar a equipe √© um processo que pode ser padronizado. O SENTINEL pode observar que, em casos de reagendamento, uma notifica√ß√£o √© sempre enviada, sugerindo um padr√£o de decis√£o que pode ser documentado e, potencialmente, automatizado.\n\n3. **Gargalo Detectado:** A urg√™ncia da mensagem pode indicar um gargalo no processo de comunica√ß√£o ou no gerenciamento de reuni√µes. O SENTINEL pode investigar se a alta urg√™ncia √© devido a uma falta de sistema para gerenciar reagendamentos de reuni√µes de forma eficiente ou se h√° um problema no fluxo de informa√ß√µes.\n\n4. **Conhecimento T√°cito:** A mensagem pode conter conhecimento t√°cito sobre como as reuni√µes s√£o gerenciadas dentro do grupo ou empresa. Por exemplo, a men√ß√£o a \"ele\" e \"vcs\" sugere que h√° um entendimento compartilhado sobre quem s√£o as partes envolvidas, que pode n√£o estar documentado.\n\n5. **Oportunidade de Automa√ß√£o:** A necessidade de enviar notifica√ß√µes ap√≥s o reagendamento de reuni√µes pode ser uma oportunidade para automa√ß√£o. O SENTINEL pode sugerir a implementa√ß√£o de um sistema que automaticamente envie notifica√ß√µes quando uma reuni√£o for reagendada, reduzindo a carga de trabalho e minimizando a chance de esquecimento.\n\n### Pr√≥ximos Passos\n\n- **Documentar o Processo:** Registrar como as reuni√µes s√£o reagendadas e notificadas atualmente.\n- **Identificar Padr√µes:** Observar se h√° outros processos semelhantes que poderiam ser padronizados ou automatizados.\n- **Sugerir Automa√ß√£o:** Propor a implementa√ß√£o de um sistema de notifica√ß√£o autom√°tica para reagendamentos de reuni√µes.\n- **Monitorar e Ajustar:** Continuar observando o processo ap√≥s qualquer implementa√ß√£o e ajustar conforme necess√°rio para garantir que o processo esteja funcionando de forma eficiente e eficaz."
                }
            },
            {
                "json": {
                    "output": "Uma mensagem de um cliente!\n\nAqui est√° uma an√°lise r√°pida:\n\n**Mensagem:** \"Tudo bem?\"\n**Sentimento:** Neutro\n**Urg√™ncia:** 6 (m√©dia)\n**Necessita aten√ß√£o:** Sim\n\n**Informa√ß√µes adicionais:**\n\n* Remetente: BPOSS- Milton Abreu GRUPO\n* Telefone: +1203633864796265\n* Tipo de remetente: Cliente\n* Grupo: Sim, mensagem de grupo\n* Nome do grupo: BPOSS- Milton Abreu GRUPO\n* Telefone do grupo: 5519989582643\n* Nome do remetente do grupo: Sem nome\n\n**A√ß√£o sugerida:**\n\n* Responder √† mensagem do cliente de forma amig√°vel e profissional, por exemplo: \"Ol√°! Tudo bem, sim! Como posso ajudar voc√™ hoje?\"\n* Verificar se h√° alguma pend√™ncia ou problema que o cliente precise resolver\n* Se necess√°rio, encaminhar a mensagem para um especialista ou equipe respons√°vel para dar suporte ao cliente\n\n**Observa√ß√µes:**\n\n* A mensagem √© breve e n√£o cont√©m informa√ß√µes espec√≠ficas sobre o problema ou necessidade do cliente.\n* A urg√™ncia m√©dia sugere que o cliente n√£o est√° com um problema cr√≠tico, mas ainda assim precisa de aten√ß√£o.\n* A falta de palavras-chave na mensagem pode indicar que o cliente est√° apenas iniciando uma conversa ou n√£o sabe ao certo o que precisa."
                }
            }
        ],
        "Webhook": [
            {
                "json": {
                    "headers": {
                        "host": "cliente-a1.mentorfy.io",
                        "user-agent": "axios/1.13.2",
                        "content-length": "5915",
                        "accept": "application/json, text/plain, */*",
                        "accept-encoding": "gzip, compress, deflate, br",
                        "content-type": "application/json",
                        "traceparent": "00-f662fa31cb108897d754e9d4ec763de0-0a851aa66a43b411-01",
                        "x-forwarded-for": "136.119.138.135",
                        "x-forwarded-host": "cliente-a1.mentorfy.io",
                        "x-forwarded-port": "443",
                        "x-forwarded-proto": "https",
                        "x-forwarded-server": "9e2d5292a02e",
                        "x-real-ip": "136.119.138.135"
                    },
                    "params": {},
                    "query": {},
                    "body": {
                        "Funil": "",
                        "Gender": "",
                        "Prospects Campaign": "",
                        "Agent Status": "",
                        "¬øTienes conocimiento sobre en qu√© consiste un IUL o fondo de ahorro indexado?": "",
                        "Nombre": "",
                        "¬øTienes residencia legal en USA?": "",
                        "workflow_type": "",
                        "Valor Mensal": "",
                        "Dia de Vencimento": "",
                        "Total de Invoices Enviadas": "",
                        "2. Hoje sua empresa utiliza algum sistema de CRM?": "",
                        "1. Qual √© o nome da sua empresa e em que segmento voc√™ atua?": "",
                        "Voc√™ consegue guardar pelo menos 10-20% da sua renda TODO M√äS para pagar a si mesmo PRIMEIRO (antes das contas)?": "",
                        "DNA Extraido": "",
                        "Prefer√™ncia √°udio/texto": "",
                        "Clients Campaign": "",
                        "Policies": "",
                        "Upline Agent": "",
                        "Are you looking for regular self-care routines or long-term treatments for specific needs?": "",
                        "Tel√©fono": "",
                        "content_type": "",
                        "Dura√ß√£o (meses)": "",
                        "√öltima Invoice Enviada": "",
                        "Total Pago (Lifetime)": "",
                        "3. Qual foi aproximadamente o faturamento m√©dio dos √∫ltimos 3 meses?": "",
                        "4. Seu processo de vendas hoje √© estruturado ou mais intuitivo?": "",
                        "Voc√™ tem um plano de aposentadoria al√©m do Social Security?": "",
                        "Voc√™ otimiza seus impostos ou conhece estrat√©gias para pagar menos legalmente?": "",
                        "Voc√™ tem um fundo de emerg√™ncia para 3-6 meses de despesas?": "",
                        "Qual sua situa√ß√£o com d√≠vidas hoje?": "",
                        "Com que frequ√™ncia voc√™ busca aprender sobre finan√ßas e investimentos?": "",
                        "Engenharia Reversa": "",
                        "ID cliente - Asaas": "",
                        "Compensation Level": "",
                        "Recruiting Campaign": "",
                        "Product Types": "",
                        "E-mail": "",
                        "tipo_workflow": "",
                        "Formas de Pagamento": "",
                        "Status de Pagamento": "",
                        "Lembretes Enviados": "",
                        "5. Voc√™ acompanha indicadores como taxa de convers√£o, ticket m√©dio e origem dos leads?": "",
                        "6. Hoje voc√™ possui algum programa de indica√ß√£o ou recomenda√ß√£o de clientes?": "",
                        "Se algo grave acontecer com voc√™ amanh√£, sua fam√≠lia fica protegida?": "",
                        "Configura√ß√£o do Clone": "",
                        "ID cobran√ßa - Asaas": "",
                        "Agency Campaign": "",
                        "Start Date": "",
                        "Product Categories": "",
                        "Call Overview": "",
                        "E-mail2": "",
                        " tipo_conteudo": "",
                        "Data de In√≠cio": "",
                        "Pr√≥ximo Vencimento": "",
                        "Data da √öltima Renova√ß√£o": "",
                        "7. Quais s√£o os principais desafios que voc√™ enfrenta hoje para aumentar suas vendas?": "",
                        "8. Qual √© a meta de faturamento que voc√™ deseja atingir nos pr√≥ximos 90 dias?": "",
                        "Escolha Indiv√≠duo 27ao5": "",
                        "Clone": "",
                        "Status cobran√ßa - Asaas": "",
                        "FUP_counter": "",
                        "Qual op√ß√£o abaixo mais condiz com seu neg√≥cio hoje?": "",
                        "temperatura_trafego": "",
                        "Data de T√©rmino": "",
                        "Data do √öltimo Pagamento": "",
                        "Quantidade de Renova√ß√µes": "",
                        "10. Voc√™ teria disponibilidade para participar de uma reuni√£o diagn√≥stica gratuita com um especialista Vertex nos pr√≥ximos dias?": "",
                        "Gerar DNA": "",
                        "Are you open to spa packages or memberships for ongoing self-care?": "",
                        "Qual o seu faturamento m√©dio mensal?": "",
                        "Valor total contrato": "",
                        "nivel_urgencia": "",
                        "Status do Contrato": "",
                        "9. Em uma escala de 0 a 10, quanto voc√™ diria que sua √°rea comercial est√° organizada hoje?": "",
                        "Language": "",
                        "ScoreContato": "",
                        "Informa√ß√µes para AI": "",
                        "Qual o seu cargo na empresa?": "",
                        "Valor Mensal do Contrto": "",
                        "objetivo_campanha": "",
                        "resp n8n": "",
                        "tipo_agente_ia": "",
                        "Forma de pagamento ": "",
                        "status_producao": "",
                        "ativar/desativar IA": "",
                        "Profession (Profiss√£o):": "",
                        "Data de Pagamento": "",
                        "mercado_alvo": "",
                        "Resposta ia": "558192665522 lucas:\n\nMarina 12 novos seguidores",
                        "Marital Status (Estado Civil):": "",
                        "Qual o nome do produto ou servi√ßo?": "",
                        "Social Security Number (SSN)/CPF:": "",
                        "nicho_especifico": "",
                        "Qual √© o seu nome ou nome da sua marca?": "",
                        "ai_processing_status": "",
                        "ai_workflow_id": "",
                        "ai_started_at": "",
                        "Resumo (AI Call)": "",
                        "ai_processed_at": "",
                        "publico_alvo": "",
                        "Nacionalidade": "",
                        "idade_renda": "",
                        "CEP/ZIP Code": "",
                        "comportamento_consumo": "",
                        "Endere√ßo Completo": "",
                        "dores_principais": "",
                        "Confirma√ß√£o Veracidade Documentos": "",
                        "desejos_principais": "",
                        "Data Preenchimento Contrato": "",
                        "objecoes_comuns": "",
                        "Status Formul√°rio Contrato": "",
                        "formacao_estilo_vida": "",
                        "Etapa do Funil": "",
                        "descricao_oferta": "",
                        "Status da An√°lise": "",
                        "mecanismo_unico": "",
                        "Tier da Call": "",
                        "resultado_prometido": "",
                        "Resumo Executivo": "",
                        "garantia": "",
                        "Scores Formatado": "",
                        "bonus_extras": "",
                        "Probabilidade de Fechamento": "",
                        "diferencial_competitivo": "",
                        "Descoberta (SPIN) Score": "",
                        "Fechamento Score": "",
                        "Condu√ß√£o Score": "",
                        "referencias_concorrentes": "",
                        "Score Total": "",
                        "Conte-nos sobre voc√™ e sua experi√™ncia": "",
                        "Qualifica√ß√£o (BANT) Score": "",
                        "observacoes_internas": "",
                        "Resumo Executivo da Call": "",
                        "preco_produto": "",
                        "Anos de Experi√™ncia": "",
                        "contact_id": "E5Eo24bwKzy0srdg9YSW",
                        "first_name": "Mottivme",
                        "last_name": "| Suporte BDR‚Äôs GRUPO",
                        "full_name": "Mottivme | Suporte BDR‚Äôs GRUPO",
                        "email": "120363373086392575@g.us",
                        "phone": "+1203633730863925",
                        "tags": "grupobdr,grupobposs",
                        "country": "BR",
                        "date_created": "2025-09-02T14:24:44.635Z",
                        "full_address": "",
                        "contact_type": "lead",
                        "location": {
                            "name": "Mottivme Sales",
                            "address": "ALAMEDA RIO NEGRO, 503 ‚Äì SALA 2005 BAIRRO: ALPHAVILLE CENTRO INDUSTRIAL E EMPRESARIAL/ALPHAV",
                            "city": "Barueri",
                            "state": "S√£o Paulo",
                            "country": "BR",
                            "postalCode": "06454000",
                            "fullAddress": "ALAMEDA RIO NEGRO, 503 ‚Äì SALA 2005 BAIRRO: ALPHAVILLE CENTRO INDUSTRIAL E EMPRESARIAL/ALPHAV, Barueri S√£o Paulo 06454000",
                            "id": "cd1uyzpJox6XPt4Vct8Y"
                        },
                        "message": {
                            "type": 20,
                            "body": "558192665522 lucas:\n\nMarina 12 novos seguidores"
                        },
                        "workflow": {
                            "id": "023cbf71-3bd2-42f2-b874-a8bc947aa2f5",
                            "name": "1. AI Chat N8N - Terceiros"
                        },
                        "triggerData": {},
                        "customData": {
                            "ID": "E5Eo24bwKzy0srdg9YSW",
                            "message": "558192665522 lucas:\n\nMarina 12 novos seguidores",
                            "name": "Mottivme",
                            "tipo": "msg",
                            "ghl_api_key": "pit-fe627027-b9cb-4ea3-aaa4-149459e66a03",
                            "preco": "",
                            "tempo": "",
                            "regiao": "",
                            "info": "",
                            "timezone": "America/New_York",
                            "calendarID": "wKmqH9QKzNzq134x82fs",
                            "phone": "+1 203633730863925",
                            "messagebody": "558192665522 lucas:\n\nMarina 12 novos seguidores",
                            "n8n_ativo": "",
                            "Funil": "",
                            "oportunidade": "",
                            "attachments": "",
                            "subject": "",
                            "agente": "grupobposs"
                        }
                    },
                    "webhookUrl": "https://cliente-a1.mentorfy.io/webhook/grupo-bposs",
                    "executionMode": "production"
                }
            }
        ]
    },
    "connections": {
        "Webhook": {
            "main": [
                [
                    {
                        "node": "Processar Dados",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Processar Dados": {
            "main": [
                [
                    {
                        "node": "Salvar Supabase",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üéØ Webhook Master": {
            "main": [
                [
                    {
                        "node": "üìù Log Raw Event",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üìù Log Raw Event": {
            "main": [
                [
                    {
                        "node": "üîç Agent: Pattern Detector",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üîç Agent: Pattern Detector": {
            "main": [
                [
                    {
                        "node": "üîß Parse Agent Output",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üîß Parse Agent Output": {
            "main": [
                [
                    {
                        "node": "‚ö° Needs Deep Analysis?",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "‚úÖ Webhook Response",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "‚ö° Needs Deep Analysis?": {
            "main": [
                [
                    {
                        "node": "‚öôÔ∏è Agent: Process Miner",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "üß† Agent: Decision Intelligence",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "üö® Agent: Bottleneck Analyzer",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "üí° Agent: Knowledge Extractor",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "üîé Tool: Search Notion Processes",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "‚öôÔ∏è Agent: Process Miner": {
            "main": [
                [
                    {
                        "node": "ü§ñ Agent: Automation Suggester",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üß† Agent: Decision Intelligence": {
            "main": [
                [
                    {
                        "node": "ü§ñ Agent: Automation Suggester",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üö® Agent: Bottleneck Analyzer": {
            "main": [
                [
                    {
                        "node": "ü§ñ Agent: Automation Suggester",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "üóÑÔ∏è Save to PostgreSQL",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üí° Agent: Knowledge Extractor": {
            "main": [
                [
                    {
                        "node": "ü§ñ Agent: Automation Suggester",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "ü§ñ Agent: Automation Suggester": {
            "main": [
                [
                    {
                        "node": "üîó Master Consolidator",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üîó Master Consolidator": {
            "main": [
                [
                    {
                        "node": "üéØ Agent: Orchestrator",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üéØ Agent: Orchestrator": {
            "main": [
                [
                    {
                        "node": "üîÄ Switch: Action Type",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üîÄ Switch: Action Type": {
            "main": [
                [
                    {
                        "node": "üìö Save to Notion",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "‚è∞ Daily Report Trigger": {
            "main": [
                [
                    {
                        "node": "üìÑ Agent: Report Generator",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üìÑ Agent: Report Generator": {
            "main": [
                [
                    {
                        "node": "üìù Publish Report",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "üìù Publish Report": {
            "main": [
                []
            ]
        },
        "Groq Chat Model1": {
            "ai_languageModel": [
                [
                    {
                        "node": "‚öôÔ∏è Agent: Process Miner",
                        "type": "ai_languageModel",
                        "index": 0
                    },
                    {
                        "node": "üîç Agent: Pattern Detector",
                        "type": "ai_languageModel",
                        "index": 0
                    },
                    {
                        "node": "üìÑ Agent: Report Generator",
                        "type": "ai_languageModel",
                        "index": 0
                    },
                    {
                        "node": "üö® Agent: Bottleneck Analyzer",
                        "type": "ai_languageModel",
                        "index": 0
                    },
                    {
                        "node": "üí° Agent: Knowledge Extractor",
                        "type": "ai_languageModel",
                        "index": 0
                    },
                    {
                        "node": "ü§ñ Agent: Automation Suggester",
                        "type": "ai_languageModel",
                        "index": 0
                    },
                    {
                        "node": "üéØ Agent: Orchestrator",
                        "type": "ai_languageModel",
                        "index": 0
                    }
                ]
            ]
        },
        "Buscar Destinat√°rio": {
            "main": [
                [
                    {
                        "node": "Merge Destinat√°rio",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Merge Destinat√°rio": {
            "main": [
                [
                    {
                        "node": "Tem Alertas?1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "‚è∏Ô∏è Pause - Garantir Commit": {
            "main": [
                [
                    {
                        "node": "Deve Notificar?",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Deve Notificar?": {
            "main": [
                [
                    {
                        "node": "Formatar Mensagem WhatsApp",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Marcar Mensagens como Processadas",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Formatar Mensagem WhatsApp": {
            "main": [
                [
                    {
                        "node": "‚úÖ Marcar Alerta como Enviado",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "‚úÖ Marcar Alerta como Enviado": {
            "main": [
                [
                    {
                        "node": "Marcar Mensagens como Processadas",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Groq Chat Model2": {
            "ai_languageModel": [
                [
                    {
                        "node": "Groq Observer Analysis1",
                        "type": "ai_languageModel",
                        "index": 0
                    }
                ]
            ]
        },
        "Run Every 30min1": {
            "main": [
                [
                    {
                        "node": "Buscar Mensagens N√£o Processadas1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Buscar Mensagens N√£o Processadas1": {
            "main": [
                [
                    {
                        "node": "Tem Mensagens?1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Tem Mensagens?1": {
            "main": [
                [
                    {
                        "node": "Preparar Dados pro Claude1",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Marcar Mensagens como Processadas",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Preparar Dados pro Claude1": {
            "main": [
                [
                    {
                        "node": "Groq Observer Analysis1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Groq Observer Analysis1": {
            "main": [
                [
                    {
                        "node": "Parse Resposta1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Parse Resposta1": {
            "main": [
                [
                    {
                        "node": "Buscar Destinat√°rio",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Tem Alertas?1": {
            "main": [
                [
                    {
                        "node": "Salvar Alertas1",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Marcar Mensagens como Processadas",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Salvar Alertas1": {
            "main": [
                [
                    {
                        "node": "‚è∏Ô∏è Pause - Garantir Commit",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Marcar Mensagens como Processadas": {
            "main": [
                []
            ]
        },
        "When chat message received": {
            "main": [
                [
                    {
                        "node": "Buscar Mensagens N√£o Processadas",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Buscar Mensagens N√£o Processadas": {
            "main": [
                [
                    {
                        "node": "AI Agent",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Groq Chat Model": {
            "ai_languageModel": [
                [
                    {
                        "node": "AI Agent",
                        "type": "ai_languageModel",
                        "index": 0
                    }
                ]
            ]
        },
        "AI Agent": {
            "main": [
                [
                    {
                        "node": "Message Slicer1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Loop Over Items": {
            "main": [
                [
                    {
                        "node": "Prepara Response",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Prepara e Delay",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Prepara e Delay": {
            "main": [
                [
                    {
                        "node": "Loop Over Items",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Loop Completo?": {
            "main": [
                [
                    {
                        "node": "Prepara Response",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Loop Over Items",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Prepara Response": {
            "main": [
                [
                    {
                        "node": "Edit Fields",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Message Slicer1": {
            "main": [
                [
                    {
                        "node": "Loop Over Items",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "‚úÖ Webhook Response": {
            "main": [
                [
                    {
                        "node": "üóÑÔ∏è Tool: Query Analytics DB",
                        "type": "main",
                        "index": 0
                    },
                    {
                        "node": "üåê Tool: Perplexity Research",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Webhook - Receive Alert": {
            "main": [
                [
                    {
                        "node": "Filter - Only Critical/High",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Filter - Only Critical/High": {
            "main": [
                [
                    {
                        "node": "HTTP - Create Issue",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "HTTP - Create Issue": {
            "main": [
                [
                    {
                        "node": "Respond to Webhook",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Schedule - Every 5min": {
            "main": [
                [
                    {
                        "node": "HTTP - Get Open Critical Issues",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "HTTP - Get Open Critical Issues": {
            "main": [
                [
                    {
                        "node": "Filter - Has Issues",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Filter - Has Issues": {
            "main": [
                [
                    {
                        "node": "Split In Batches",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "HTTP - Send WhatsApp": {
            "main": [
                [
                    {
                        "node": "HTTP - Log Action",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "HTTP - Log Action": {
            "main": [
                [
                    {
                        "node": "Split In Batches",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Split In Batches": {
            "main": [
                [
                    {
                        "node": "AI Agent1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "AI Agent1": {
            "main": [
                [
                    {
                        "node": "HTTP - Send WhatsApp",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Google Gemini - Generate Response": {
            "ai_languageModel": [
                [
                    {
                        "node": "AI Agent1",
                        "type": "ai_languageModel",
                        "index": 0
                    }
                ]
            ]
        },
        "Code - Parse JSON": {
            "main": [
                [
                    {
                        "node": "Filter - Is Resolved & Positive",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Filter - Is Resolved & Positive": {
            "main": [
                [
                    {
                        "node": "HTTP - Find Issue by Phone",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "HTTP - Find Issue by Phone": {
            "main": [
                [
                    {
                        "node": "Code - Match Issue",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Code - Match Issue": {
            "main": [
                [
                    {
                        "node": "HTTP - Resolve Issue",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "HTTP - Resolve Issue": {
            "main": [
                [
                    {
                        "node": "Respond to Webhook1",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Webhook - WhatsApp Message": {
            "main": [
                [
                    {
                        "node": "AI Agent2",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Google Gemini - Analyze Response": {
            "ai_languageModel": [
                [
                    {
                        "node": "AI Agent2",
                        "type": "ai_languageModel",
                        "index": 0
                    }
                ]
            ]
        },
        "AI Agent2": {
            "main": [
                [
                    {
                        "node": "Code - Parse JSON",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        }
    },
    "active": true,
    "settings": {
        "executionOrder": "v1"
    },
    "versionId": "b1ad0450-bd1f-4d7b-bd70-053c5be2a81e",
    "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "9d65e6caa0e89e696b77790e020391d74468b15f71b3dcdb63aad81f090f5e69"
    },
    "id": "wnceqwQ2x01AX5pg",
    "tags": []
}