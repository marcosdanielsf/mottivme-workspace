{
  "name": "VSL",
  "nodes": [
    {
      "parameters": {
        "path": "ai-vsl-pura",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        240,
        1984
      ],
      "id": "2e19a075-0a46-4685-965e-9aa9769c2f7a",
      "name": "Webhook",
      "webhookId": "b4956976-e25a-4059-9927-d85ff8f2a4cb"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "eddee505-29e2-48b9-896a-d5e3cfde89f5",
                    "leftValue": "={{ $json.query.action }}",
                    "rightValue": "generateProjectDetails",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Generate Project Details"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.query.action }}",
                    "rightValue": "generateAngles",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "bb5b6fd5-ef22-451b-a23d-258044aafcca"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Generate Angles"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "ac785a02-782f-4af2-af20-bb23cf885a71",
                    "leftValue": "={{ $json.query.action }}",
                    "rightValue": "generateScript",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Generate Script"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "0ab60fd9-c2a2-4e7d-81dc-07737b2f95dc",
                    "leftValue": "={{ $json.query.action }}",
                    "rightValue": "feedbackIteration",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Feedback Iteration"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        512,
        1968
      ],
      "id": "02a8d88d-30ee-4df8-a055-54e07f481a0f",
      "name": "Switch"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "64113609-6adf-4693-8d51-ede088d97d38",
              "name": "userprompt",
              "value": "=Research about the Customer Profile in very detailed manner for the product, what exactly are the products & the description the core people who need the product. Unique insights &\n\nProduct Name: {{ $json['Product Name'] }}\n\nProduct Description: {{ $json['Product Notes'] }}\n\nAlso go into rabbithole and absolutely understand the what and who they are selling to, get details on the product the ingredients, and everything along with their brand narrative, what they are and what they are not. Be specific about the details.",
              "type": "string"
            },
            {
              "id": "6e2a7bf9-caf8-4ce7-a51f-8f348b315c71",
              "name": "Language",
              "value": "={{ $json['0Ô∏è‚É£ Language'] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1632,
        1520
      ],
      "id": "76493976-4fbf-4bcb-90a0-01b60aa25d3f",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9cb2899d-6988-4c9b-b966-2da679725175",
              "name": "ScriptIdea",
              "value": "={{ $json.output }}",
              "type": "array"
            },
            {
              "id": "bbb3d4d9-766f-4afe-aeff-c1b4b9650bbc",
              "name": "project",
              "value": "=[\"{{ $('Switch').item.json.query.recordId }}\"]",
              "type": "array"
            }
          ]
        },
        "options": {
          "ignoreConversionErrors": true
        }
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2160,
        1760
      ],
      "id": "22311f96-4a87-4f95-ab42-476d293313ee",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "fieldToSplitOut": "ScriptIdea",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        2304,
        1760
      ],
      "id": "e2589747-ddb3-47aa-8c5b-93b712b6fdc1",
      "name": "Split Out"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"name\": \"video_script_array_schema\",\n  \"schema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"video_scripts\": {\n        \"type\": \"array\",\n        \"description\": \"An array of video scripts.\",\n        \"items\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"AngleHeadline\": {\n              \"type\": \"string\",\n              \"description\": \"String mostly 1 liner the headline\"\n            },\n            \"ConceptSummary\": {\n              \"type\": \"string\",\n              \"description\": \"String, expressive and articulate\"\n            },\n            \"VSLStructure\": {\n              \"type\": \"string\",\n              \"description\": \"String, markdown if required descriptive\"\n            },\n            \"VideoSuggestion\": {\n              \"type\": \"string\",\n              \"description\": \"Provide potential visual themes, scenes, or references (briefly)\"\n            },\n            \"EmotionalTriggers\": {\n              \"type\": \"string\",\n              \"description\": \"String, descriptive can be in markdown format\"\n            },\n            \"DirectResponseTechniques\": {\n              \"type\": \"string\",\n              \"description\": \"String, descriptive\"\n            },\n            \"CognitiveBiasesLeveraged\": {\n              \"type\": \"string\",\n              \"description\": \"String, descriptive explanation of the cognitive biases utilized\"\n            }\n          },\n          \"required\": [\n            \"AngleHeadline\",\n            \"ConceptSummary\",\n            \"VSLStructure\",\n            \"VideoSuggestion\",\n            \"EmotionalTriggers\",\n            \"DirectResponseTechniques\",\n            \"CognitiveBiasesLeveraged\"\n          ],\n          \"additionalProperties\": false\n        }\n      }\n    },\n    \"required\": [\n      \"video_scripts\"\n    ],\n    \"additionalProperties\": false\n  },\n  \"strict\": true\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        2080,
        1904
      ],
      "id": "e4d90a58-7ac4-401f-8f43-8b2cf1fe5a18",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "==üåê SCRIPT LANGUAGE: {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}\n\nAngle Headline: {{ $json.AngleHeadline }}\n-----\nConcept Summary: {{ $json.ConceptSummary }}\n-----\nVSL Structure Overview: {{ $json.VSLStructure }}\n-----\nVideo Suggestion: {{ $json.VideoSuggestion }}\n-----\nEmotional Triggers: {{ $json.EmotionalTriggers }}\n----\nCognitive Bias: {{ $json.CognitiveBiasesLeveraged }}\n----\nDirect Response Techniques: {{ $json['Direct Response Techniques'] }}\n----\nTime: {{ $json.Time }}\n\n----\nAbout the product: {{ $json['About Product'][0] }}\n\n----\n\n‚ö†Ô∏è WRITE ENTIRE SCRIPT IN: {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}\n\n‚ö†Ô∏è CRITICAL REMINDERS:\n- Research using US VSL best practices and frameworks\n- Write the COMPLETE script in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}\n- Use natural language for {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}-speaking audiences\n- All sections (HOOK, LEAD, BODY, CTA) must be in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}\n\nGive me a complete VSL script considering all of the above information.",
        "messages": {
          "messageValues": [
            {
              "message": "=üåê RESPONSE LANGUAGE: {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}\nüîç RESEARCH MARKET: United States (analyze US VSL best practices and frameworks)\n\n‚ö†Ô∏è CRITICAL INSTRUCTION: \nResearch and analyze using US market VSL frameworks, top US copywriters, American direct-response techniques (Russell Brunson, Frank Kern, Todd Brown, Stefan Georgi, etc.), but write your ENTIRE script in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}.\n\n---\n\nYou are an elite video sales letter (VSL) scriptwriter, specially trained and highly experienced in crafting psychologically persuasive, direct-response marketing content optimized specifically for social media (particularly Facebook advertising). Your scripts blend proven storytelling formulas, emotional intensity, persuasive psychological triggers, and seamless conversational delivery to instantly captivate the audience, hold sustained attention, and compel immediate action and conversions.\n\nüéØ LANGUAGE PROTOCOL:\n- ‚úÖ Research Base: US market VSL frameworks, American direct-response copywriters (Russell Brunson, Frank Kern, Todd Brown, Stefan Georgi, Dan Kennedy, Eugene Schwartz)\n- ‚úÖ Output Language: Write ENTIRE script in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}\n- ‚úÖ Cultural Adaptation: While using US frameworks, adapt examples, references, and language patterns to resonate with {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}-speaking audiences\n- ‚úÖ Natural Flow: Script must sound native to {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}, not like a translation\n\nYou will receive clearly structured information from a provided VSL creative brief, specifically containing these key elements:\n\n- **Idea (Angle Headline):** The central \"big idea\" or winning angle for your script.\n- **Description:** A Markdown-formatted detailed breakdown of the angle, including potential visual hooks, emotional cues, persuasive messaging strategies, and explicit psychological techniques to employ.\n- **Audience & Psychological Insight:** Data and guidance about the ideal audience profile, core emotions, desires, fears, or objections to leverage within the script for maximum conversion power.\n\nYour job is to use this information to produce a complete and polished VSL script following this exact format and clearly labeled structure, written entirely in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}:\n\n### VSL Script Required Structure:\n\n**1. HOOK (0-10 seconds):**\n\n- Craft an instantly gripping, scroll-stopping opening sentence in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}.\n- Use powerful psychological triggers: provocative questions, shocking statistics, curiosity-building statements, contrarian claims, empathy-driven problems, or impactful visual concepts directly relevant to your viewer's deepest desires or fears.\n- Set an emotional tone immediately, speaking directly to the viewer from the first second.\n\n**2. LEAD / PROBLEM AGITATION (10-30 seconds):**\n\n- Smoothly transition from your hook into clearly defining and magnifying the viewer's core problem or pain points‚Äîmake sure these feel personal, specific, relatable, emotionally charged, and urgent. Write in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}.\n- Skillfully amplify the viewer's emotional discomfort, vividly painting the negative consequences or future scenarios of ignoring this problem.\n- Subtly hint towards a revolutionary or intriguing solution without revealing your product explicitly yet, building curiosity.\n\n**3. BODY / SOLUTION PRESENTATION (30 seconds‚Äì2 minutes):**\n\n- Gracefully and believably introduce your product without blatant, immediate promotion. Frame it as the unique and perfect solution effortlessly connected to the viewer's exact struggles, fears, and desires previously outlined. Write in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}.\n- Clearly explain the unique mechanism or features of the product in conversational, easy-to-understand language without jargon.\n- Clearly establish credibility: Incorporate persuasive social proof (realistic testimonials, short stories, transformational \"before-and-afters\"), simple readable statistics, scientific backing, or authoritative figures as proof of results. Always maintain believable language and avoid exaggerated claims.\n- Address and devastate potential common viewer objections clearly but conversationally, embedding reassurance, empathy and building trust.\n- Emphasize clearly how your product uniquely and importantly differs from competitor options, emphasizing meaningful emotional and logical advantages in the viewer's specific context.\n\n**4. CALL-TO-ACTION (15‚Äì30 seconds):**\n\n- Provide a crystal-clear, powerfully persuasive directive in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }} (\"Click below,\" \"Claim your discount today,\" etc.).\n- Clearly articulate your risk removal (guarantee or refund policy) and urgency/scarcity messaging (limited availability, limited time offer, exclusive discounts, etc.) to maximize likelihood of immediate action.\n- Remind viewers specifically and vividly about the primary transformation or benefit they'll obtain by responding immediately, triggering emotional and logical motivators simultaneously.\n- Use explicit action-oriented, imperative language in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}: \"Click,\" \"Claim,\" \"Start,\" \"Secure,\" \"Order,\" etc.\n\n### Essential Script Requirements & Instructions:\n\n- **Emotional Persuasion:** The script must clearly demonstrate mastery of persuasive techniques grounded in deep emotional and psychological understanding. You should leverage consumer fears, hopes, insecurities, aspirations, biases (loss aversion, scarcity, urgency, authority, social proof) and subconscious drivers explicitly outlined in your provided brief description.\n- **Conversational Tone & Flow:** Maintain an intimate, conversational, easy-to-understand, engaging, and friendly style of communication in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}. Speak directly to viewers, always directly addressing \"you,\" as if having an intimate, honest conversation with a close trusted friend.\n- **Concise & Focused:** Every single sentence or phrase must be meaningful, driving interest or persuasion forward. Avoid fluff and vague language.\n- **Visual & Narrative Awareness:** Explicitly consider moments where visuals or storytelling elements (which the video creator may show on screen) would strongly amplify the message. Employ vivid verbal imagery and emotional appeals even though visuals aren't explicitly your responsibility.\n- **Facebook Ad Context:** Ensure your approach respects the context of Facebook ads‚Äîcaptivating immediately, holding short attention spans, emotionally charged, and clearly and urgently actionable.\n- **Ethical Persuasion:** Your persuasive and psychological techniques, however bold, must remain ethically responsible, tastefully executed, and plausible in their claims‚Äîavoiding unrealistic hype, false promises, or misleading assertions. Conversion rates come from trust and authenticity.\n\n‚ö†Ô∏è CRITICAL OUTPUT RULES:\n- Write ENTIRE script in {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}\n- Use culturally appropriate expressions and references for {{ $('Get Script').item.json['Language'] || 'Portugu√™s' }}-speaking audiences\n- Maintain natural flow - should NOT sound like a translation\n- Section labels (HOOK, LEAD, BODY, CTA) can remain in English for technical clarity\n\nYour final deliverable should explicitly label each structural component (HOOK, LEAD, BODY, CTA) clearly. You should construct the script in Markdown formatting for clarity and readability. Your response should start immediately with the script with NO intro statement.\n\n{{ $('Get Script').item.json['Language'] === 'Portugu√™s' ? 'ESCREVA TODO O SCRIPT EM PORTUGU√äS BRASILEIRO - Use linguagem natural brasileira, n√£o tradu√ß√µes literais' : $('Get Script').item.json['Language'] === 'English' ? 'WRITE ENTIRE SCRIPT IN ENGLISH - Use natural American English patterns' : $('Get Script').item.json['Language'] === 'Espa√±ol' ? 'ESCRIBE TODO EL SCRIPT EN ESPA√ëOL - Usa lenguaje natural espa√±ol' : 'PORTUGU√äS BRASILEIRO' }}\n\nBy executing these explicit detailed guidelines, your produced scripts should consistently maximize viewer engagement, create intense emotional resonance, immediately remove common objections or hesitations, trigger powerful subconscious motivators, ethically persuade prospects, and drive immediate, measurable increases in direct-response sales conversions."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1568,
        2064
      ],
      "id": "69544ad6-9065-4b50-9c83-20d232b1b282",
      "name": "Basic LLM Chain1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "==üåê SCRIPT LANGUAGE: {{ $('Get Script1').item.json['Language'] || 'Portugu√™s' }}\n\nFeedbacks:\n{{ $json.Feedback }}\n\n=====\n\nScript:\n{{ $json.Script }}\n\n====\n\nSome Context:\n{{ $json.ConceptSummary }}\n\n====\n\n‚ö†Ô∏è Write the revised script in {{ $('Get Script1').item.json['Language'] || 'Portugu√™s' }}",
        "messages": {
          "messageValues": [
            {
              "message": "==üåê RESPONSE LANGUAGE: {{ $('Get Script1').item.json['Language'] || 'Portugu√™s' }}\n\nYou are an expert Video Sales Letter (VSL) scriptwriter specializing in creating highly converting VSL ads. Your task is to rewrite an existing VSL script based on the feedback provided. \n\n‚ö†Ô∏è CRITICAL: Write your ENTIRE revised script in {{ $('Get Script1').item.json['Language'] || 'Portugu√™s' }}.\n\nYou will be given:\n\n1. **Original Script:** The current version of the VSL script.\n2. **Feedback:** Specific instructions, suggestions, or criticisms on how the script should be improved.\n3. **Additional Context:** Relevant details about the product, target audience, tone, or objectives that will help you better implement the feedback.\n\nUse the feedback and additional context to enhance the original script, ensuring it is engaging, persuasive, and optimized for high conversion rates. Your rewrite should clearly address each feedback point provided, improving clarity, impact, emotional resonance, and overall effectiveness.\n\n{{ $('Get Script1').item.json['Language'] === 'Portugu√™s' ? 'Escreva TODO o script revisado em PORTUGU√äS BRASILEIRO' : $('Get Script1').item.json['Language'] === 'English' ? 'Write the ENTIRE revised script in ENGLISH' : $('Get Script1').item.json['Language'] === 'Espa√±ol' ? 'Escribe TODO el script revisado en ESPA√ëOL' : ' Portugu√™s' }}"
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1552,
        2384
      ],
      "id": "495d9304-1fdb-4370-b505-19c4f820ebe6",
      "name": "Basic LLM Chain2"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 8
            }
          ]
        }
      },
      "id": "2087d01e-fd98-4376-9300-ec57fbfa42d0",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        64,
        208
      ],
      "name": "Schedule Trigger2",
      "typeVersion": 1.2,
      "disabled": true
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "b579576d-a9c1-469e-86ec-b5fe9f18f085",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        496,
        176
      ],
      "name": "Split Out6",
      "typeVersion": 1
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "ea889359-ccb1-4136-9cce-4837327dcadc",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        1296,
        160
      ],
      "name": "Split Out7",
      "typeVersion": 1
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "053d8fe4-cc77-4028-805e-cb63309dd4e1",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        1920,
        432
      ],
      "name": "Split Out8",
      "typeVersion": 1
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "options": {}
      },
      "id": "6aa6db3a-c658-4d69-8eef-68131d6b769e",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        2576,
        432
      ],
      "name": "Split Out9",
      "typeVersion": 1
    },
    {
      "parameters": {
        "amount": 30
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        2256,
        432
      ],
      "id": "68db8bcb-f45d-43e7-8136-07221fbfe18e",
      "name": "Wait",
      "webhookId": "627a9f05-6a54-4197-a97f-dffd8c184f73"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4ae9d184-693b-49c1-a971-fc91e1a90522",
              "leftValue": "={{ $json.effective_status }}",
              "rightValue": "ACTIVE",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1488,
        432
      ],
      "id": "4be866a8-7a25-4cba-b818-c8f970ad019f",
      "name": "If9"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4ae9d184-693b-49c1-a971-fc91e1a90522",
              "leftValue": "={{ $json.effective_status }}",
              "rightValue": "ACTIVE",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2080,
        192
      ],
      "id": "f4212a99-b786-446c-8291-97ce69032a3b",
      "name": "If10"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "4ae9d184-693b-49c1-a971-fc91e1a90522",
              "leftValue": "={{ $json.effective_status }}",
              "rightValue": "ACTIVE",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "86d803d1-ea76-4821-95bc-5d067020578a",
              "leftValue": "={{ $json.insights }}",
              "rightValue": "",
              "operator": {
                "type": "object",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2736,
        192
      ],
      "id": "a5ccae72-8ab3-427e-b806-ba97e794a2d1",
      "name": "If11"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "28d7bfb5-4d2b-4133-880e-b8c2f6455346",
              "name": "Ad ID",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "3385c600-4d4d-4756-b04c-dcc2815e7e95",
              "name": "Ad Name",
              "value": "={{ $json.name }}",
              "type": "string"
            },
            {
              "id": "11e2bbb6-7422-4e0e-8e03-3532d6f11d5b",
              "name": "Campaign Name",
              "value": "={{ $json.campaign.name }}",
              "type": "string"
            },
            {
              "id": "bc300bdf-3df1-4dbc-b64a-1decd34e0caf",
              "name": "AdSet Name",
              "value": "={{ $json.adset.name }}",
              "type": "string"
            },
            {
              "id": "cf3b0615-d5ff-4f20-9690-146d3bd1a0b2",
              "name": "Active Status",
              "value": "={{ $json.effective_status }}",
              "type": "string"
            },
            {
              "id": "c50c53c9-b36b-4940-8e04-466b88ed7966",
              "name": "Impressions",
              "value": "={{ $json.insights.data[0].impressions }}",
              "type": "string"
            },
            {
              "id": "885107c2-dd41-41ac-9519-1c548cd1b9d1",
              "name": "Clicks",
              "value": "={{ $json.insights.data[0].clicks }}",
              "type": "string"
            },
            {
              "id": "8c771e20-750a-4b83-8d8b-7b9f98fefacd",
              "name": "Spend",
              "value": "={{ $json.insights.data[0].spend }}",
              "type": "string"
            },
            {
              "id": "517e1d58-2e92-464a-af9a-58319d0f74d5",
              "name": "CPC",
              "value": "={{ $json.insights.data[0].cpc }}",
              "type": "string"
            },
            {
              "id": "754fb45a-8973-48bc-894d-be2d8cdbb224",
              "name": "CPM",
              "value": "={{ $json.insights.data[0].cpm }}",
              "type": "string"
            },
            {
              "id": "9bb4617b-267e-4d99-94c8-0794871fd33e",
              "name": "Conversions",
              "value": "={{ $json.insights.data[0].actions[4].value }}",
              "type": "string"
            },
            {
              "id": "12b30ca9-189b-4023-8def-c8df4a6ef91a",
              "name": "Conversion Value",
              "value": "={{ $json.insights.data[0].action_values[8].value }}",
              "type": "string"
            },
            {
              "id": "09951900-5588-4685-9c05-5e08a02c808b",
              "name": "Video ID",
              "value": "={{ $json.creative.object_story_spec.video_data.video_id }}",
              "type": "string"
            },
            {
              "id": "04f85d05-0e40-4e6c-ac12-72b82e0b031e",
              "name": "Conversas Iniciadas",
              "value": "={{ $json.insights.data[0].actions?.find(a => a.action_type === 'onsite_conversion.messaging_conversation_started_7d')?.value || 0 }}",
              "type": "string"
            },
            {
              "id": "4a15671d-3fce-4ac5-baa4-9f1ada23aeff",
              "name": "Custo por Conversa",
              "value": "={{ $json.insights.data[0].cost_per_action_type?.find(c => c.action_type === 'onsite_conversion.messaging_conversation_started_7d')?.value || 0 }}",
              "type": "string"
            },
            {
              "id": "2d20f4bf-df5d-4a94-91c5-c74e580496e6",
              "name": "Mensagens com Profundidade 2 (usu√°rio enviou 2+ mensagens)",
              "value": "={{ $json.insights.data[0].actions?.find(a => a.action_type === 'onsite_conversion.messaging_user_depth_2_message_send')?.value || 0 }}",
              "type": "string"
            },
            {
              "id": "cf41c272-595b-4695-b340-2863b6fab8c8",
              "name": "Primeira Resposta (voc√™ respondeu)",
              "value": "={{ $json.insights.data[0].actions?.find(a => a.action_type === 'onsite_conversion.messaging_first_reply')?.value || 0 }}",
              "type": "string"
            },
            {
              "id": "413aeec3-e2e6-46b0-877c-58af6ee33980",
              "name": "=Custo por Mensagem Profundidade 2",
              "value": "={{ $json.insights.data[0].cost_per_action_type?.find(c => c.action_type === 'onsite_conversion.messaging_user_depth_2_message_send')?.value || 0 }}",
              "type": "string"
            },
            {
              "id": "13aefb42-eb77-459d-bd4c-faf37552ae60",
              "name": "Custo por Primeira Resposta",
              "value": "={{ $json.insights.data[0].cost_per_action_type?.find(c => c.action_type === 'onsite_conversion.messaging_first_reply')?.value || 0 }}",
              "type": "string"
            },
            {
              "id": "63625184-2bf0-4b3c-9ed7-5d3c30bda68d",
              "name": "Account Name",
              "value": "={{ $('Add Account Name').item.json.name }}",
              "type": "string"
            },
            {
              "id": "1eff7051-269a-458d-9d5d-18cae8e7dda6",
              "name": "link_ads",
              "value": "=https://business.facebook.com/adsmanager/manage/ads?act={{ $json.id.split('_')[1] }}&selected_ad_ids={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "6ae5aef0-8c7b-419f-8949-9b11708f8824",
              "name": "ads_library",
              "value": "=https://www.facebook.com/ads/library/?id={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "7bdecb61-bdb7-4660-90d7-5cb799f08f10",
              "name": "image_url",
              "value": "={{ $json.creative.object_story_spec.video_data.image_url }}",
              "type": "string"
            },
            {
              "id": "9c940945-edd2-442a-8d6c-23f952f25d42",
              "name": "creative.object_story_spec.video_data.page_welcome_message",
              "value": "={{ $json.creative.object_story_spec.video_data.page_welcome_message }}",
              "type": "string"
            },
            {
              "id": "75783d3f-2b98-4a38-8fa3-59b31b9e07b6",
              "name": "insights.data[0].date_start",
              "value": "={{ $json.insights.data[0].date_start }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3104,
        176
      ],
      "id": "eff2aa95-7d4d-47e4-bfc9-d7248baec2b2",
      "name": "Edit Fields6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "119650e0-fb37-48e1-bb87-efd4cdd29434",
              "leftValue": "={{ $json.creative.video_id }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2928,
        432
      ],
      "id": "87573910-09be-447f-bf13-ef11afea32ef",
      "name": "If6"
    },
    {
      "parameters": {
        "content": "## Weekly Ad Schedule",
        "height": 680,
        "width": 3188
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        32,
        0
      ],
      "typeVersion": 1,
      "id": "a569d073-7db5-47b2-bed7-2f7e0dbe0737",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "path": "ad-scraping",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        448,
        1008
      ],
      "id": "cfc3b895-b16f-4783-b03a-443f359190ed",
      "name": "Webhook1",
      "webhookId": "5cbda23b-da9d-4176-8a89-a01eaa6899f1"
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblq56TF4aT0Zz1sN",
          "mode": "list",
          "cachedResultName": "Ads Performance",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR/tblq56TF4aT0Zz1sN"
        },
        "id": "={{ $json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        720,
        880
      ],
      "id": "e70383b3-47d4-4e9f-8b17-153bcd84152a",
      "name": "Airtable10",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "graphApiVersion": "v22.0",
        "node": "={{ $json['Video ID'] }}",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "fields",
                "value": "id,description,length,source,permalink_url,embed_html"
              }
            ]
          }
        }
      },
      "id": "f9b7c006-594b-4e3e-8ae5-b92338864d51",
      "type": "n8n-nodes-base.facebookGraphApi",
      "position": [
        992,
        1072
      ],
      "name": "Facebook Graph API10",
      "typeVersion": 1,
      "credentials": {
        "facebookGraphApi": {
          "id": "JGQy45kpcae2O5I7",
          "name": "Facebook Graph account"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json.source }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            },
            {
              "name": "Referer",
              "value": "https://www.facebook.com/"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2304,
        1072
      ],
      "id": "84cd9cc1-5e32-474f-bdb1-14b212338a74",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "url": "https://api.scrapfly.io/scrape",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "key",
              "value": "scp-live-a1e2ce74b8664944a66fde3d6246b973"
            },
            {
              "name": "url",
              "value": "={{ $json.url }}"
            },
            {
              "name": "render_js",
              "value": "true"
            },
            {
              "name": "rendering_wait",
              "value": "3000"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Cookie",
              "value": "c_user=61554406727805; xs=21%3ASxNZh0vWfXFlLg%3A2%3A1761037064%3A-1%3A-1%3A%3AAcWV4IldJkXY04s-eUEJEUzxUkzWUYmENu1hbebbeQ; datr=-3jeaPB7JG0_tZ0Ux4CeWGu4"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
            },
            {
              "name": "Referer",
              "value": "https://www.facebook.com/"
            },
            {
              "name": "cookie",
              "value": "c_user=61554406727805;xs=21%3ASxNZh0vWfXFlLg%3A2%3A1761037064%3A-1%3A-1%3A%3AAcWV4IldJkXY04s-eUEJEUzxUkzWUYmENu1hbebbeQ;datr=-3jeaPB7JG0_tZ0Ux4CeWGu4;"
            }
          ]
        },
        "options": {
          "redirect": {
            "redirect": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1472,
        1072
      ],
      "id": "41699450-5158-480a-870b-57c099bf5c36",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "499222b9-bc6e-488f-a6c6-3ed5bd802c8f",
              "name": "url",
              "value": "=https://www.facebook.com{{ $json.permalink_url }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1200,
        912
      ],
      "id": "b42fd65a-43cc-41e7-9bec-619172cc7307",
      "name": "Edit Fields5"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// --- Helper function to recursively find a key in a JSON object/array ---\nfunction findValueByKey(obj, keyToFind) {\n  if (typeof obj !== 'object' || obj === null) {\n    return null;\n  }\n  if (obj.hasOwnProperty(keyToFind)) {\n    return obj[keyToFind];\n  }\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      const result = findValueByKey(obj[key], keyToFind);\n      if (result !== null) {\n        return result;\n      }\n    }\n  }\n  if (Array.isArray(obj)) {\n    for (const item of obj) {\n      const result = findValueByKey(item, keyToFind);\n      if (result !== null) {\n        return result;\n      }\n    }\n  }\n  return null;\n}\n// --- End Helper Function ---\n\nconst item = $input.item;\nconst htmlInput = item.json.content;\nlet sdUrl = null;\n\nif (typeof htmlInput !== 'string') {\n  item.json.error = \"Input content is not a string (expected HTML).\";\n  console.error(item.json.error);\n  return item;\n}\n\n// Lista de chaves poss√≠veis que o Facebook pode usar\nconst possibleKeys = [\n  'browser_native_sd_url',\n  'browser_native_hd_url',\n  'playable_url',\n  'playable_url_quality_hd',\n  'video_url',\n  'url',\n  'src'\n];\n\nconst scriptRegex = /<script type=\"application\\/json\"[^>]*>([\\s\\S]*?)<\\/script>/g;\nlet match;\n\ntry {\n  while ((match = scriptRegex.exec(htmlInput)) !== null) {\n    const scriptContent = match[1];\n\n    if (scriptContent) {\n      try {\n        const jsonData = JSON.parse(scriptContent);\n\n        // Tenta encontrar qualquer uma das chaves poss√≠veis\n        for (const key of possibleKeys) {\n          const potentialUrl = findValueByKey(jsonData, key);\n          \n          if (typeof potentialUrl === 'string' && \n              potentialUrl.trim() !== '' && \n              (potentialUrl.includes('.mp4') || potentialUrl.includes('video'))) {\n            sdUrl = potentialUrl;\n            console.log(`Found video URL using key '${key}':`, sdUrl);\n            break;\n          }\n        }\n        \n        if (sdUrl) break; // Sai do loop se encontrou\n        \n      } catch (jsonError) {\n        // Ignora scripts que n√£o s√£o JSON v√°lidos\n      }\n    }\n  }\n\n} catch (error) {\n   item.json.error = \"Error during regex/JSON processing: \" + error.message;\n   console.error(item.json.error);\n   return item;\n}\n\nif (sdUrl) {\n  item.json.extracted_sd_url = sdUrl.replace(/&amp;/g, '&');\n  console.log(\"Successfully extracted and cleaned URL:\", item.json.extracted_sd_url);\n} else {\n  item.json.error = \"No video URL found. Facebook may have changed its structure.\";\n  console.error(item.json.error);\n}\n\nreturn item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1904,
        1072
      ],
      "id": "5e3509b7-e2f9-4928-aabf-20d577f4a657",
      "name": "Code1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2732cf11-7d5d-46db-abca-7097581b077d",
              "name": "content",
              "value": "={{ $json.result.content }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1680,
        928
      ],
      "id": "c85212af-c340-4e9f-86f7-f04a291aaffd",
      "name": "Edit Fields7"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "dc4f539c-b1ea-48f6-8f9f-842a2a0a2d82",
              "leftValue": "={{ $json.extracted_sd_url }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2064,
        928
      ],
      "id": "01b558d7-1d9b-40d5-8b8f-56ae2e995c23",
      "name": "If7"
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        2512,
        912
      ],
      "id": "6e6bca35-33aa-44d1-90a7-40ebd69a28fb",
      "name": "OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "WEENPovt22LUaeRp",
          "name": "OpenAi - Marcos"
        }
      }
    },
    {
      "parameters": {
        "content": "## Best Ad Video Transcript",
        "height": 660,
        "width": 3220,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        32,
        720
      ],
      "typeVersion": 1,
      "id": "01e0812b-ae06-432d-9d68-bacecbde394e",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Scripting/Idea Generation/Feedback System - Portugu√™s Brasil",
        "height": 1260,
        "width": 3220,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        32,
        1424
      ],
      "typeVersion": 1,
      "id": "c86d22da-ea63-4ad1-9df2-059daef89c8b",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1504,
        1920
      ],
      "id": "3bdf118d-e15f-4627-9fbd-d9ea28dc1f51",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "Id8CEvNKDTHbg6vv",
          "name": "gemini marcos"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {
          "timeout": 600000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1760,
        1920
      ],
      "id": "3bf608a3-310c-4e19-8aec-5e86a0c64d1c",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "WEENPovt22LUaeRp",
          "name": "OpenAi - Marcos"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblTufVXzuUUvsqnD",
          "mode": "list",
          "cachedResultName": "Product",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv/tblTufVXzuUUvsqnD"
        },
        "id": "={{ $('Webhook').item.json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1408,
        1520
      ],
      "id": "43382445-89c1-43f9-b51c-48d67cd1126f",
      "name": "Get Product",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblTufVXzuUUvsqnD",
          "mode": "list",
          "cachedResultName": "Product",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv/tblTufVXzuUUvsqnD"
        },
        "id": "={{ $('Webhook').item.json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1408,
        1760
      ],
      "id": "13879259-c239-498d-ae7d-f90cbda0d762",
      "name": "Get Product1",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv/tbl0ynpBwH6r97TNN"
        },
        "id": "={{ $('Webhook').item.json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1408,
        2064
      ],
      "id": "a1758621-87e3-4ca1-89b4-7f4ef0f3b623",
      "name": "Get Script",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "base": {
          "__rl": true,
          "value": "appsvPpfVc00sZlRR",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR/tbl0ynpBwH6r97TNN"
        },
        "id": "={{ $('Webhook').item.json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1408,
        2384
      ],
      "id": "f0bd9ab7-d2ab-4211-95e2-0c2fdb7b377e",
      "name": "Get Script1",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblTufVXzuUUvsqnD",
          "mode": "list",
          "cachedResultName": "Product",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tblTufVXzuUUvsqnD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook').item.json.query.recordId }}",
            "Product Details": "={{ $json.choices[0].message.content }}",
            "Status": "Product Details Generated",
            "2Ô∏è‚É£ Generate Angles": true
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Product Name",
              "displayName": "Product Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Product Notes",
              "displayName": "Product Notes",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Product Details",
                  "value": "Generating Product Details"
                },
                {
                  "name": "Generating Angles",
                  "value": "Generating Angles"
                },
                {
                  "name": "Product Details Generated",
                  "value": "Product Details Generated"
                },
                {
                  "name": "Angles Generated",
                  "value": "Angles Generated"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product Details",
              "displayName": "Product Details",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "1Ô∏è‚É£ Generate Product Details",
              "displayName": "1Ô∏è‚É£ Generate Product Details",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "2Ô∏è‚É£ Generate Angles",
              "displayName": "2Ô∏è‚É£ Generate Angles",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Winning Ad Script",
              "displayName": "Winning Ad Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Step 1",
              "displayName": "Step 1",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Step 2",
              "displayName": "Step 2",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Projects",
              "displayName": "Projects",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Scripting",
              "displayName": "Scripting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Angle Headline",
              "displayName": "Angle Headline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Ads Performance",
              "displayName": "Ads Performance",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2368,
        1520
      ],
      "id": "80ff0001-3524-46e5-8b30-21959ebf5c0a",
      "name": "Update Product Details",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tbl0ynpBwH6r97TNN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Direct Response Techniques": "={{ $json.DirectResponseTechniques }}",
            "Product": "={{ $('Edit Fields').item.json.project }}",
            "AngleHeadline": "={{ $json.AngleHeadline }}",
            "ConceptSummary": "={{ $json.ConceptSummary }}",
            "VSLStructure": "={{ $json.VSLStructure }}",
            "VideoSuggestion": "={{ $json.VideoSuggestion }}",
            "EmotionalTriggers": "={{ $json.EmotionalTriggers }}",
            "CognitiveBiasesLeveraged": "={{ $json.CognitiveBiasesLeveraged }}",
            "Status": "Idle"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "AngleHeadline",
              "displayName": "AngleHeadline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ConceptSummary",
              "displayName": "ConceptSummary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "VSLStructure",
              "displayName": "VSLStructure",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "VideoSuggestion",
              "displayName": "VideoSuggestion",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "EmotionalTriggers",
              "displayName": "EmotionalTriggers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "CognitiveBiasesLeveraged",
              "displayName": "CognitiveBiasesLeveraged",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Direct Response Techniques",
              "displayName": "Direct Response Techniques",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "3Ô∏è‚É£ Select Script Length",
              "displayName": "3Ô∏è‚É£ Select Script Length",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "< 1 min",
                  "value": "< 1 min"
                },
                {
                  "name": "1-3 mins",
                  "value": "1-3 mins"
                },
                {
                  "name": "3-5 mins",
                  "value": "3-5 mins"
                },
                {
                  "name": "5-7 mins",
                  "value": "5-7 mins"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "4Ô∏è‚É£ Feedback",
              "displayName": "4Ô∏è‚É£ Feedback",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Script",
                  "value": "Generating Script"
                },
                {
                  "name": "Revision in progress",
                  "value": "Revision in progress"
                },
                {
                  "name": "Script Generated",
                  "value": "Script Generated"
                },
                {
                  "name": "Script Revised",
                  "value": "Script Revised"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Script",
              "displayName": "Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Product",
              "displayName": "Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "About Product",
              "displayName": "About Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Records (Nested)",
              "displayName": "Records (Nested)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "5Ô∏è‚É£ Generate Script",
              "displayName": "5Ô∏è‚É£ Generate Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Shortlist",
              "displayName": "Shortlist",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2448,
        1760
      ],
      "id": "73b62640-8651-4369-98c7-fd864aaeed00",
      "name": "Create Angles",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appsvPpfVc00sZlRR",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tbl0ynpBwH6r97TNN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Get Script1').item.json.id }}",
            "Script": "={{ $json.text }}",
            "Status": "Script Revised",
            "5Ô∏è‚É£ Generate Script": false
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "AngleHeadline",
              "displayName": "AngleHeadline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "ConceptSummary",
              "displayName": "ConceptSummary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VSLStructure",
              "displayName": "VSLStructure",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VideoSuggestion",
              "displayName": "VideoSuggestion",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "EmotionalTriggers",
              "displayName": "EmotionalTriggers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CognitiveBiasesLeveraged",
              "displayName": "CognitiveBiasesLeveraged",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Direct Response Techniques",
              "displayName": "Direct Response Techniques",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "3Ô∏è‚É£ Select Script Length",
              "displayName": "3Ô∏è‚É£ Select Script Length",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "< 1 min",
                  "value": "< 1 min"
                },
                {
                  "name": "1-3 mins",
                  "value": "1-3 mins"
                },
                {
                  "name": "3-5 mins",
                  "value": "3-5 mins"
                },
                {
                  "name": "5-7 mins",
                  "value": "5-7 mins"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "4Ô∏è‚É£ Feedback",
              "displayName": "4Ô∏è‚É£ Feedback",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Script",
                  "value": "Generating Script"
                },
                {
                  "name": "Revision in progress",
                  "value": "Revision in progress"
                },
                {
                  "name": "Script Generated",
                  "value": "Script Generated"
                },
                {
                  "name": "Script Revised",
                  "value": "Script Revised"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Script",
              "displayName": "Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product",
              "displayName": "Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "About Product",
              "displayName": "About Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Records (Nested)",
              "displayName": "Records (Nested)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "5Ô∏è‚É£ Generate Script",
              "displayName": "5Ô∏è‚É£ Generate Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Shortlist",
              "displayName": "Shortlist",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1888,
        2384
      ],
      "id": "7c6f7d40-f1fb-461e-85af-5224a7373fb9",
      "name": "Update Script1",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.text }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "Parse thw output line by like exactly like the previous system gave it to you but in JSON format."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1840,
        1760
      ],
      "id": "12923b81-2daf-4a9b-b275-9f1835a05a30",
      "name": "Parsing"
    },
    {
      "parameters": {
        "graphApiVersion": "v23.0",
        "node": "me",
        "edge": "adaccounts",
        "options": {
          "fields": {
            "field": [
              {
                "name": "id"
              },
              {
                "name": "name"
              },
              {
                "name": "account_status"
              }
            ]
          }
        }
      },
      "id": "86a6b906-eca3-4442-98aa-6a28db4e413b",
      "type": "n8n-nodes-base.facebookGraphApi",
      "position": [
        304,
        448
      ],
      "name": "Get FB Ad Accounts",
      "typeVersion": 1,
      "credentials": {
        "facebookGraphApi": {
          "id": "JGQy45kpcae2O5I7",
          "name": "Facebook Graph account"
        }
      }
    },
    {
      "parameters": {
        "graphApiVersion": "v22.0",
        "node": "={{ $json.id }}",
        "edge": "campaigns",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "fields",
                "value": "id,name,effective_status,account_name"
              }
            ]
          }
        }
      },
      "id": "ff80e0c8-e915-49a2-a4dc-434368852149",
      "type": "n8n-nodes-base.facebookGraphApi",
      "position": [
        1104,
        432
      ],
      "name": "Get Ad Campaigns",
      "typeVersion": 1,
      "credentials": {
        "facebookGraphApi": {
          "id": "JGQy45kpcae2O5I7",
          "name": "Facebook Graph account"
        }
      }
    },
    {
      "parameters": {
        "graphApiVersion": "v22.0",
        "node": "={{$json.id}}",
        "edge": "adsets",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "fields",
                "value": "id,name,effective_status,budget,currency"
              }
            ]
          }
        }
      },
      "id": "7b9d4907-de6f-444d-8eb8-851e304fb93f",
      "type": "n8n-nodes-base.facebookGraphApi",
      "position": [
        1680,
        160
      ],
      "name": "Get FB Ad Sets",
      "typeVersion": 1,
      "credentials": {
        "facebookGraphApi": {
          "id": "JGQy45kpcae2O5I7",
          "name": "Facebook Graph account"
        }
      }
    },
    {
      "parameters": {
        "graphApiVersion": "v22.0",
        "node": "={{$json.id}}",
        "edge": "ads",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "fields",
                "value": "id,name,effective_status,creative{video_id,image_url,object_story_spec},insights.date_preset(maximum){ctr,cpm,cpc,spend,actions,action_values,cost_per_action_type,impressions,clicks},campaign{name},adset{name}"
              }
            ]
          }
        }
      },
      "id": "b577689b-51c0-4e60-8c45-b6a719efdc4d",
      "type": "n8n-nodes-base.facebookGraphApi",
      "position": [
        2416,
        192
      ],
      "name": "Get FB Ad Contents",
      "typeVersion": 1,
      "credentials": {
        "facebookGraphApi": {
          "id": "JGQy45kpcae2O5I7",
          "name": "Facebook Graph account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblTufVXzuUUvsqnD",
          "mode": "list",
          "cachedResultName": "Product",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv/tblTufVXzuUUvsqnD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "1Ô∏è‚É£ Generate Product Details": true,
            "2Ô∏è‚É£ Generate Angles": true,
            "Status": "Angles Generated",
            "id": "={{ $('Webhook').item.json.query.recordId }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Product Name",
              "displayName": "Product Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product Notes",
              "displayName": "Product Notes",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Product Details",
                  "value": "Generating Product Details"
                },
                {
                  "name": "Generating Angles",
                  "value": "Generating Angles"
                },
                {
                  "name": "Product Details Generated",
                  "value": "Product Details Generated"
                },
                {
                  "name": "Angles Generated",
                  "value": "Angles Generated"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product Details",
              "displayName": "Product Details",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "1Ô∏è‚É£ Generate Product Details",
              "displayName": "1Ô∏è‚É£ Generate Product Details",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "2Ô∏è‚É£ Generate Angles",
              "displayName": "2Ô∏è‚É£ Generate Angles",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Winning Ad Script",
              "displayName": "Winning Ad Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Step 1",
              "displayName": "Step 1",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Step 2",
              "displayName": "Step 2",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Projects",
              "displayName": "Projects",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Scripting",
              "displayName": "Scripting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Angle Headline",
              "displayName": "Angle Headline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Ads Performance",
              "displayName": "Ads Performance",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2624,
        1760
      ],
      "id": "27640827-be99-423d-a318-4f3f46e544d9",
      "name": "Update Product",
      "executeOnce": true,
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1520,
        2272
      ],
      "id": "395bf58c-6db9-4f30-8b15-1a4fbeba88fc",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "Id8CEvNKDTHbg6vv",
          "name": "gemini marcos"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1520,
        2560
      ],
      "id": "d13e2f09-9e79-4ad3-bedf-45393e0513c8",
      "name": "Google Gemini Chat Model6",
      "credentials": {
        "googlePalmApi": {
          "id": "Id8CEvNKDTHbg6vv",
          "name": "gemini marcos"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "upsert",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblq56TF4aT0Zz1sN",
          "mode": "list",
          "cachedResultName": "Ads Performance",
          "cachedResultUrl": "https://airtable.com/appBYoIvmIcxQgRhD/tblq56TF4aT0Zz1sN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Best Ads?": false,
            "Ad Name": "={{ $json[\"Ad Name\"] }}",
            "Spend": "={{ $json.Spend }}",
            "Conversions": "={{ $json.Conversions }}",
            "Conversion Value": "={{ $json[\"Conversion Value\"] }}",
            "CPC": "={{ $json.CPC }}",
            "CPM": "={{ $json.CPM }}",
            "Video ID": "={{ $json[\"Video ID\"] }}",
            "Ad ID": "={{ $json[\"Ad ID\"] }}",
            "Campaign Name": "={{ $json[\"Campaign Name\"] }}",
            "AdSet Name": "={{ $json[\"AdSet Name\"] }}",
            "Active Status": "={{ $json[\"Active Status\"] }}",
            "Impressions": "={{ $json.Impressions }}",
            "Clicks": "={{ $json.Clicks }}",
            "Custo por Conversa": "={{ $json['Custo por Conversa'] }}",
            "Conversas Iniciadas": "={{ $json['Conversas Iniciadas'] }}",
            "Custo Primeira Resposta": "={{ $json['Custo por Primeira Resposta'] }}",
            "Custo Mensagem Depth 2": "={{ $json['Custo por Mensagem Profundidade 2'] }}",
            "Primeira Resposta": "={{ $json['Primeira Resposta (voc√™ respondeu)'] }}",
            "Mensagens Depth 2": "={{ $json['Mensagens com Profundidade 2 (usu√°rio enviou 2+ mensagens)'] }}",
            "Account Name": "={{ $json['Account Name'] }}"
          },
          "matchingColumns": [
            "Video ID"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Ad ID",
              "displayName": "Ad ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Best Ads?",
              "displayName": "Best Ads?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Video Script",
              "displayName": "Video Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Video ID",
              "displayName": "Video ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Active Status",
              "displayName": "Active Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "ACTIVE",
                  "value": "ACTIVE"
                },
                {
                  "name": "PAUSED",
                  "value": "PAUSED"
                },
                {
                  "name": "DELETED",
                  "value": "DELETED"
                },
                {
                  "name": "ARCHIVED",
                  "value": "ARCHIVED"
                },
                {
                  "name": "IN_PROCESS",
                  "value": "IN_PROCESS"
                },
                {
                  "name": "WITH_ISSUES",
                  "value": "WITH_ISSUES"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Impressions",
              "displayName": "Impressions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Clicks",
              "displayName": "Clicks",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Spend",
              "displayName": "Spend",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Conversas Iniciadas",
              "displayName": "Conversas Iniciadas",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Mensagens Depth 2",
              "displayName": "Mensagens Depth 2",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Primeira Resposta",
              "displayName": "Primeira Resposta",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Custo por Conversa",
              "displayName": "Custo por Conversa",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Custo Mensagem Depth 2",
              "displayName": "Custo Mensagem Depth 2",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Custo Primeira Resposta",
              "displayName": "Custo Primeira Resposta",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Conversions",
              "displayName": "Conversions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Conversion Value",
              "displayName": "Conversion Value",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "CPC",
              "displayName": "CPC",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "CPM",
              "displayName": "CPM",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ROAS",
              "displayName": "ROAS",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Engagement Rate [progress]",
              "displayName": "Engagement Rate [progress]",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Last Updated",
              "displayName": "Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Ad Name",
              "displayName": "Ad Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Account Name",
              "displayName": "Account Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Campaign Name",
              "displayName": "Campaign Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AdSet Name",
              "displayName": "AdSet Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Associate to New Product",
              "displayName": "Associate to New Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Created",
              "displayName": "Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Projects",
              "displayName": "Projects",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "3ebc8d32-aad3-463c-b677-3e465885df36",
      "type": "n8n-nodes-base.airtable",
      "position": [
        3296,
        448
      ],
      "name": "Airtable",
      "typeVersion": 2.1,
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.id }}",
                    "rightValue": "=act_594452103743956",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "5b9bd618-c83f-4f71-a9d0-14236e2e9af4"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "[MOTTIVME] Renata Vieira"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "98e54e9e-1800-4810-882e-4ae6b4454a86",
                    "leftValue": "={{ $json.id }}",
                    "rightValue": "act_467656524158999",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Dra Gabriela Rossmam "
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "5bbcbe29-f3a4-45a4-96ae-bc0117041c16",
                    "leftValue": "={{ $json.id }}",
                    "rightValue": "act_1242910680913498",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "[MOTTIVME] LAPPE FINANCE"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        688,
        224
      ],
      "id": "9e13aa3d-4be6-4a11-8c1e-d1174812b145",
      "name": "Switch1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1334eb7a-1d63-4710-821d-af01f6ac6824",
              "name": "account_name",
              "value": "={{ $json.name }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        928,
        240
      ],
      "id": "12778e89-b76a-436c-8c24-49dde56ce2e4",
      "name": "Add Account Name"
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "upsert",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblq56TF4aT0Zz1sN",
          "mode": "list",
          "cachedResultName": "Ads Performance",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR/tblq56TF4aT0Zz1sN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook1').item.json.query.recordId }}",
            "Video Script": "={{ $json.text }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Ad Name",
              "displayName": "Ad Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Best Ads?",
              "displayName": "Best Ads?",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Active Status",
              "displayName": "Active Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "ACTIVE",
                  "value": "ACTIVE"
                },
                {
                  "name": "PAUSED",
                  "value": "PAUSED"
                },
                {
                  "name": "DELETED",
                  "value": "DELETED"
                },
                {
                  "name": "ARCHIVED",
                  "value": "ARCHIVED"
                },
                {
                  "name": "IN_PROCESS",
                  "value": "IN_PROCESS"
                },
                {
                  "name": "WITH_ISSUES",
                  "value": "WITH_ISSUES"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Spend",
              "displayName": "Spend",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Conversions",
              "displayName": "Conversions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Conversion Value",
              "displayName": "Conversion Value",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CPC",
              "displayName": "CPC",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CPM",
              "displayName": "CPM",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "ROAS",
              "displayName": "ROAS",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Engagement Rate [progress]",
              "displayName": "Engagement Rate [progress]",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Last Updated",
              "displayName": "Last Updated",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Video ID",
              "displayName": "Video ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Ad ID",
              "displayName": "Ad ID",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Campaign Name",
              "displayName": "Campaign Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AdSet Name",
              "displayName": "AdSet Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Impressions",
              "displayName": "Impressions",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Clicks",
              "displayName": "Clicks",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Video Script",
              "displayName": "Video Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Project",
              "displayName": "Project",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Created",
              "displayName": "Created",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2976,
        992
      ],
      "id": "479774bb-839e-4cd5-97f8-18decee63fd5",
      "name": "Airtable13",
      "executeOnce": true,
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tbl0ynpBwH6r97TNN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook').item.json.query.recordId }}",
            "Script": "={{ $json.text }}",
            "Status": "Script Generated",
            "5Ô∏è‚É£ Generate Script": false
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "AngleHeadline",
              "displayName": "AngleHeadline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "ConceptSummary",
              "displayName": "ConceptSummary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VSLStructure",
              "displayName": "VSLStructure",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VideoSuggestion",
              "displayName": "VideoSuggestion",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "EmotionalTriggers",
              "displayName": "EmotionalTriggers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CognitiveBiasesLeveraged",
              "displayName": "CognitiveBiasesLeveraged",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Direct Response Techniques",
              "displayName": "Direct Response Techniques",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "3Ô∏è‚É£ Select Script Length",
              "displayName": "3Ô∏è‚É£ Select Script Length",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "< 1 min",
                  "value": "< 1 min"
                },
                {
                  "name": "1-3 mins",
                  "value": "1-3 mins"
                },
                {
                  "name": "3-5 mins",
                  "value": "3-5 mins"
                },
                {
                  "name": "5-7 mins",
                  "value": "5-7 mins"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "4Ô∏è‚É£ Feedback",
              "displayName": "4Ô∏è‚É£ Feedback",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Script",
                  "value": "Generating Script"
                },
                {
                  "name": "Revision in progress",
                  "value": "Revision in progress"
                },
                {
                  "name": "Script Generated",
                  "value": "Script Generated"
                },
                {
                  "name": "Script Revised",
                  "value": "Script Revised"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Script",
              "displayName": "Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product",
              "displayName": "Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "About Product",
              "displayName": "About Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Records (Nested)",
              "displayName": "Records (Nested)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "5Ô∏è‚É£ Generate Script",
              "displayName": "5Ô∏è‚É£ Generate Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Shortlist",
              "displayName": "Shortlist",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2016,
        2096
      ],
      "id": "ca913f1b-ae0d-4869-a398-7fc7cb564656",
      "name": "Update Script2",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appsvPpfVc00sZlRR",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tbl0ynpBwH6r97TNN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook').item.json.query.recordId }}",
            "Script": "={{ $json.text }}",
            "Status": "Script Generated",
            "5Ô∏è‚É£ Generate Script": false
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "AngleHeadline",
              "displayName": "AngleHeadline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "ConceptSummary",
              "displayName": "ConceptSummary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VSLStructure",
              "displayName": "VSLStructure",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VideoSuggestion",
              "displayName": "VideoSuggestion",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "EmotionalTriggers",
              "displayName": "EmotionalTriggers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CognitiveBiasesLeveraged",
              "displayName": "CognitiveBiasesLeveraged",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Direct Response Techniques",
              "displayName": "Direct Response Techniques",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "3Ô∏è‚É£ Select Script Length",
              "displayName": "3Ô∏è‚É£ Select Script Length",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "< 1 min",
                  "value": "< 1 min"
                },
                {
                  "name": "1-3 mins",
                  "value": "1-3 mins"
                },
                {
                  "name": "3-5 mins",
                  "value": "3-5 mins"
                },
                {
                  "name": "5-7 mins",
                  "value": "5-7 mins"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "4Ô∏è‚É£ Feedback",
              "displayName": "4Ô∏è‚É£ Feedback",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Script",
                  "value": "Generating Script"
                },
                {
                  "name": "Revision in progress",
                  "value": "Revision in progress"
                },
                {
                  "name": "Script Generated",
                  "value": "Script Generated"
                },
                {
                  "name": "Script Revised",
                  "value": "Script Revised"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Script",
              "displayName": "Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product",
              "displayName": "Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "About Product",
              "displayName": "About Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Records (Nested)",
              "displayName": "Records (Nested)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "5Ô∏è‚É£ Generate Script",
              "displayName": "5Ô∏è‚É£ Generate Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Shortlist",
              "displayName": "Shortlist",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2096,
        2320
      ],
      "id": "2f4bc79a-ccfe-4a6c-b445-b59e22267c2f",
      "name": "Update Script3",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "eddee505-29e2-48b9-896a-d5e3cfde89f5",
                    "leftValue": "={{ $json.query.action }}",
                    "rightValue": "generateProjectDetails",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Generate Project Details"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.query.action }}",
                    "rightValue": "generateAngles",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "bb5b6fd5-ef22-451b-a23d-258044aafcca"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Generate Angles"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "ac785a02-782f-4af2-af20-bb23cf885a71",
                    "leftValue": "={{ $json.query.action }}",
                    "rightValue": "generateScript",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Generate Script"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "0ab60fd9-c2a2-4e7d-81dc-07737b2f95dc",
                    "leftValue": "={{ $json.query.action }}",
                    "rightValue": "feedbackIteration",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Feedback Iteration"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        512,
        3280
      ],
      "id": "0cf1b859-8328-4777-a338-3d9c13401ee0",
      "name": "Switch2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.perplexity.ai/chat/completions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 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"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"sonar-reasoning\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"You're an Internet researcher, who loves giving detailed research for the marketing team.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": {{ JSON.stringify($json.userprompt) }}\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1824,
        2832
      ],
      "id": "720ea7b2-0184-4cd0-b6f9-6cd1b7682aa3",
      "name": "Product Overview & Customer Research1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "64113609-6adf-4693-8d51-ede088d97d38",
              "name": "userprompt",
              "value": "=Research about the Customer Profile in very detailed manner for the product, what exactly are the products & the description the core people who need the product. Unique insights &\n\nProduct Name: {{ $json['Product Name'] }}\n\nProduct Description: {{ $json['Product Notes'] }}\n\nAlso go into rabbithole and absolutely understand the what and who they are selling to, get details on the product the ingredients, and everything along with their brand narrative, what they are and what they are not. Be specific about the details.",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1632,
        2832
      ],
      "id": "6f7ab018-d9b1-4e47-ba3f-a654c56afe7d",
      "name": "Edit Fields3"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9cb2899d-6988-4c9b-b966-2da679725175",
              "name": "ScriptIdea",
              "value": "={{ $json.output }}",
              "type": "array"
            },
            {
              "id": "bbb3d4d9-766f-4afe-aeff-c1b4b9650bbc",
              "name": "project",
              "value": "=[\"{{ $('Switch2').item.json.query.recordId }}\"]",
              "type": "array"
            }
          ]
        },
        "options": {
          "ignoreConversionErrors": true
        }
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2160,
        3072
      ],
      "id": "ee28d41c-8183-4c72-a26b-91426f4c73dc",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "fieldToSplitOut": "ScriptIdea",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        2304,
        3072
      ],
      "id": "19cdf70b-c629-463d-a46a-3debc4234c2c",
      "name": "Split Out1"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"name\": \"video_script_array_schema\",\n  \"schema\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"video_scripts\": {\n        \"type\": \"array\",\n        \"description\": \"An array of video scripts.\",\n        \"items\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"AngleHeadline\": {\n              \"type\": \"string\",\n              \"description\": \"String mostly 1 liner the headline\"\n            },\n            \"ConceptSummary\": {\n              \"type\": \"string\",\n              \"description\": \"String, expressive and articulate\"\n            },\n            \"VSLStructure\": {\n              \"type\": \"string\",\n              \"description\": \"String, markdown if required descriptive\"\n            },\n            \"VideoSuggestion\": {\n              \"type\": \"string\",\n              \"description\": \"Provide potential visual themes, scenes, or references (briefly)\"\n            },\n            \"EmotionalTriggers\": {\n              \"type\": \"string\",\n              \"description\": \"String, descriptive can be in markdown format\"\n            },\n            \"DirectResponseTechniques\": {\n              \"type\": \"string\",\n              \"description\": \"String, descriptive\"\n            },\n            \"CognitiveBiasesLeveraged\": {\n              \"type\": \"string\",\n              \"description\": \"String, descriptive explanation of the cognitive biases utilized\"\n            }\n          },\n          \"required\": [\n            \"AngleHeadline\",\n            \"ConceptSummary\",\n            \"VSLStructure\",\n            \"VideoSuggestion\",\n            \"EmotionalTriggers\",\n            \"DirectResponseTechniques\",\n            \"CognitiveBiasesLeveraged\"\n          ],\n          \"additionalProperties\": false\n        }\n      }\n    },\n    \"required\": [\n      \"video_scripts\"\n    ],\n    \"additionalProperties\": false\n  },\n  \"strict\": true\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        2080,
        3216
      ],
      "id": "e4e2f61f-29c3-4b35-9f13-6e861d217da5",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Angle Headline: {{ $json.AngleHeadline }}\n-----\nConcept Summary: {{ $json.ConceptSummary }}\n-----\nVSL Structure Overview: {{ $json.VSLStructure }}\n-----\nVideo Suggestion: {{ $json.VideoSuggestion }}\n-----\nEmotional Triggers: {{ $json.EmotionalTriggers }}\n----\nCognative Bias: {{ $json.CognitiveBiasesLeveraged }}\n----\nDirect Response Techniques: {{ $json['Direct Response Techniques'] }}\n----\nTime: {{ $json.Time }}\n\n----\nAbout the product: {{ $json['About Product'][0] }}\n\n----\nGive me a script considering from all of the above information.",
        "messages": {
          "messageValues": [
            {
              "message": "=You are an elite video sales letter (VSL) scriptwriter, specially trained and highly experienced in crafting psychologically persuasive, direct-response marketing content optimized specifically for social media (particularly Facebook advertising). Your scripts blend proven storytelling formulas, emotional intensity, persuasive psychological triggers, and seamless conversational delivery to instantly captivate the audience, hold sustained attention, and compel immediate action and conversions.\n\nYou will receive clearly structured information from a provided VSL creative brief, specifically containing these key elements:\n\n- **Idea (Angle Headline):** The central \"big idea\" or winning angle for your script.\n- **Description:** A Markdown-formatted detailed breakdown of the angle, including potential visual hooks, emotional cues, persuasive messaging strategies, and explicit psychological techniques to employ.\n- **Audience & Psychological Insight:** Data and guidance about the ideal audience profile, core emotions, desires, fears, or objections to leverage within the script for maximum conversion power.\n\nYour job is to use this information to produce a complete and polished VSL script following this exact format and clearly labeled structure:\n\n### VSL Script Required Structure:\n\n**1. HOOK (0-10 seconds):**\n\n- Craft an instantly gripping, scroll-stopping opening sentence.  \n- Use powerful psychological triggers: provocative questions, shocking statistics, curiosity-building statements, contrarian claims, empathy-driven problems, or impactful visual concepts directly relevant to your viewer‚Äôs deepest desires or fears.\n- Set an emotional tone immediately, speaking directly to the viewer from the first second.\n\n**2. LEAD / PROBLEM AGITATION (10-30 seconds):**\n\n- Smoothly transition from your hook into clearly defining and magnifying the viewer‚Äôs core problem or pain points‚Äîmake sure these feel personal, specific, relatable, emotionally charged, and urgent.\n- Skillfully amplify the viewer‚Äôs emotional discomfort, vividly painting the negative consequences or future scenarios of ignoring this problem.\n- Subtly hint towards a revolutionary or intriguing solution without revealing your product explicitly yet, building curiosity.\n\n**3. BODY / SOLUTION PRESENTATION (30 seconds‚Äì2 minutes):**\n\n- Gracefully and believably introduce your product without blatant, immediate promotion. Frame it as the unique and perfect solution effortlessly connected to the viewer‚Äôs exact struggles, fears, and desires previously outlined.\n- Clearly explain the unique mechanism or features of the product in conversational, easy-to-understand language without jargon.\n- Clearly establish credibility: Incorporate persuasive social proof (realistic testimonials, short stories, transformational \"before-and-afters\"), simple readable statistics, scientific backing, or authoritative figures as proof of results. Always maintain believable language and avoid exaggerated claims.\n- Address and devastate potential common viewer objections clearly but conversationally, embedding reassurance, empathy and building trust.\n- Emphasize clearly how your product uniquely and importantly differs from competitor options, emphasizing meaningful emotional and logical advantages in the viewer‚Äôs specific context.\n\n**4. CALL-TO-ACTION (15‚Äì30 seconds):**\n\n- Provide a crystal-clear, powerfully persuasive directive (‚ÄúClick below,‚Äù ‚ÄúClaim your discount today,‚Äù etc.).\n- Clearly articulate your risk removal (guarantee or refund policy) and urgency/scarcity messaging (limited availability, limited time offer, exclusive discounts, etc.) to maximize likelihood of immediate action.\n- Remind viewers specifically and vividly about the primary transformation or benefit they'll obtain by responding immediately, triggering emotional and logical motivators simultaneously.\n- Use explicit action-oriented, imperative language: ‚ÄúClick,‚Äù ‚ÄúClaim,‚Äù ‚ÄúStart,‚Äù ‚ÄúSecure,‚Äù ‚ÄúOrder,‚Äù etc.\n\n### Essential Script Requirements & Instructions:\n\n- **Emotional Persuasion:** The script must clearly demonstrate mastery of persuasive techniques grounded in deep emotional and psychological understanding. You should leverage consumer fears, hopes, insecurities, aspirations, biases (loss aversion, scarcity, urgency, authority, social proof) and subconscious drivers explicitly outlined in your provided brief description.\n- **Conversational Tone & Flow:** Maintain an intimate, conversational, easy-to-understand, engaging, and friendly style of communication. Speak directly to viewers, always directly addressing ‚Äúyou,‚Äù as if having an intimate, honest conversation with a close trusted friend.\n- **Concise & Focused:** Every single sentence or phrase must be meaningful, driving interest or persuasion forward. Avoid fluff and vague language.\n- **Visual & Narrative Awareness:** Explicitly consider moments where visuals or storytelling elements (which the video creator may show on screen) would strongly amplify the message. Employ vivid verbal imagery and emotional appeals even though visuals aren't explicitly your responsibility.\n- **Facebook Ad Context:** Ensure your approach respects the context of Facebook ads‚Äîcaptivating immediately, holding short attention spans, emotionally charged, and clearly and urgently actionable.\n- **Ethical Persuasion:** Your persuasive and psychological techniques, however bold, must remain ethically responsible, tastefully executed, and plausible in their claims‚Äîavoiding unrealistic hype, false promises, or misleading assertions. Conversion rates come from trust and authenticity.\n\nYour final deliverable should explicitly label each structural component (HOOK, LEAD, BODY, CTA) clearly. You should construct the script in Markdown formatting for clarity and readability. Your response should start immediately with the script with NO intro statement. \n\nBy executing these explicit detailed guidelines, your produced scripts should consistently maximize viewer engagement, create intense emotional resonance, immediately remove common objections or hesitations, trigger powerful subconscious motivators, ethically persuade prospects, and drive immediate, measurable increases in direct-response sales conversions."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1568,
        3376
      ],
      "id": "6e019f0c-01ab-4f0d-b27d-3c8ea2d6d870",
      "name": "Basic LLM Chain"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Feedbacks:\n{{ $json.Feedback }}\n\n=====\n\nScript:\n{{ $json.Script }}\n\n\n====\nSome Context:\n{{ $json.ConceptSummary }}",
        "messages": {
          "messageValues": [
            {
              "message": "=You are an expert Video Sales Letter (VSL) scriptwriter specializing in creating highly converting VSL ads. Your task is to rewrite an existing VSL script based on the feedback provided. You will be given:\n\n1. **Original Script:** The current version of the VSL script.\n2. **Feedback:** Specific instructions, suggestions, or criticisms on how the script should be improved.\n3. **Additional Context:** Relevant details about the product, target audience, tone, or objectives that will help you better implement the feedback.\n\nUse the feedback and additional context to enhance the original script, ensuring it is engaging, persuasive, and optimized for high conversion rates. Your rewrite should clearly address each feedback point provided, improving clarity, impact, emotional resonance, and overall effectiveness."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1552,
        3696
      ],
      "id": "8e2cbcba-cf5b-43d7-8d58-6822d035d7f2",
      "name": "Basic LLM Chain3"
    },
    {
      "parameters": {
        "content": "## Scripting/Idea Generation/Feedback System - English\n",
        "height": 1260,
        "width": 3220,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        32,
        2736
      ],
      "typeVersion": 1,
      "id": "c1bf1120-bf01-4093-abd9-b4c0a5b67a7a",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1504,
        3232
      ],
      "id": "2aa05448-0f38-48e8-ab97-7ec5d4c37b3e",
      "name": "Google Gemini Chat Model2",
      "credentials": {
        "googlePalmApi": {
          "id": "Id8CEvNKDTHbg6vv",
          "name": "gemini marcos"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {
          "timeout": 600000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1760,
        3232
      ],
      "id": "95accade-04e1-4024-8469-3041841bb0a6",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "WEENPovt22LUaeRp",
          "name": "OpenAi - Marcos"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblTufVXzuUUvsqnD",
          "mode": "list",
          "cachedResultName": "Product",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv/tblTufVXzuUUvsqnD"
        },
        "id": "={{ $('Webhook2').item.json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1408,
        2832
      ],
      "id": "2533d6a9-86a4-4632-939f-a99ae32cdfca",
      "name": "Get Product2",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblTufVXzuUUvsqnD",
          "mode": "list",
          "cachedResultName": "Product",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv/tblTufVXzuUUvsqnD"
        },
        "id": "={{ $('Webhook2').item.json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1408,
        3072
      ],
      "id": "58853189-73b4-4970-8d46-7ad0f4ad5d04",
      "name": "Get Product3",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv/tbl0ynpBwH6r97TNN"
        },
        "id": "={{ $('Webhook2').item.json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1408,
        3376
      ],
      "id": "d9882442-8abf-4ce9-8964-b407fa65aa32",
      "name": "Get Script2",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "base": {
          "__rl": true,
          "value": "appsvPpfVc00sZlRR",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR/tbl0ynpBwH6r97TNN"
        },
        "id": "={{ $('Webhook2').item.json.query.recordId }}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1408,
        3696
      ],
      "id": "1a4b51d0-2f93-4f29-8809-d32792c86a18",
      "name": "Get Script3",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblTufVXzuUUvsqnD",
          "mode": "list",
          "cachedResultName": "Product",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tblTufVXzuUUvsqnD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook2').item.json.query.recordId }}",
            "Product Details": "={{ $json.choices[0].message.content }}",
            "Status": "Product Details Generated",
            "2Ô∏è‚É£ Generate Angles": true
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Product Name",
              "displayName": "Product Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Product Notes",
              "displayName": "Product Notes",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Product Details",
                  "value": "Generating Product Details"
                },
                {
                  "name": "Generating Angles",
                  "value": "Generating Angles"
                },
                {
                  "name": "Product Details Generated",
                  "value": "Product Details Generated"
                },
                {
                  "name": "Angles Generated",
                  "value": "Angles Generated"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product Details",
              "displayName": "Product Details",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "1Ô∏è‚É£ Generate Product Details",
              "displayName": "1Ô∏è‚É£ Generate Product Details",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "2Ô∏è‚É£ Generate Angles",
              "displayName": "2Ô∏è‚É£ Generate Angles",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Winning Ad Script",
              "displayName": "Winning Ad Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Step 1",
              "displayName": "Step 1",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Step 2",
              "displayName": "Step 2",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Projects",
              "displayName": "Projects",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Scripting",
              "displayName": "Scripting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Angle Headline",
              "displayName": "Angle Headline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Ads Performance",
              "displayName": "Ads Performance",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2032,
        2832
      ],
      "id": "01f346b4-748c-4860-9a9f-651711c5ba51",
      "name": "Update Product Details1",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tbl0ynpBwH6r97TNN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Direct Response Techniques": "={{ $json.DirectResponseTechniques }}",
            "Product": "={{ $('Edit Fields1').item.json.project }}",
            "AngleHeadline": "={{ $json.AngleHeadline }}",
            "ConceptSummary": "={{ $json.ConceptSummary }}",
            "VSLStructure": "={{ $json.VSLStructure }}",
            "VideoSuggestion": "={{ $json.VideoSuggestion }}",
            "EmotionalTriggers": "={{ $json.EmotionalTriggers }}",
            "CognitiveBiasesLeveraged": "={{ $json.CognitiveBiasesLeveraged }}",
            "Status": "Idle"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "AngleHeadline",
              "displayName": "AngleHeadline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "ConceptSummary",
              "displayName": "ConceptSummary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "VSLStructure",
              "displayName": "VSLStructure",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "VideoSuggestion",
              "displayName": "VideoSuggestion",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "EmotionalTriggers",
              "displayName": "EmotionalTriggers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "CognitiveBiasesLeveraged",
              "displayName": "CognitiveBiasesLeveraged",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Direct Response Techniques",
              "displayName": "Direct Response Techniques",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "3Ô∏è‚É£ Select Script Length",
              "displayName": "3Ô∏è‚É£ Select Script Length",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "< 1 min",
                  "value": "< 1 min"
                },
                {
                  "name": "1-3 mins",
                  "value": "1-3 mins"
                },
                {
                  "name": "3-5 mins",
                  "value": "3-5 mins"
                },
                {
                  "name": "5-7 mins",
                  "value": "5-7 mins"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "4Ô∏è‚É£ Feedback",
              "displayName": "4Ô∏è‚É£ Feedback",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Script",
                  "value": "Generating Script"
                },
                {
                  "name": "Revision in progress",
                  "value": "Revision in progress"
                },
                {
                  "name": "Script Generated",
                  "value": "Script Generated"
                },
                {
                  "name": "Script Revised",
                  "value": "Script Revised"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Script",
              "displayName": "Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Product",
              "displayName": "Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "About Product",
              "displayName": "About Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Records (Nested)",
              "displayName": "Records (Nested)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "5Ô∏è‚É£ Generate Script",
              "displayName": "5Ô∏è‚É£ Generate Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Shortlist",
              "displayName": "Shortlist",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2448,
        3072
      ],
      "id": "e49c4906-c655-4b27-93a0-d9982cefc9ab",
      "name": "Create Angles1",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appsvPpfVc00sZlRR",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tbl0ynpBwH6r97TNN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Get Script3').item.json.id }}",
            "Script": "={{ $json.text }}",
            "Status": "Script Revised",
            "5Ô∏è‚É£ Generate Script": false
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "AngleHeadline",
              "displayName": "AngleHeadline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "ConceptSummary",
              "displayName": "ConceptSummary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VSLStructure",
              "displayName": "VSLStructure",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VideoSuggestion",
              "displayName": "VideoSuggestion",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "EmotionalTriggers",
              "displayName": "EmotionalTriggers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CognitiveBiasesLeveraged",
              "displayName": "CognitiveBiasesLeveraged",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Direct Response Techniques",
              "displayName": "Direct Response Techniques",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "3Ô∏è‚É£ Select Script Length",
              "displayName": "3Ô∏è‚É£ Select Script Length",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "< 1 min",
                  "value": "< 1 min"
                },
                {
                  "name": "1-3 mins",
                  "value": "1-3 mins"
                },
                {
                  "name": "3-5 mins",
                  "value": "3-5 mins"
                },
                {
                  "name": "5-7 mins",
                  "value": "5-7 mins"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "4Ô∏è‚É£ Feedback",
              "displayName": "4Ô∏è‚É£ Feedback",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Script",
                  "value": "Generating Script"
                },
                {
                  "name": "Revision in progress",
                  "value": "Revision in progress"
                },
                {
                  "name": "Script Generated",
                  "value": "Script Generated"
                },
                {
                  "name": "Script Revised",
                  "value": "Script Revised"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Script",
              "displayName": "Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product",
              "displayName": "Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "About Product",
              "displayName": "About Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Records (Nested)",
              "displayName": "Records (Nested)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "5Ô∏è‚É£ Generate Script",
              "displayName": "5Ô∏è‚É£ Generate Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Shortlist",
              "displayName": "Shortlist",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1888,
        3696
      ],
      "id": "29879860-1796-49bd-bce4-851ca07106a5",
      "name": "Update Script",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Product Name: {{ $json['Product Name'] }}\n-----\nProduct Research Details: {{ $json['Product Details'] }}\n----\nProduct Notes: {{ $json['Product Notes'] }}\n\n-----\nWinning Scripts: {{ $json[\"Winning Ad Script\"].map((script, index) => `Script ${index + 1}: ${script}`).join(\"\\n\") }}\n\n\n\n----\nHere are the angles you've already created that works use them as inspiration, and give the output by analysing what angles work and then output in structured JSON:\n{{ $json['Angle Headline'] }}\n==========\n\nUsing all this data give me 5-8 ideas in specified schema. DON'T GIVE ANY PREFIX OR SUFFIX JUST ARRAY OF 5-8 OBJECTS WITH SPECIFIC KEYS, DON'T WRAP THE OUTPUT IN ``` or ANYTHING PURE CODE",
        "messages": {
          "messageValues": [
            {
              "message": "=You are a world-class advertising copywriter specializing exclusively in crafting high-performing Video Sales Letter (VSL) scripts designed for impactful, direct-response digital marketing. Your sole mission is turning ordinary products into irresistible offers through story-driven psychological persuasion, emotional resonance, and highly compelling, click-inducing angles aimed at maximizing conversions.\n\nYour deep expertise involves understanding human psychology, consumer fears, desires, skepticism, biases, and emotions intimately. You masterfully apply frameworks proven to convert, such as Problem-Agitate-Solution (PAS), Before-After-Bridge (BAB), Story-Based Selling, Contrarian Myth-Busting, Fear-of-Missing-Out (FOMO), and powerful social proof or credibility elements. You're particularly skillful at navigating delicate, sensitive, or even darker psychological territories ethically but persuasively‚Äîboldly leveraging audience desires, anxieties, insecurities, and subconscious motivators to immediately grab attention, build trust, drive deep desire, and compel instant action.\n\nWhen provided with details about a product, your task is to generate a collection of at least 5 (and up to 8) distinctively original, high-quality, and conversion-driven VSL concept angles. Each VSL Angle must include:\n\n> AngleHeadline:\nAn eye-catching, curiosity-inducing hook that feels impossible to scroll past.\n\n> ConceptSummary:\nClearly outline the overarching creative strategy, psychological lever, and key selling point behind this angle. Explain exactly why it taps into the viewer‚Äôs core emotions, desires, or fears to drive urgency, curiosity, and ultimately conversions.\n\n> VSLStructure:\nBriefly describe how the VSL should unfold, including attention-grabbing hook/lead, clear framing of the customer's specific struggles, agitation methods (stories, statistics, hidden truths, or common myths), credible authority demonstrations or convincing proof-based narratives, seamless introduction of the solution, and strong, actionable calls-to-action.\n\n> VideoSuggestion:\nProvide potential visual themes, scenes, or references (briefly) that could support the narrative and enhance the emotional effectiveness of the message. Describe elements like settings, characters, storytelling visuals, social proof placement, or demonstrations that can visually strengthen psychological persuasion points.\n\n> EmotionalTriggers:\nBriefly list explicitly the psychological levers, emotional triggers (e.g., fear, hope, envy, social status, anxiety relief), in pointers and brief description.\n\n> CognitiveBiasesLeveraged\nBriefly list explicitly the cognitive biases (authority bias, scarcity principle, loss aversion, confirmation bias, social proof, sunk-cost fallacy), and subconscious motivators you will leverage for impeccable persuasive impact.\n\n\n> DirectResponseTechniques:\nClearly explain how proven direct-response strategies (urgency, scarcity, risk reversals, powerful guarantees, instant benefits, exclusivity, etc.) are woven into the VSL angle to drive immediate viewer action and conversions.\n\nThe output format is exactly (keys) like this:\n[{\n\"AngleHeadline\": \"String mostly 1 liner the headline\",\n\"ConceptSummary\": \"String, expressive and articulate\",\n\"VSLStructure\": \"String, markdown if required descriptive\",\n\"VideoSuggestion\" \"String, Provide potential visual themes, scenes, or references (briefly)\",\n\"EmotionalTriggers\": \"String, descriptive can be in markdown format\",\nCognitiveBiasesLeveraged: \"String, descriptive explanation of the cognitive biases utilized\",\n\"DirectResponseTechniques\": \"String, descriptive\"\n}]\n\n\nYou are free and encouraged to creatively explore emotionally powerful, bold, and daring messaging angles, while ensuring the concepts are tasteful and ethically defensible. Assume prospects will see these VSLs as social media ads, so each idea must be instantly engaging, appealing, easy to comprehend, credibility-boosting, and highly compelling within the first seconds of viewing.\n\nWhen the user provides a product name and details, you must respond with your output formatted as an easily readable JSON array. Each unique sales angle should be structured as a self-contained JSON object that precisely follows the schema described above.\n\nYour outputs should empower advertisers to immediately recognize why each concept stands to significantly outperform conventional scripts in terms of engagement, emotional connection, memorability, and most importantly‚Äîconversion rates."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1552,
        3072
      ],
      "id": "815c113b-7e6e-46b7-bc5c-38a52d3d9da3",
      "name": "Generate Angles1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.text }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "Parse thw output line by like exactly like the previous system gave it to you but in JSON format."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1840,
        3072
      ],
      "id": "360836d7-9e95-48db-a7eb-935672643a26",
      "name": "Parsing1"
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tblTufVXzuUUvsqnD",
          "mode": "list",
          "cachedResultName": "Product",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv/tblTufVXzuUUvsqnD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "1Ô∏è‚É£ Generate Product Details": true,
            "2Ô∏è‚É£ Generate Angles": true,
            "Status": "Angles Generated",
            "id": "={{ $('Webhook2').item.json.query.recordId }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "Product Name",
              "displayName": "Product Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product Notes",
              "displayName": "Product Notes",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Product Details",
                  "value": "Generating Product Details"
                },
                {
                  "name": "Generating Angles",
                  "value": "Generating Angles"
                },
                {
                  "name": "Product Details Generated",
                  "value": "Product Details Generated"
                },
                {
                  "name": "Angles Generated",
                  "value": "Angles Generated"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product Details",
              "displayName": "Product Details",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "1Ô∏è‚É£ Generate Product Details",
              "displayName": "1Ô∏è‚É£ Generate Product Details",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "2Ô∏è‚É£ Generate Angles",
              "displayName": "2Ô∏è‚É£ Generate Angles",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Winning Ad Script",
              "displayName": "Winning Ad Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Step 1",
              "displayName": "Step 1",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Step 2",
              "displayName": "Step 2",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Projects",
              "displayName": "Projects",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Scripting",
              "displayName": "Scripting",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Angle Headline",
              "displayName": "Angle Headline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Ads Performance",
              "displayName": "Ads Performance",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2624,
        3072
      ],
      "id": "fc0bc5a7-64ff-49c9-9a05-f2c78545099b",
      "name": "Update Product1",
      "executeOnce": true,
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1520,
        3584
      ],
      "id": "cefb7a9c-a406-4554-a03c-592fa1483caf",
      "name": "Google Gemini Chat Model3",
      "credentials": {
        "googlePalmApi": {
          "id": "Id8CEvNKDTHbg6vv",
          "name": "gemini marcos"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1520,
        3872
      ],
      "id": "86d52d32-0627-4976-ad3d-c8acbffc02ab",
      "name": "Google Gemini Chat Model7",
      "credentials": {
        "googlePalmApi": {
          "id": "Id8CEvNKDTHbg6vv",
          "name": "gemini marcos"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appSPnZynb2jGYGRv"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tbl0ynpBwH6r97TNN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook2').item.json.query.recordId }}",
            "Script": "={{ $json.text }}",
            "Status": "Script Generated",
            "5Ô∏è‚É£ Generate Script": false
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "AngleHeadline",
              "displayName": "AngleHeadline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "ConceptSummary",
              "displayName": "ConceptSummary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VSLStructure",
              "displayName": "VSLStructure",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VideoSuggestion",
              "displayName": "VideoSuggestion",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "EmotionalTriggers",
              "displayName": "EmotionalTriggers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CognitiveBiasesLeveraged",
              "displayName": "CognitiveBiasesLeveraged",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Direct Response Techniques",
              "displayName": "Direct Response Techniques",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "3Ô∏è‚É£ Select Script Length",
              "displayName": "3Ô∏è‚É£ Select Script Length",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "< 1 min",
                  "value": "< 1 min"
                },
                {
                  "name": "1-3 mins",
                  "value": "1-3 mins"
                },
                {
                  "name": "3-5 mins",
                  "value": "3-5 mins"
                },
                {
                  "name": "5-7 mins",
                  "value": "5-7 mins"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "4Ô∏è‚É£ Feedback",
              "displayName": "4Ô∏è‚É£ Feedback",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Script",
                  "value": "Generating Script"
                },
                {
                  "name": "Revision in progress",
                  "value": "Revision in progress"
                },
                {
                  "name": "Script Generated",
                  "value": "Script Generated"
                },
                {
                  "name": "Script Revised",
                  "value": "Script Revised"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Script",
              "displayName": "Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product",
              "displayName": "Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "About Product",
              "displayName": "About Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Records (Nested)",
              "displayName": "Records (Nested)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "5Ô∏è‚É£ Generate Script",
              "displayName": "5Ô∏è‚É£ Generate Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Shortlist",
              "displayName": "Shortlist",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2000,
        3520
      ],
      "id": "962e0f7e-1bc5-4d9e-9c76-d674172a1c39",
      "name": "Update Script4",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appsvPpfVc00sZlRR",
          "mode": "list",
          "cachedResultName": "AI VSL Demo",
          "cachedResultUrl": "https://airtable.com/appsvPpfVc00sZlRR"
        },
        "table": {
          "__rl": true,
          "value": "tbl0ynpBwH6r97TNN",
          "mode": "list",
          "cachedResultName": "Scripting",
          "cachedResultUrl": "https://airtable.com/appC6X1Ndv6AXCslR/tbl0ynpBwH6r97TNN"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Webhook2').item.json.query.recordId }}",
            "Script": "={{ $json.text }}",
            "Status": "Script Generated",
            "5Ô∏è‚É£ Generate Script": false
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "AngleHeadline",
              "displayName": "AngleHeadline",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "ConceptSummary",
              "displayName": "ConceptSummary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VSLStructure",
              "displayName": "VSLStructure",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "VideoSuggestion",
              "displayName": "VideoSuggestion",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "EmotionalTriggers",
              "displayName": "EmotionalTriggers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "CognitiveBiasesLeveraged",
              "displayName": "CognitiveBiasesLeveraged",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Direct Response Techniques",
              "displayName": "Direct Response Techniques",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "3Ô∏è‚É£ Select Script Length",
              "displayName": "3Ô∏è‚É£ Select Script Length",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "< 1 min",
                  "value": "< 1 min"
                },
                {
                  "name": "1-3 mins",
                  "value": "1-3 mins"
                },
                {
                  "name": "3-5 mins",
                  "value": "3-5 mins"
                },
                {
                  "name": "5-7 mins",
                  "value": "5-7 mins"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "4Ô∏è‚É£ Feedback",
              "displayName": "4Ô∏è‚É£ Feedback",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Idle",
                  "value": "Idle"
                },
                {
                  "name": "Generating Script",
                  "value": "Generating Script"
                },
                {
                  "name": "Revision in progress",
                  "value": "Revision in progress"
                },
                {
                  "name": "Script Generated",
                  "value": "Script Generated"
                },
                {
                  "name": "Script Revised",
                  "value": "Script Revised"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Script",
              "displayName": "Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Product",
              "displayName": "Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "About Product",
              "displayName": "About Product",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Records (Nested)",
              "displayName": "Records (Nested)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "5Ô∏è‚É£ Generate Script",
              "displayName": "5Ô∏è‚É£ Generate Script",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Shortlist",
              "displayName": "Shortlist",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2096,
        3632
      ],
      "id": "202c4636-a39a-44cc-91c5-95de4fa6ef72",
      "name": "Update Script5",
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "fd971efb-21ff-41dc-be50-e285d67e9c64"
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        1840,
        1520
      ],
      "id": "ad0c703a-804d-404c-a4b4-90c4ea00c206",
      "name": "Switch3"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=üåê LANGUAGE: {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}\n\nProduct Name: {{ $json['Product Name'] }}\n-----\nProduct Research Details: {{ $json['Product Details'] }}\n----\nProduct Notes: {{ $json['Product Notes'] }}\n\n-----\nWinning Scripts: {{ $json[\"Winning Ad Script\"].map((script, index) => `Script ${index + 1}: ${script}`).join(\"\\n\") }}\n\n----\nHere are the angles you've already created that work, use them as inspiration:\n{{ $json['Angle Headline'] }}\n==========\n\n‚ö†Ô∏è RESPOND IN: {{ $('Get Product1').item.json['0Ô∏è‚É£ Language'] || 'Portugu√™s' }}\n\nUsing all this data, give me 5-8 ideas in specified schema. \n\n‚ö†Ô∏è CRITICAL REMINDERS:\n- Research using US advertising best practices and frameworks\n- Write ALL content values in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}\n- JSON keys in English, content in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}\n\nDON'T GIVE ANY PREFIX OR SUFFIX JUST ARRAY OF 5-8 OBJECTS WITH SPECIFIC KEYS, DON'T WRAP THE OUTPUT IN ``` OR ANYTHING PURE CODE.",
        "messages": {
          "messageValues": [
            {
              "message": "=üåê RESPONSE LANGUAGE: {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}\nüîç RESEARCH MARKET: United States (analyze US advertising trends and frameworks)\n\n‚ö†Ô∏è CRITICAL INSTRUCTION: \nResearch and analyze using US market references, top US advertisers, American copywriting frameworks (Russell Brunson, Dan Kennedy, Eugene Schwartz, David Ogilvy, Gary Halbert, etc.), but write your ENTIRE output in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}.\n\nJSON Structure: Keys in English, ALL content values in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}\n\n---\n\nYou are a world-class advertising copywriter specializing exclusively in crafting high-performing Video Sales Letter (VSL) scripts designed for impactful, direct-response digital marketing. Your sole mission is turning ordinary products into irresistible offers through story-driven psychological persuasion, emotional resonance, and highly compelling, click-inducing angles aimed at maximizing conversions.\n\nYour deep expertise involves understanding human psychology, consumer fears, desires, skepticism, biases, and emotions intimately. You masterfully apply frameworks proven to convert in the US market, such as Problem-Agitate-Solution (PAS), Before-After-Bridge (BAB), Story-Based Selling, Contrarian Myth-Busting, Fear-of-Missing-Out (FOMO), and powerful social proof or credibility elements. You're particularly skillful at navigating delicate, sensitive, or even darker psychological territories ethically but persuasively‚Äîboldly leveraging audience desires, anxieties, insecurities, and subconscious motivators to immediately grab attention, build trust, drive deep desire, and compel instant action.\n\nüéØ LANGUAGE PROTOCOL:\n- ‚úÖ Research Base: US market advertising trends, American frameworks, top US copywriters (Eugene Schwartz, Dan Kennedy, Russell Brunson, Clayton Makepeace, Gary Halbert, David Ogilvy)\n- ‚úÖ Output Language: Write EVERYTHING in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}\n- ‚úÖ JSON Structure: Keys in English (AngleHeadline, ConceptSummary, etc.) but ALL values/content in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}\n- ‚úÖ Cultural Adaptation: While using US frameworks, adapt examples and references to resonate with {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}-speaking audiences\n\nWhen provided with details about a product, your task is to generate a collection of at least 5 (and up to 8) distinctively original, high-quality, and conversion-driven VSL concept angles. Each VSL Angle must include:\n\n> AngleHeadline:\nAn eye-catching, curiosity-inducing hook that feels impossible to scroll past. Must be written in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}, adapted for the target audience's cultural context.\n\n> ConceptSummary:\nClearly outline the overarching creative strategy, psychological lever, and key selling point behind this angle. Explain exactly why it taps into the viewer's core emotions, desires, or fears to drive urgency, curiosity, and ultimately conversions. Write in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}.\n\n> VSLStructure:\nBriefly describe how the VSL should unfold, including attention-grabbing hook/lead, clear framing of the customer's specific struggles, agitation methods (stories, statistics, hidden truths, or common myths), credible authority demonstrations or convincing proof-based narratives, seamless introduction of the solution, and strong, actionable calls-to-action. Write in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}.\n\n> VideoSuggestion:\nProvide potential visual themes, scenes, or references (briefly) that could support the narrative and enhance the emotional effectiveness of the message. Describe elements like settings, characters, storytelling visuals, social proof placement, or demonstrations that can visually strengthen psychological persuasion points. Write in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}.\n\n> EmotionalTriggers:\nBriefly list explicitly the psychological levers, emotional triggers (e.g., fear, hope, envy, social status, anxiety relief), in pointers and brief description. Write in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}.\n\n> CognitiveBiasesLeveraged:\nBriefly list explicitly the cognitive biases (authority bias, scarcity principle, loss aversion, confirmation bias, social proof, sunk-cost fallacy), and subconscious motivators you will leverage for impeccable persuasive impact. Write in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}.\n\n> DirectResponseTechniques:\nClearly explain how proven direct-response strategies (urgency, scarcity, risk reversals, powerful guarantees, instant benefits, exclusivity, etc.) are woven into the VSL angle to drive immediate viewer action and conversions. Write in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}.\n\nOUTPUT FORMAT (Keys in English, ALL content in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}):\n[{\n\"AngleHeadline\": \"String in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }} - mostly 1 liner headline\",\n\"ConceptSummary\": \"String in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }} - expressive and articulate\",\n\"VSLStructure\": \"String in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }} - markdown format, descriptive\",\n\"VideoSuggestion\": \"String in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }} - visual themes and scenes\",\n\"EmotionalTriggers\": \"String in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }} - descriptive, can use markdown\",\n\"CognitiveBiasesLeveraged\": \"String in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }} - descriptive explanation\",\n\"DirectResponseTechniques\": \"String in {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }} - descriptive\"\n}]\n\n‚ö†Ô∏è CRITICAL OUTPUT RULES:\n1. DON'T GIVE ANY PREFIX OR SUFFIX - JUST THE JSON ARRAY\n2. DON'T WRAP OUTPUT IN ``` or MARKDOWN CODE BLOCKS\n3. PURE JSON ARRAY OF 5-8 OBJECTS\n4. ALL CONTENT VALUES IN {{ $('Get Product1').item.json['Language'] || 'Portugu√™s' }}\n5. JSON KEYS REMAIN IN ENGLISH\n\nYou are free and encouraged to creatively explore emotionally powerful, bold, and daring messaging angles based on US market best practices, while ensuring the concepts are tasteful and ethically defensible. Assume prospects will see these VSLs as social media ads, so each idea must be instantly engaging, appealing, easy to comprehend, credibility-boosting, and highly compelling within the first seconds of viewing.\n\n{{ $('Get Product1').item.json['Language'] === 'Portugu√™s' ? 'LEMBRE-SE: Todo o CONTE√öDO em PORTUGU√äS BRASILEIRO (chaves JSON em ingl√™s)' : $('Get Product1').item.json['Language'] === 'English' ? 'REMEMBER: All CONTENT in ENGLISH (JSON keys remain in English)' : $('Get Product1').item.json['Language'] === 'Espa√±ol' ? 'RECUERDA: Todo el CONTENIDO en ESPA√ëOL (llaves JSON en ingl√©s)' : 'PORTUGU√äS BRASILEIRO para todo conte√∫do' }}\n\nYour outputs should empower advertisers to immediately recognize why each concept stands to significantly outperform conventional scripts in terms of engagement, emotional connection, memorability, and most importantly‚Äîconversion rates."
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.5,
      "position": [
        1552,
        1760
      ],
      "id": "e2c5816f-46ce-4158-a468-f1f537d1c404",
      "name": "Generate Angles"
    },
    {
      "parameters": {
        "jsCode": "const item = $input.item;\nconst language = item.json.Language || 'Portugu√™s';\nconst userPrompt = item.json.userprompt;\n\nconst requestBody = {\n  model: \"sonar-reasoning\",\n  messages: [\n    {\n      role: \"system\",\n      content: `You are an Internet researcher specialized in the US market. Research using English sources, but write your response in ${language}.`\n    },\n    {\n      role: \"user\",\n      content: `RESPONSE LANGUAGE: ${language}\\n\\n${userPrompt}\\n\\n‚ö†Ô∏è Research US market ‚Üí Respond in ${language}`\n    }\n  ]\n};\n\n// Converter para string e salvar\nitem.json.bodyString = JSON.stringify(requestBody);\n\nreturn item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2048,
        1520
      ],
      "id": "dc2491bc-7b4e-49c9-93f5-fcc8770d353a",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.perplexity.ai/chat/completions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 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"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $json.bodyString }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2208,
        1520
      ],
      "id": "b3f47e7e-6952-456d-b719-9c5e2dd0e8d5",
      "name": "Product Overview & Customer Research2"
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo"
        },
        "table": {
          "__rl": true,
          "value": "tblq56TF4aT0Zz1sN",
          "mode": "list",
          "cachedResultName": "Ads Performance"
        },
        "filterByFormula": "=AND({Date} >= '{{ $json.startDate }}', {Date} <= '{{ $json.endDate }}', {Active Status} = 'ACTIVE')",
        "options": {}
      },
      "id": "074334d2-331c-4483-8876-fabe0bcdc1cd",
      "name": "Get Weekly Data1",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3680,
        448
      ],
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "Date",
        "include": "allOtherFields",
        "options": {}
      },
      "id": "8421d071-453f-4280-9bb0-d524894d9be4",
      "name": "Split Out5",
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        3936,
        160
      ]
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\n// Pega datas do pr√≥prio item (que agora vem do Code anterior)\nconst startDate = items[0].json.startDateFormatted;\nconst endDate = items[0].json.endDateFormatted;\n\n// Cabe√ßalho do relat√≥rio\nlet message = `Bom dia, pessoal! Report atualizado das campanhas - ${startDate} √† ${endDate}\\n\\n`;\n\n// Para cada campanha\nitems.forEach((item) => {\n  const campaignName = item.json.campaignName || 'Sem Nome';\n  const spend = parseFloat(item.json.totalSpend || 0);\n  const conversas = parseInt(item.json.totalConversas || 0);\n  const depth2 = parseInt(item.json.totalMensagensDepth2 || 0);\n  const impressions = parseInt(item.json.totalImpressions || 0);\n  const clicks = parseInt(item.json.totalClicks || 0);\n  \n  // C√°lculos\n  const custoMensagem = conversas > 0 ? (spend / conversas) : 0;\n  const cpm = impressions > 0 ? ((spend / impressions) * 1000) : 0;\n  const ctr = impressions > 0 ? ((clicks / impressions) * 100) : 0;\n  const taxaConversao = conversas > 0 ? ((depth2 / conversas) * 100) : 0;\n  \n  // Formatar linha da campanha\n  message += `Campanha: ${campaignName}\\n`;\n  message += `Valor Investido: $${spend.toFixed(2)}\\n`;\n  message += `Conversas Iniciadas: ${conversas}\\n`;\n  message += `Custo por mensagem: $${custoMensagem.toFixed(2)}\\n`;\n  message += `CPM: $${cpm.toFixed(2)}\\n`;\n  message += `CTR: ${ctr.toFixed(2)}%\\n`;\n  message += `Taxa de Convers√£o: ${taxaConversao.toFixed(2)}%\\n\\n`;\n});\n\nreturn [{\n  json: {\n    message: message.trim(),\n    contactId: 'skfa6JP6lLlAXkc8FfIp',\n    telefone: '+5519999999999'  // ‚Üê TROCA PELO N√öMERO REAL!\n  }\n}];"
      },
      "id": "12537839-5a5a-498e-8cec-a96243e6a3db",
      "name": "Format Report1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4384,
        192
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://services.leadconnectorhq.com/conversations/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer pit-fe627027-b9cb-4ea3-aaa4-149459e66a03"
            },
            {
              "name": "Version",
              "value": "2021-04-15"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "SMS"
            },
            {
              "name": "contactId",
              "value": "={{ $json.contactId }}"
            },
            {
              "name": "message",
              "value": "={{ $json.message }}"
            },
            {
              "name": "phone",
              "value": "={{ $json.telefone }}"
            }
          ]
        },
        "options": {}
      },
      "id": "6af6a401-bbc6-42c2-a6d8-6b5df0a91b12",
      "name": "Send WhatsApp Report1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4624,
        464
      ]
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\n// Pega as datas do node anterior (tenta v√°rios nomes poss√≠veis)\nlet startDateFormatted, endDateFormatted;\n\ntry {\n  // Tenta pegar do Calculate Week Dates2\n  const datesNode = $('Calculate Week Dates2');\n  startDateFormatted = datesNode.item.json.startDateFormatted;\n  endDateFormatted = datesNode.item.json.endDateFormatted;\n} catch (e) {\n  try {\n    // Se n√£o funcionar, tenta Calculate Week Dates\n    const datesNode = $('Calculate Week Dates');\n    startDateFormatted = datesNode.item.json.startDateFormatted;\n    endDateFormatted = datesNode.item.json.endDateFormatted;\n  } catch (e2) {\n    // Fallback: usa data de hoje\n    const now = new Date();\n    startDateFormatted = now.toLocaleDateString('pt-BR');\n    endDateFormatted = now.toLocaleDateString('pt-BR');\n  }\n}\n\n// Agrupa por Campaign Name\nconst grouped = {};\n\nitems.forEach(item => {\n  const campaignName = item.json['Campaign Name'] || 'Sem Nome';\n  \n  if (!grouped[campaignName]) {\n    grouped[campaignName] = {\n      campaignName: campaignName,\n      totalSpend: 0,\n      totalConversas: 0,\n      totalMensagensDepth2: 0,\n      totalImpressions: 0,\n      totalClicks: 0\n    };\n  }\n  \n  // Soma os valores\n  grouped[campaignName].totalSpend += parseFloat(item.json.Spend || 0);\n  grouped[campaignName].totalConversas += parseInt(item.json['Conversas Iniciadas'] || 0);\n  grouped[campaignName].totalMensagensDepth2 += parseInt(item.json['Mensagens Depth 2'] || 0);\n  grouped[campaignName].totalImpressions += parseInt(item.json.Impressions || 0);\n  grouped[campaignName].totalClicks += parseInt(item.json.Clicks || 0);\n});\n\n// Converte objeto em array e ADICIONA as datas\nconst result = Object.values(grouped).map(campaign => ({\n  ...campaign,\n  startDateFormatted: startDateFormatted,\n  endDateFormatted: endDateFormatted\n}));\n\nreturn result.map(item => ({ json: item }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4160,
        464
      ],
      "id": "f1087b3d-cf79-4e22-956f-ec7756b691f0",
      "name": "Code in JavaScript4"
    },
    {
      "parameters": {
        "jsCode": "// Relat√≥rio do DIA ANTERIOR (ontem)\nconst now = new Date();\n\n// Ontem in√≠cio (00:00)\nconst startDate = new Date(now);\nstartDate.setDate(now.getDate() - 1);\nstartDate.setHours(0, 0, 0, 0);\n\n// Ontem fim (23:59)\nconst endDate = new Date(now);\nendDate.setDate(now.getDate() - 1);\nendDate.setHours(23, 59, 59, 999);\n\nreturn [{\n  json: {\n    startDate: startDate.toISOString().split('T')[0],\n    endDate: endDate.toISOString().split('T')[0],\n    startDateFormatted: startDate.toLocaleDateString('pt-BR'),\n    endDateFormatted: endDate.toLocaleDateString('pt-BR')\n  }\n}];"
      },
      "id": "d82605d5-34f4-4df4-888e-ba709332370b",
      "name": "1 dia",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3472,
        160
      ]
    },
    {
      "parameters": {
        "jsCode": "// Calcula segunda e domingo da semana PASSADA\nconst now = new Date();\nconst dayOfWeek = now.getDay();\n\n// Segunda da semana passada\nconst lastMonday = new Date(now);\nlastMonday.setDate(now.getDate() - dayOfWeek - 6);\nlastMonday.setHours(0, 0, 0, 0);\n\n// Domingo da semana passada\nconst lastSunday = new Date(lastMonday);\nlastSunday.setDate(lastMonday.getDate() + 6);\nlastSunday.setHours(23, 59, 59, 999);\n\nreturn [{\n  json: {\n    startDate: lastMonday.toISOString().split('T')[0],\n    endDate: lastSunday.toISOString().split('T')[0],\n    startDateFormatted: lastMonday.toLocaleDateString('pt-BR'),\n    endDateFormatted: lastSunday.toLocaleDateString('pt-BR')\n  }\n}];"
      },
      "id": "6498e9e5-7297-4c89-a89a-2cbb4068aeb1",
      "name": "√öltima semana",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        272,
        -800
      ]
    },
    {
      "parameters": {
        "jsCode": "// Calcula os √öLTIMOS 3 DIAS\nconst now = new Date();\n\n// Hoje (fim)\nconst endDate = new Date(now);\nendDate.setHours(23, 59, 59, 999);\n\n// 3 dias atr√°s (in√≠cio)\nconst startDate = new Date(now);\nstartDate.setDate(now.getDate() - 3);\nstartDate.setHours(0, 0, 0, 0);\n\nreturn [{\n  json: {\n    startDate: startDate.toISOString().split('T')[0],\n    endDate: endDate.toISOString().split('T')[0],\n    startDateFormatted: startDate.toLocaleDateString('pt-BR'),\n    endDateFormatted: endDate.toLocaleDateString('pt-BR')\n  }\n}];"
      },
      "id": "e77df390-0cac-4c36-908f-ac57bf88d62c",
      "name": "√öltimos 3 dias",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        304,
        -528
      ]
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\n// Pega as datas do Calculate Week Dates\nconst datesNode = $('√öltimos 3 dias');\nconst startDateFormatted = datesNode.item.json.startDateFormatted;\nconst endDateFormatted = datesNode.item.json.endDateFormatted;\n\n// Agrupa por Campaign Name\nconst grouped = {};\n\nitems.forEach(item => {\n  const campaignName = item.json['Campaign Name'] || 'Sem Nome';\n  \n  if (!grouped[campaignName]) {\n    grouped[campaignName] = {\n      campaignName: campaignName,\n      totalSpend: 0,\n      totalConversas: 0,\n      totalMensagensDepth2: 0,\n      totalImpressions: 0,\n      totalClicks: 0\n    };\n  }\n  \n  // Soma os valores\n  grouped[campaignName].totalSpend += parseFloat(item.json.Spend || 0);\n  grouped[campaignName].totalConversas += parseInt(item.json['Conversas Iniciadas'] || 0);\n  grouped[campaignName].totalMensagensDepth2 += parseInt(item.json['Mensagens Depth 2'] || 0);\n  grouped[campaignName].totalImpressions += parseInt(item.json.Impressions || 0);\n  grouped[campaignName].totalClicks += parseInt(item.json.Clicks || 0);\n});\n\n// Converte objeto em array e ADICIONA as datas\nconst result = Object.values(grouped).map(campaign => ({\n  ...campaign,\n  startDateFormatted: startDateFormatted,\n  endDateFormatted: endDateFormatted\n}));\n\nreturn result.map(item => ({ json: item }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        976,
        -528
      ],
      "id": "1a4da861-079e-476a-9d9f-84984a483d3f",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://services.leadconnectorhq.com/conversations/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer pit-fe627027-b9cb-4ea3-aaa4-149459e66a03"
            },
            {
              "name": "Version",
              "value": "2021-04-15"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "SMS"
            },
            {
              "name": "contactId",
              "value": "={{ $json.contactId }}"
            },
            {
              "name": "message",
              "value": "={{ $json.message }}"
            },
            {
              "name": "phone",
              "value": "={{ $json.telefone }}"
            }
          ]
        },
        "options": {}
      },
      "id": "f580c617-99cc-4689-8193-673f7ef3a47c",
      "name": "Send WhatsApp Report",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1840,
        -528
      ]
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\n// Pega datas do pr√≥prio item (que agora vem do Code anterior)\nconst startDate = items[0].json.startDateFormatted;\nconst endDate = items[0].json.endDateFormatted;\n\n// Cabe√ßalho do relat√≥rio\nlet message = `Bom dia, pessoal! Report atualizado das campanhas - ${startDate} √† ${endDate}\\n\\n`;\n\n// Para cada campanha\nitems.forEach((item) => {\n  const campaignName = item.json.campaignName || 'Sem Nome';\n  const spend = parseFloat(item.json.totalSpend || 0);\n  const conversas = parseInt(item.json.totalConversas || 0);\n  const depth2 = parseInt(item.json.totalMensagensDepth2 || 0);\n  const impressions = parseInt(item.json.totalImpressions || 0);\n  const clicks = parseInt(item.json.totalClicks || 0);\n  \n  // C√°lculos\n  const custoMensagem = conversas > 0 ? (spend / conversas) : 0;\n  const cpm = impressions > 0 ? ((spend / impressions) * 1000) : 0;\n  const ctr = impressions > 0 ? ((clicks / impressions) * 100) : 0;\n  const taxaConversao = conversas > 0 ? ((depth2 / conversas) * 100) : 0;\n  \n  // Formatar linha da campanha\n  message += `Campanha: ${campaignName}\\n`;\n  message += `Valor Investido: $${spend.toFixed(2)}\\n`;\n  message += `Conversas Iniciadas: ${conversas}\\n`;\n  message += `Custo por mensagem: $${custoMensagem.toFixed(2)}\\n`;\n  message += `CPM: $${cpm.toFixed(2)}\\n`;\n  message += `CTR: ${ctr.toFixed(2)}%\\n`;\n  message += `Taxa de Convers√£o: ${taxaConversao.toFixed(2)}%\\n\\n`;\n});\n\nreturn [{\n  json: {\n    message: message.trim(),\n    contactId: 'skfa6JP6lLlAXkc8FfIp',\n    telefone: '+5519999999999'  // ‚Üê TROCA PELO N√öMERO REAL!\n  }\n}];"
      },
      "id": "2fdf78e4-e090-44d6-a87f-ea61cada39c5",
      "name": "Format Report",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1616,
        -528
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "Date",
        "include": "allOtherFields",
        "options": {}
      },
      "id": "61d54ef5-9998-452a-a912-74c9af488b60",
      "name": "Split Out4",
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        768,
        -528
      ]
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo"
        },
        "table": {
          "__rl": true,
          "value": "tblq56TF4aT0Zz1sN",
          "mode": "list",
          "cachedResultName": "Ads Performance"
        },
        "filterByFormula": "=AND(IS_AFTER({Date}, '2025-10-21'), IS_BEFORE({Date}, '2025-10-28'), {Active Status} = 'ACTIVE')",
        "options": {}
      },
      "id": "ed910f62-64d9-4e60-8488-f01731942197",
      "name": "Get Weekly Data",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        544,
        -528
      ],
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\n// Pega as datas do Calculate Week Dates\nconst datesNode = $('√öltima semana');\nconst startDateFormatted = datesNode.item.json.startDateFormatted;\nconst endDateFormatted = datesNode.item.json.endDateFormatted;\n\n// Agrupa por Campaign Name\nconst grouped = {};\n\nitems.forEach(item => {\n  const campaignName = item.json['Campaign Name'] || 'Sem Nome';\n  \n  if (!grouped[campaignName]) {\n    grouped[campaignName] = {\n      campaignName: campaignName,\n      totalSpend: 0,\n      totalConversas: 0,\n      totalMensagensDepth2: 0,\n      totalImpressions: 0,\n      totalClicks: 0\n    };\n  }\n  \n  // Soma os valores\n  grouped[campaignName].totalSpend += parseFloat(item.json.Spend || 0);\n  grouped[campaignName].totalConversas += parseInt(item.json['Conversas Iniciadas'] || 0);\n  grouped[campaignName].totalMensagensDepth2 += parseInt(item.json['Mensagens Depth 2'] || 0);\n  grouped[campaignName].totalImpressions += parseInt(item.json.Impressions || 0);\n  grouped[campaignName].totalClicks += parseInt(item.json.Clicks || 0);\n});\n\n// Converte objeto em array e ADICIONA as datas\nconst result = Object.values(grouped).map(campaign => ({\n  ...campaign,\n  startDateFormatted: startDateFormatted,\n  endDateFormatted: endDateFormatted\n}));\n\nreturn result.map(item => ({ json: item }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        928,
        -800
      ],
      "id": "30ccd7a2-102b-4935-a8f8-aa5276b846b1",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://services.leadconnectorhq.com/conversations/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer pit-fe627027-b9cb-4ea3-aaa4-149459e66a03"
            },
            {
              "name": "Version",
              "value": "2021-04-15"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "SMS"
            },
            {
              "name": "contactId",
              "value": "={{ $json.contactId }}"
            },
            {
              "name": "message",
              "value": "={{ $json.message }}"
            },
            {
              "name": "phone",
              "value": "={{ $json.telefone }}"
            }
          ]
        },
        "options": {}
      },
      "id": "a0cc628c-e0c8-4b17-8471-df3f6c229d69",
      "name": "Send WhatsApp Report2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1792,
        -800
      ]
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\n// Pega datas do pr√≥prio item (que agora vem do Code anterior)\nconst startDate = items[0].json.startDateFormatted;\nconst endDate = items[0].json.endDateFormatted;\n\n// Cabe√ßalho do relat√≥rio\nlet message = `Bom dia, pessoal! Report atualizado das campanhas - ${startDate} √† ${endDate}\\n\\n`;\n\n// Para cada campanha\nitems.forEach((item) => {\n  const campaignName = item.json.campaignName || 'Sem Nome';\n  const spend = parseFloat(item.json.totalSpend || 0);\n  const conversas = parseInt(item.json.totalConversas || 0);\n  const depth2 = parseInt(item.json.totalMensagensDepth2 || 0);\n  const impressions = parseInt(item.json.totalImpressions || 0);\n  const clicks = parseInt(item.json.totalClicks || 0);\n  \n  // C√°lculos\n  const custoMensagem = conversas > 0 ? (spend / conversas) : 0;\n  const cpm = impressions > 0 ? ((spend / impressions) * 1000) : 0;\n  const ctr = impressions > 0 ? ((clicks / impressions) * 100) : 0;\n  const taxaConversao = conversas > 0 ? ((depth2 / conversas) * 100) : 0;\n  \n  // Formatar linha da campanha\n  message += `Campanha: ${campaignName}\\n`;\n  message += `Valor Investido: $${spend.toFixed(2)}\\n`;\n  message += `Conversas Iniciadas: ${conversas}\\n`;\n  message += `Custo por mensagem: $${custoMensagem.toFixed(2)}\\n`;\n  message += `CPM: $${cpm.toFixed(2)}\\n`;\n  message += `CTR: ${ctr.toFixed(2)}%\\n`;\n  message += `Taxa de Convers√£o: ${taxaConversao.toFixed(2)}%\\n\\n`;\n});\n\nreturn [{\n  json: {\n    message: message.trim(),\n    contactId: 'skfa6JP6lLlAXkc8FfIp',\n    telefone: '+5519999999999'  // ‚Üê TROCA PELO N√öMERO REAL!\n  }\n}];"
      },
      "id": "5c9503e8-d836-4c94-99d8-3923243ced74",
      "name": "Format Report2",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1568,
        -800
      ]
    },
    {
      "parameters": {
        "fieldToSplitOut": "data",
        "include": "allOtherFields",
        "options": {}
      },
      "id": "12eb7457-9f1e-4672-b2f6-ee8720a6516b",
      "name": "Split Out3",
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        720,
        -800
      ]
    },
    {
      "parameters": {
        "authentication": "airtableOAuth2Api",
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appSPnZynb2jGYGRv",
          "mode": "list",
          "cachedResultName": "AI VSL Demo"
        },
        "table": {
          "__rl": true,
          "value": "tblq56TF4aT0Zz1sN",
          "mode": "list",
          "cachedResultName": "Ads Performance"
        },
        "filterByFormula": "=AND({Date} >= '{{ $json.startDate }}', {Date} <= '{{ $json.endDate }}', {Active Status} = 'ACTIVE')",
        "options": {}
      },
      "id": "8f5831c9-009a-43e1-9d60-0b3c7770c72e",
      "name": "Get Weekly Data2",
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        496,
        -800
      ],
      "credentials": {
        "airtableOAuth2Api": {
          "id": "Ct29AFjU5kldAr8c",
          "name": "vsl ben ai"
        }
      }
    }
  ],
  "pinData": {
    "Basic LLM Chain2": [
      {
        "json": {
          "text": "Okay, here is the revised VSL script with all visual suggestions removed, presenting only the plain voiceover text.\n\n---\n\n### VSL Script: SPARTAN‚Ñ¢ Root Activator Shampoo (Voiceover Only)\n\n**1. HOOK (0-10 seconds):**\n\n**(Voiceover - Energetic, direct, slightly intrigued tone)**\n\nHow did over **3,342** men start reversing their thinning hair... with a simple shower ritual they _only_ do 4 times a week? Seriously. Forget everything you _thought_ you knew about fighting hair loss.\n\n**2. LEAD / PROBLEM AGITATION (10-30 seconds):**\n\n**(Voiceover - Shifts to empathetic, understanding tone)**\n\nLook, if you're seeing more hair on your pillow, in the shower drain, or noticing that hairline creeping back... you know how frustrating it feels. Maybe you've even looked into those complicated solutions ‚Äì the daily pills with side effects, the messy, sticky foams you have to apply _perfectly_, or even considered expensive, painful procedures. It feels like a constant battle, right? You just want something that _works_... without taking over your life. What if getting thicker, fuller-looking hair back was actually‚Ä¶ _easy_?\n\n**3. BODY / SOLUTION PRESENTATION (30 seconds‚Äì2 minutes):**\n\n**(Voiceover - Confident, solution-oriented, friendly tone)**\n\nThat‚Äôs _exactly_ what those 3,342+ men discovered with **SPARTAN‚Ñ¢ Root Activator Shampoo**. This isn't another complex treatment. This IS the core of that simple **'4 washes a week' ritual**.\n\nYou literally just swap out your regular shampoo a few times a week. That‚Äôs it. While you wash, SPARTAN‚Ñ¢'s powerful, plant-powered ingredients ‚Äì like Panax Ginseng and Eclipta Prostrata ‚Äì get to work directly on your scalp, waking up those tired follicles and creating the perfect environment for healthy growth.\n\nBut listen, don't just take my word for it. The proof is in the **over thirty-three hundred guys** already seeing incredible results. Men just like you. Michael saw noticeable changes in density in just _six weeks_. Ryan says his thinning hair is growing back stronger and thicker after only a month. Thomas noticed increased volume from week five! On average, men using this simple ritual start seeing visible signs of regrowth in just 6-8 weeks.\n\nThink about it ‚Äì just washing your hair, something you already do! And to make that ritual even _more_ powerful, when you order today, we‚Äôre including our **FREE Scalp Brush**. Using it with the shampoo helps boost circulation and allows those potent natural ingredients to penetrate even deeper.\n\n**(Voiceover - Addressing skepticism directly but confidently)**\n\nNow, I know what you might be thinking‚Ä¶ \"Can it really be that simple?\" You've probably tried things before that didn't deliver. That‚Äôs precisely _why_ the experience of **3,342+ satisfied men** is so crucial. They were skeptical too, but they committed to the simple ritual and saw the difference. This isn't about harsh chemicals or temporary fixes found in other options; it's about naturally nourishing your scalp back to health, easily.\n\n**4. CALL-TO-ACTION (15‚Äì30 seconds):**\n\n**(Voiceover - Urgent, clear, benefit-focused tone)**\n\nSo, are you ready to stop stressing about thinning hair and join thousands of guys getting real results with a simple ritual?\n\n**Click the link below RIGHT NOW** to claim your SPARTAN‚Ñ¢ Root Activator Shampoo during our limited-time **Spring Sale ‚Äì you can save up to 66% OFF!**\n\nFor the absolute best results, grab the 3 or 6-month bundle ‚Äì that commitment is key to the ritual. Plus, you‚Äôll get **FREE US Shipping**, the **FREE Scalp Brush**, _and_ a **FREE Root Activator Soap Bar**!\n\nAnd here's the best part: you try it **RISK-FREE for 90 days**. If you don't see the difference, if you don't feel your hair getting thicker and fuller like thousands of others, just let us know, and we'll give you a full refund. No questions asked.\n\nThis sale and the free bonuses won't last. Don't wait for your hair loss to get worse.\n\n**Click the button below now.** Start your simple '4 washes a week' ritual today and take back your confidence! **Click below!**\n\n---"
        }
      }
    ],
    "Webhook1": [
      {
        "json": {
          "headers": {
            "host": "cliente-a1.mentorfy.io",
            "user-agent": "Mozilla/5.0 (compatible; AirtableScripting; +https://airtable.com/developers/scripting;)",
            "accept": "*/*",
            "accept-encoding": "gzip,deflate",
            "x-airtable-source": "appSPnZynb2jGYGRv/wflHeXQjhKTW2umCQ",
            "x-forwarded-for": "98.94.29.229",
            "x-forwarded-host": "cliente-a1.mentorfy.io",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "9e2d5292a02e",
            "x-real-ip": "98.94.29.229"
          },
          "params": {},
          "query": {
            "recordId": "recX2u1z6V70g3vEP",
            "action": "ad_BestAds"
          },
          "body": {},
          "webhookUrl": "https://cliente-a1.mentorfy.io/webhook/ad-scraping",
          "executionMode": "production"
        }
      }
    ],
    "Basic LLM Chain3": [
      {
        "json": {
          "text": "Okay, here is the revised VSL script with all visual suggestions removed, presenting only the plain voiceover text.\n\n---\n\n### VSL Script: SPARTAN‚Ñ¢ Root Activator Shampoo (Voiceover Only)\n\n**1. HOOK (0-10 seconds):**\n\n**(Voiceover - Energetic, direct, slightly intrigued tone)**\n\nHow did over **3,342** men start reversing their thinning hair... with a simple shower ritual they _only_ do 4 times a week? Seriously. Forget everything you _thought_ you knew about fighting hair loss.\n\n**2. LEAD / PROBLEM AGITATION (10-30 seconds):**\n\n**(Voiceover - Shifts to empathetic, understanding tone)**\n\nLook, if you're seeing more hair on your pillow, in the shower drain, or noticing that hairline creeping back... you know how frustrating it feels. Maybe you've even looked into those complicated solutions ‚Äì the daily pills with side effects, the messy, sticky foams you have to apply _perfectly_, or even considered expensive, painful procedures. It feels like a constant battle, right? You just want something that _works_... without taking over your life. What if getting thicker, fuller-looking hair back was actually‚Ä¶ _easy_?\n\n**3. BODY / SOLUTION PRESENTATION (30 seconds‚Äì2 minutes):**\n\n**(Voiceover - Confident, solution-oriented, friendly tone)**\n\nThat‚Äôs _exactly_ what those 3,342+ men discovered with **SPARTAN‚Ñ¢ Root Activator Shampoo**. This isn't another complex treatment. This IS the core of that simple **'4 washes a week' ritual**.\n\nYou literally just swap out your regular shampoo a few times a week. That‚Äôs it. While you wash, SPARTAN‚Ñ¢'s powerful, plant-powered ingredients ‚Äì like Panax Ginseng and Eclipta Prostrata ‚Äì get to work directly on your scalp, waking up those tired follicles and creating the perfect environment for healthy growth.\n\nBut listen, don't just take my word for it. The proof is in the **over thirty-three hundred guys** already seeing incredible results. Men just like you. Michael saw noticeable changes in density in just _six weeks_. Ryan says his thinning hair is growing back stronger and thicker after only a month. Thomas noticed increased volume from week five! On average, men using this simple ritual start seeing visible signs of regrowth in just 6-8 weeks.\n\nThink about it ‚Äì just washing your hair, something you already do! And to make that ritual even _more_ powerful, when you order today, we‚Äôre including our **FREE Scalp Brush**. Using it with the shampoo helps boost circulation and allows those potent natural ingredients to penetrate even deeper.\n\n**(Voiceover - Addressing skepticism directly but confidently)**\n\nNow, I know what you might be thinking‚Ä¶ \"Can it really be that simple?\" You've probably tried things before that didn't deliver. That‚Äôs precisely _why_ the experience of **3,342+ satisfied men** is so crucial. They were skeptical too, but they committed to the simple ritual and saw the difference. This isn't about harsh chemicals or temporary fixes found in other options; it's about naturally nourishing your scalp back to health, easily.\n\n**4. CALL-TO-ACTION (15‚Äì30 seconds):**\n\n**(Voiceover - Urgent, clear, benefit-focused tone)**\n\nSo, are you ready to stop stressing about thinning hair and join thousands of guys getting real results with a simple ritual?\n\n**Click the link below RIGHT NOW** to claim your SPARTAN‚Ñ¢ Root Activator Shampoo during our limited-time **Spring Sale ‚Äì you can save up to 66% OFF!**\n\nFor the absolute best results, grab the 3 or 6-month bundle ‚Äì that commitment is key to the ritual. Plus, you‚Äôll get **FREE US Shipping**, the **FREE Scalp Brush**, _and_ a **FREE Root Activator Soap Bar**!\n\nAnd here's the best part: you try it **RISK-FREE for 90 days**. If you don't see the difference, if you don't feel your hair getting thicker and fuller like thousands of others, just let us know, and we'll give you a full refund. No questions asked.\n\nThis sale and the free bonuses won't last. Don't wait for your hair loss to get worse.\n\n**Click the button below now.** Start your simple '4 washes a week' ritual today and take back your confidence! **Click below!**\n\n---"
        }
      }
    ],
    "Switch2": [
      {
        "json": {
          "headers": {
            "host": "cliente-a1.mentorfy.io",
            "user-agent": "Mozilla/5.0 (compatible; AirtableScripting; +https://airtable.com/developers/scripting;)",
            "accept": "*/*",
            "accept-encoding": "gzip,deflate",
            "x-airtable-source": "appSPnZynb2jGYGRv/wfl1mo8ICcQtPU4gJ",
            "x-forwarded-for": "44.192.19.146",
            "x-forwarded-host": "cliente-a1.mentorfy.io",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "9e2d5292a02e",
            "x-real-ip": "44.192.19.146"
          },
          "params": {},
          "query": {
            "recordId": "rech5xoZje3BQSnkP",
            "action": "generateProjectDetails"
          },
          "body": {},
          "webhookUrl": "https://cliente-a1.mentorfy.io/webhook/ai-vsl-pura",
          "executionMode": "production"
        }
      }
    ],
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "cliente-a1.mentorfy.io",
            "user-agent": "Mozilla/5.0 (compatible; AirtableScripting; +https://airtable.com/developers/scripting;)",
            "accept": "*/*",
            "accept-encoding": "gzip,deflate",
            "x-airtable-source": "appSPnZynb2jGYGRv/wflijFa86GMi21Pay",
            "x-forwarded-for": "44.213.71.131",
            "x-forwarded-host": "cliente-a1.mentorfy.io",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "9e2d5292a02e",
            "x-real-ip": "44.213.71.131"
          },
          "params": {},
          "query": {
            "recordId": "recxlo2Mx5qSZvbRV",
            "action": "generateScript"
          },
          "body": {},
          "webhookUrl": "https://cliente-a1.mentorfy.io/webhook/ai-vsl-pura",
          "executionMode": "production"
        }
      }
    ]
  },
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Get Product",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Product1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Script",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Script1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Switch3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Create Angles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Parsing",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain1": {
      "main": [
        [
          {
            "node": "Update Script2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain2": {
      "main": [
        [
          {
            "node": "Update Script1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger2": {
      "main": [
        [
          {
            "node": "Get FB Ad Accounts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out6": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out7": {
      "main": [
        [
          {
            "node": "If9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out8": {
      "main": [
        [
          {
            "node": "If10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out9": {
      "main": [
        [
          {
            "node": "If11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Get FB Ad Contents",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If9": {
      "main": [
        [
          {
            "node": "Get FB Ad Sets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If10": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If11": {
      "main": [
        [
          {
            "node": "If6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields6": {
      "main": [
        [
          {
            "node": "Airtable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If6": {
      "main": [
        [
          {
            "node": "Edit Fields6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Edit Fields6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook1": {
      "main": [
        [
          {
            "node": "Airtable10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Facebook Graph API10": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Edit Fields7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields5": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "If7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields7": {
      "main": [
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If7": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtable10": {
      "main": [
        [
          {
            "node": "Facebook Graph API10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Airtable13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Generate Angles",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Parsing",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get Product": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Product1": {
      "main": [
        [
          {
            "node": "Generate Angles",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Script": {
      "main": [
        [
          {
            "node": "Basic LLM Chain1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Script1": {
      "main": [
        [
          {
            "node": "Basic LLM Chain2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Angles": {
      "main": [
        [
          {
            "node": "Update Product",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parsing": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get FB Ad Accounts": {
      "main": [
        [
          {
            "node": "Split Out6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Ad Campaigns": {
      "main": [
        [
          {
            "node": "Split Out7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get FB Ad Sets": {
      "main": [
        [
          {
            "node": "Split Out8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get FB Ad Contents": {
      "main": [
        [
          {
            "node": "Split Out9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [],
        [],
        [
          {
            "node": "Add Account Name",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Account Name": {
      "main": [
        [
          {
            "node": "Get Ad Campaigns",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Get Product2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Product3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Script2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Script3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Product Overview & Customer Research1": {
      "main": [
        [
          {
            "node": "Update Product Details1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Product Overview & Customer Research1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Split Out1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out1": {
      "main": [
        [
          {
            "node": "Create Angles1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Parsing1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "Update Script4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain3": {
      "main": [
        [
          {
            "node": "Update Script",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Generate Angles1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Parsing1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get Product2": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Product3": {
      "main": [
        [
          {
            "node": "Generate Angles1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Script2": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Script3": {
      "main": [
        [
          {
            "node": "Basic LLM Chain3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Angles1": {
      "main": [
        [
          {
            "node": "Update Product1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Angles1": {
      "main": [
        [
          {
            "node": "Parsing1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parsing1": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model7": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Switch3": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Angles": {
      "main": [
        [
          {
            "node": "Parsing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Product Overview & Customer Research2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Product Overview & Customer Research2": {
      "main": [
        [
          {
            "node": "Update Product Details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtable": {
      "main": [
        [
          {
            "node": "1 dia",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Weekly Data1": {
      "main": [
        [
          {
            "node": "Split Out5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out5": {
      "main": [
        [
          {
            "node": "Code in JavaScript4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Report1": {
      "main": [
        [
          {
            "node": "Send WhatsApp Report1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript4": {
      "main": [
        [
          {
            "node": "Format Report1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1 dia": {
      "main": [
        [
          {
            "node": "Get Weekly Data1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "√öltimos 3 dias": {
      "main": [
        [
          {
            "node": "Get Weekly Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "Format Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Report": {
      "main": [
        [
          {
            "node": "Send WhatsApp Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out4": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Weekly Data": {
      "main": [
        [
          {
            "node": "Split Out4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "√öltima semana": {
      "main": [
        [
          {
            "node": "Get Weekly Data2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Format Report2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Report2": {
      "main": [
        [
          {
            "node": "Send WhatsApp Report2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out3": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Weekly Data2": {
      "main": [
        [
          {
            "node": "Split Out3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "5d1c2426-8ac6-47a4-add6-98be4f8e0545",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "9d65e6caa0e89e696b77790e020391d74468b15f71b3dcdb63aad81f090f5e69"
  },
  "id": "Q34tfBT2l1vFlmNc",
  "tags": []
}